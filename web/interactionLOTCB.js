/**
 * Created by skyeguy on 10/26/17.
 */

var message = " ";
var tellMessage = false;
var makeWord = [];
var msgWords = [];
var msgPhrase = -1;
var msgWord = 0;
var msgWordLimit = 17;
var msgWait = 120;
var msgKeepTime = new Date().getTime();

function messageReader()
{
    //Leave conversation
    if (lowBar == "dialogue" && playersTurnToSpeak == false)
    {
        if (sKey)
        {
            sKey = false;
            player.dialogueChoiceMade = false;
            player.dialoguePosition = 0;
            playersTurnToSpeak = true;
            conversationID[0] = "none";
            msgPhrase = -1;
            msgWord = 0;
            msgWords = [];
            makeWord = [];
            message = " ";
            tellMessage = false;
            msgKeepTime = 0;
            lowBar = "information";
            player.dialogueOptions = [];
        }
    }

    //cycle through words to read over time and read them in chunks
    if (lowBar == "dialogue" && tellMessage == true)
    {
        if (mouseY < 90 && clickReleased)
        {
            clickReleased = false;
            msgKeepTime = new Date().getTime();
            msgPhrase += 1;
            if (msgPhrase >= msgWords.length)
            {
                msgPhrase = -1;
                msgWord = 0;
                msgWords = [];
                makeWord = [];
                message = " ";
                tellMessage = "reset";
            }
        }
        XXX.beginPath();
        XXX.lineWidth = 2;
        XXX.fillStyle = "#f8ecc7";
        XXX.strokeStyle = "black";
        XXX.rect(0, 0, CCC.width, 90);
        XXX.fill();
        XXX.stroke();

        //change phrase
        if (new Date().getTime() - msgKeepTime > (msgWait * 100))
        {
            msgKeepTime = new Date().getTime();
            if (msgPhrase == -1)
            {
                msgPhrase = 0;
            }
            else
            {
                msgPhrase += 1;
                if (msgPhrase >= msgWords.length)
                {
                    msgPhrase = -1;
                    msgWord = 0;
                    msgWords = [];
                    makeWord = [];
                    message = " ";
                    tellMessage = "reset";
                }
            }
        }

        //READ word by word
        if (tellMessage != "reset" && msgPhrase >= 0)
        {
            XXX.font="bold 18px Book Antiqua";
            XXX.fillStyle = "black";
            XXX.textAlign="center";
            XXX.fillText(msgWords[msgPhrase], 1/2 * CCC.width, 45);
            XXX.textAlign="left"; //this is to reset it to the standard for the rest to come.
        }
    }
}

function setMsg(msg)
{
    if (tellMessage == false) // && tellMessage != "reset"
    {
        message = msg;
        console.log(message);
        tellMessage = true;

        msgPhrase = -1;
        for (var mssg = 0; mssg < message.length; mssg++)
        {
            if (message[mssg] != " ")
            {
                makeWord.push(message[mssg]);

                if ((mssg + 1) == message.length)
                {
                    msgWords.push(makeWord.join(""));
                    makeWord = [];
                    msgWord = 0;
                }
            }
            else if (mssg != 0)
            {
                msgWord += 1;
                if (msgWord >= msgWordLimit)
                {
                    msgWords.push(makeWord.join(""));
                    makeWord = [];
                    msgWord = 0;
                }
                else
                {
                    makeWord.push(message[mssg]);
                }
            }
        }
    }
}

function interaction(me)
{
    var self = me;

    //SC == store conversation
    self.SC = function()
    {
        for (var key in conversations)
        {
            if (conversations[key][0] == conversationID[0])
            {
                conversations[key][1] = conversationID[1];
            }
        }
    };
    //RC == restore conversation
    self.RC = function()
    {
        for (var key in conversations)
        {
            if (conversations[key][0] == conversationID[0])
            {
                conversationID[1] = conversations[key][1];
            }
        }
    };

    if (self.alive == true)
    {
        //Interaction with...
        var dtp = self.DTP();
        if (dtp < 200 )
        {
            var dtm = self.DTM();

            if (self.type == "Person" && !self.petrified || self.type == "Soldier" && !self.petrified || self.interactable && !self.petrified || self.type == "Changeling" && self.childForm == true && !self.petrified)
            {
                //CONVERSATION AND SOCIAL INTERACTIONS WITH AI CHARACTERS
                if (!dialogueActive && clickReleased == true && dtm < self.sizeRadius && dtp < 55 && self.disturbed == false && self.offended == false && self.dmx == player.dmx || dialogueActive && conversationID[0] != "none" && dtp < 55 && self.disturbed == false && self.offended == false && self.engagedInDialogue && self.dmx == player.dmx) //|| playersTurnToSpeak == false
                {
                    dialogueActive = true;
                    self.engagedInDialogue = true;

                    if (self.ID == "Drohfor" || conversationID[0] == "Drohfor")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Drohfor";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.huntingWagerQuest == "complete")
                                {
                                    player.dialogueOptions = [["Good Day!", false, "a"], ["What's that you're wearing?", false, "c"]];
                                }
                                else if (player.getCharisma() >= 1)
                                {
                                    player.dialogueOptions = [["Good Day!", false, "a"], ["What are you doing?", false, "b"], ["What's that you're wearing?", false, "c"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["Good Day!", false, "a"], ["What are you doing?", false, "b"], ["What's that you're wearing?", false, "c"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            conversationID[1] = "0a";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            conversationID[1] = "0b";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            conversationID[1] = "0c";
                                            playersTurnToSpeak = false;
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Same as any other, it's not special or nothin'.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (player.getCharisma() < 1 && player.title != "Nobility" && player.title != "Royalty")
                            {
                                //text dialogue
                                setMsg("Wasting time talking to you.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (player.title == "Royalty" || player.title == "Nobility")
                            {
                                if (player.gender == "Female")
                                {
                                    //text dialogue
                                    setMsg("Tracking, m'lady.");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 1;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    //text dialogue
                                    setMsg("Tracking, m'lord.");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 1;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("I'm tracking a pack of friches, what's it to you?");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("This old thing? It's from a walrus I killed years back, had Maggy tan the hide n'make it into this.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.title == "Royalty" || player.title == "Nobility")
                                {
                                    player.dialogueOptions = [["Carry on.", false, "a"], ["Your tracking looks an awful lot like wandering to me.", false, "c"]];
                                }
                                else if (player.getCharisma() >= 1)
                                {
                                    player.dialogueOptions = [["Just curious that's all.", false, "a"], ["Don't let me keep you then.", false, "b"], ["Your tracking looks an awful lot like wandering to me.", false, "c"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            conversationID[1] = "1c";
                                            playersTurnToSpeak = false;
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            if (player.title == "Royalty" || player.title == "Nobility")
                            {
                                if (player.gender == "Female" && player.getCharisma > 1 && player.raceName != "Thengar" || player.gender == "Female" && player.getCharisma > 1 && player.raceName != "Freynor" || player.gender == "Female" && player.getCharisma > 1 && player.raceName != "Kellish")
                                {
                                    //text dialogue
                                    setMsg("If you say so, m'lady...");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    if (player.gender == "Male")
                                    {
                                        //text dialogue
                                        setMsg("Perhaps a highborn lad such as yourself would do better... Is that what you're sayin'? Well be my guest and hunt them if you'd like.");

                                        //on ended text dialogue
                                        if (tellMessage == "reset")
                                        {
                                            msgReset();

                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            quests.activeQuests.push({name: "Hunting Wager", description: "After insulting Drohfor he suggested that you would no better at hunting the pack of peculiar friches he was after."});
                                            conversationID[1] = 2;
                                            quests.huntingWagerFrichPack = true;
                                            change = "none";
                                            self.SC();
                                        }
                                        else
                                        {
                                            self.SC();
                                        }
                                    }
                                    else
                                    {
                                        //text dialogue
                                        setMsg("Perhaps a highborn lasse such as yourself would do better... Is that what you're sayin'? Be my guest and hunt them if you'd like...");

                                        //on ended text dialogue
                                        if (tellMessage == "reset")
                                        {
                                            msgReset();

                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            quests.activeQuests.push({name: "Hunting Wager", description: "After insulting Drohfor he suggested that you would no better at hunting the pack of peculiar friches he was after."});
                                            conversationID[1] = 2;
                                            quests.huntingWagerFrichPack = true;
                                            change = "none";
                                            self.SC();
                                        }
                                        else
                                        {
                                            self.SC();
                                        }
                                    }
                                }
                            }
                            else
                            {
                                if (player.gender == "Female")
                                {
                                    //text dialogue
                                    setMsg("You call this wandering!? Try it yourself if you think it's so easy! I'll bet you 15 coins that you won't even know where to start!");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        quests.activeQuests.push({name: "Hunting Wager", description: "After insulting Drohfor he bet you 15 coins that you would do no better at hunting the peculiar pack of friches he was after."});
                                        conversationID[1] = 2;
                                        quests.huntingWagerFrichPack = true;
                                        change = "none";
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    //text dialogue
                                    setMsg("Wandering!? Let's see you try and hunt them then! I'll wager 15 coins you'll come running back here with your tail between your legs.");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        quests.activeQuests.push({name: "Hunting Wager", description: "After insulting Drohfor he bet you 15 coins that you would do no better at hunting the peculiar pack of friches he was after."});
                                        conversationID[1] = 2;
                                        quests.huntingWagerFrichPack = true;
                                        change = "none";
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.title == "Royalty" || player.title == "Nobility")
                                {
                                    player.dialogueOptions = [["The task is complete.", false, "a"]];
                                }
                                else if (player.getCharisma() >= 1)
                                {
                                    player.dialogueOptions = [["Done.", false, "a"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "2a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            console.log(quests.huntingWagerKillCount);
                            if (quests.huntingWagerKillCount >= 3 && quests.huntingWagerQuest == false)
                            {
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                playersTurnToSpeak = false;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (quests.huntingWagerKillCount >= 3 && quests.huntingWagerQuest == false)
                            {
                                quests.huntingWagerQuest = "complete";
                                quests.completeQuests.push({name: "Hunting Wager", description: "You successfully tracked down and slayed the pack of giant friches that Drohfor had been after."});
                                quests.huntingWagerFrichPack = false;
                                player.experience += 110;
                                player.fame += 1;
                                worldItems.push([new Item("coins", X, Y), 15]);

                                if (player.title == "Royalty" || player.title == "Nobility")
                                {
                                    if (player.gender = "Male")
                                    {
                                        drohforLordVictory.play();
                                    }
                                    else
                                    {
                                        drohforLadyVictory.play();
                                    }
                                }
                                else
                                {
                                    drohforCommonerVictory.play();
                                }
                            }
                            else
                            {
                                playersTurnToSpeak = true;
                            }

                            if (quests.huntingWagerQuest == "complete")
                            {
                                if (player.dialogueChoiceMade == false)
                                {
                                    if (player.title == "Royalty" || player.title == "Nobility")
                                    {
                                        player.dialogueOptions = [["I'll be on my way.", false, "a"]];
                                    }
                                    else if (player.getCharisma() >= 1)
                                    {
                                        player.dialogueOptions = [["I'll be on my way.", false, "a"], ["As I said before, wandering!", false, "b"]];
                                    }
                                }
                                else if (player.dialogueChoiceMade == true)
                                {
                                    player.dialogueChoiceMade = false;
                                    for (var i = 0; i < player.dialogueOptions.length; i++)
                                    {
                                        if (player.dialogueOptions[i][1] == true)
                                        {
                                            if (player.dialogueOptions[i][2] == "a")
                                            {
                                                conversationID[1] = "3a";
                                            }
                                            else if (player.dialogueOptions[i][2] == "b")
                                            {
                                                tellMessage = false;
                                                conversationID[1] = "3b";
                                                playersTurnToSpeak = false;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();

                        }
                        else if (conversationID[1] == "3b")
                        {
                            if (player.gender == "Female")
                            {
                                //text dialogue
                                setMsg("I'll hear no more of that lasse.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Shut your mouth, boy!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Toggin" || conversationID[0] == "Toggin")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Toggin";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.teshirNorthRoadQuest == "complete")
                                {
                                    player.dialogueOptions = [["Good Day to you ser.", false, "a"], ["What is your trade?", false, "b"]];
                                }
                                else if (player.getCharisma() >= 2)
                                {
                                    player.dialogueOptions = [["Good Day to you ser.", false, "a"], ["What is your trade?", false, "b"], ["Is something bothering you? You seem worried.", false, "d"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["Good Day to you ser.", false, "a"], ["What is your trade?", false, "b"], ["Is something bothering you? You look worried.", false, "c"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "0a";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "0b";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            conversationID[1] = "0c";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            conversationID[1] = "0d";
                                            playersTurnToSpeak = false;
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            togginGreet.play();
                            togginGreet.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            togginLiving.play();
                            togginLiving.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //This is the polite declination of sharing the quest
                            if (player.title == "Royalty" && player.raceName == "Freynor" || player.title == "Royalty" && player.freynorFaction > -50 || player.title == "Nobility" && player.freynorFaction > -50)
                            {
                                if (player.gender == "Female")
                                {
                                    togginFDecline.play();
                                    togginFDecline.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    togginMDecline.play();
                                    togginMDecline.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                            else
                            {
                                togginScat.play();
                                togginScat.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //this introduces the quest
                            togginAdmit.play();
                            console.log(conversationID[0] != "none" && dtp < 100 && self.disturbed == false);
                            togginAdmit.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I accept.", false, "a"], ["Maybe another time.", false, "b"], ["That sounds dangerous, I don't think I'm up for it.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "1b";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            conversationID[1] = "1c";
                                            playersTurnToSpeak = false;
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            if (quests.teshirNorthRoadQuest != "complete")
                            {
                                player.dialoguePosition = 0;
                                quests.activeQuests.push({name: "Teshir North Road", description: "Bandits block the road to the north, get rid of them so that Toggin can get back home."});
                                quests.teshirNorthRoadQuest = true;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            togginTooLong.play();
                            togginTooLong.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            togginChangeMind.play();
                            togginChangeMind.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            player.dialogueOptions = [];
                            if (quests.teshirNorthRoadKillCount >= 4 && quests.teshirNorthRoadQuest != "complete" && uniqueChars.hetmerLDS == false)
                            {
                                togginBanditPayment.play();
                                quests.teshirNorthRoadQuest = "complete";
                                quests.teshirNorthRoadBandits = false;
                                player.experience += 350;
                                player.freynorFaction += 10;
                                player.fame += 1;
                                worldItems.push([new Item("coins", X, Y), 20]);
                                quests.completeQuests.push({name: "Teshir North Road", description: "You have slain the bandits blocking the way to the north along with their fearsome bandit chieftain, Hetmer."})
                            }
                            togginBanditPayment.onended = function()
                            {
                                change = "none";
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Balgur Mercenary" && player.theBalgurMercenariesFaction >= 0 && self.team != "player" || self.ID == "Balgur Mercenary" && player.theBalgurMercenariesFaction >= 0 && self.team != "player" || conversationID[0] == "Balgur Mercenary" && player.theBalgurMercenariesFaction >= 0 && self.team != "player")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Balgur Mercenary";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[Hire for 350 Coins]", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            var coinHitz = -1;
                            var servicesPaid = false;

                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 350)
                                {
                                    coinHitz = i;
                                }
                            }

                            if (coinHitz > -1)
                            {
                                if (Inventory[coinHitz][1] == 350)
                                {
                                    Inventory.splice(coinHitz, 1);
                                }
                                else
                                {
                                    Inventory[coinHitz][1] -= 350
                                }

                                servicesPaid = true;
                            }

                            if (servicesPaid)
                            {
                                self.baseTeam = "player";
                            }

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Sellsword" && self.team != "player" || conversationID[0] == "Sellsword" && self.team != "player")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Sellsword";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (typeof(self.ultra.hirePrice) != "undefined")
                                {
                                    if (self.ultra.hirePrice > 1)
                                    {
                                        player.dialogueOptions = [["[Hire for " + self.ultra.hirePrice + " Coins]", false, "a"]];
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            var coinHitz = -1;
                            var servicesPaid = false;

                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= self.ultra.hirePrice)
                                {
                                    coinHitz = i;
                                }
                            }

                            if (coinHitz > -1)
                            {
                                if (Inventory[coinHitz][1] == self.ultra.hirePrice)
                                {
                                    Inventory.splice(coinHitz, 1);
                                }
                                else
                                {
                                    Inventory[coinHitz][1] -= self.ultra.hirePrice;
                                }

                                servicesPaid = true;
                            }

                            if (servicesPaid)
                            {
                                self.baseTeam = "player";
                            }

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Naaprid Vendor" || conversationID[0] == "NaapridVendor")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "NaapridVendor";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 440)
                                    {
                                        player.dialogueOptions.push(["[Purchase a Milking Naaprid] 440 coins", false, "a"]);
                                        break;
                                    }
                                }
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 375)
                                    {
                                        player.dialogueOptions.push(["[Purchase a Work Naaprid] 375 coins", false, "b"]);
                                        break;
                                    }
                                }

                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                        if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            var hunz = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 440)
                                {
                                    hunz = i;
                                    break;
                                }
                            }

                            if (hunz > -1)
                            {
                                //pay
                                Inventory[hunz][1] -= 440;
                                if (Inventory[hunz][1] < 1)
                                {
                                    Inventory.splice(hunz, 1);
                                }
                                //receive
                                ArtificialIntelligenceAccess.push(new Unit(-44097, -2152, "Naaprid", false, "player"));
                            }
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "0b")
                        {
                            var hunz = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 375)
                                {
                                    hunz = i;
                                    break;
                                }
                            }

                            if (hunz > -1)
                            {
                                //pay
                                Inventory[hunz][1] -= 375;
                                if (Inventory[hunz][1] < 1)
                                {
                                    Inventory.splice(hunz, 1);
                                }
                                //receive
                                ArtificialIntelligenceAccess.push(new Unit(-44097, -2152, "Naaprid", true, "player"));
                            }
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Francil the Stablemaster" || conversationID[0] == "Francil")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Francil";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 725)
                                    {
                                        player.dialogueOptions.push(["[Purchase a Mare] 725 coins", false, "a"]);
                                        break;
                                    }
                                }
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 850)
                                    {
                                        player.dialogueOptions.push(["[Purchase a Stallion] 850 coins", false, "b"]);
                                        break;
                                    }
                                }

                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                        if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            var hunz = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 725)
                                {
                                    hunz = i;
                                    break;
                                }
                            }

                            if (hunz > -1)
                            {
                                //pay
                                Inventory[hunz][1] -= 725;
                                if (Inventory[hunz][1] < 1)
                                {
                                    Inventory.splice(hunz, 1);
                                }
                                //receive
                                ArtificialIntelligenceAccess.push(new Unit(-46869, 1564, "Horse", false, "player"));
                            }
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "0b")
                        {
                            var hunz = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 850)
                                {
                                    hunz = i;
                                    break;
                                }
                            }

                            if (hunz > -1)
                            {
                                //pay
                                Inventory[hunz][1] -= 850;
                                if (Inventory[hunz][1] < 1)
                                {
                                    Inventory.splice(hunz, 1);
                                }
                                //receive
                                ArtificialIntelligenceAccess.push(new Unit(-46869, 1564, "Horse", true, "player"));
                            }
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Tor Captain" && player.freynorFaction >= 0 && self.team != "player" && player.raceName == "Freynor" && player.title == "Nobility" || self.ID == "Tor Captain" && player.freynorFaction >= 0 && self.team != "player" && player.raceName == "Freynor" && player.title == "Royalty" || self.ID == "Tor Soldier" && player.freynorFaction >= 0 && self.team != "player" && player.raceName == "Freynor" && player.title == "Royalty" || self.ID == "Tor Soldier" && player.freynorFaction >= 0 && self.team != "player" && player.raceName == "Freynor" && player.title == "Nobility" || self.ID == "Tor Huskarl" && player.freynorFaction >= 0 && self.team != "player" && player.raceName == "Freynor" && player.title == "Royalty"  || self.ID == "Tor Huskarl" && player.freynorFaction >= 0 && self.team != "player" && player.raceName == "Freynor" && player.title == "Nobility" || conversationID[0] == "Tor" && player.freynorFaction >= 0 && self.team != "player" && player.raceName == "Freynor" && player.title == "Nobility" || conversationID[0] == "Tor" && player.freynorFaction >= 0 && self.team != "player" && player.raceName == "Freynor" && player.title == "Royalty")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Tor";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[Take Command]", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            self.baseTeam = "player";

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Beulingerr Captain" && player.thengarFaction >= 0 && self.team != "player" && player.raceName == "Thengar" && player.title == "Nobility" || self.ID == "Beulingerr Captain" && player.thengarFaction >= 0 && self.team != "player" && player.raceName == "Thengar" && player.title == "Royalty" || self.ID == "Beulingerr Soldier" && player.thengarFaction >= 0 && self.team != "player" && player.raceName == "Thengar" && player.title == "Royalty" || self.ID == "Beulingerr Soldier" && player.thengarFaction >= 0 && self.team != "player" && player.raceName == "Thengar" && player.title == "Nobility" || conversationID[0] == "Beulingerr" && player.thengarFaction >= 0 && self.team != "player" && player.raceName == "Thengar" && player.title == "Nobility" || conversationID[0] == "Beulingerr" && player.thengarFaction >= 0 && self.team != "player" && player.raceName == "Thengar" && player.title == "Royalty")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Beulingerr";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[Take Command]", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            self.baseTeam = "player";

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Altezor Captain" && player.nirwadenFaction >= 0 && self.team != "player" && player.raceName == "Nirwaden" && player.title == "Nobility" || self.ID == "Altezor Captain" && player.nirwadenFaction >= 0 && self.team != "player" && player.raceName == "Nirwaden" && player.title == "Royalty" || self.ID == "Altezor Soldier" && player.nirwadenFaction >= 0 && self.team != "player" && player.raceName == "Nirwaden" && player.title == "Royalty" || self.ID == "Altezor Soldier" && player.nirwadenFaction >= 0 && self.team != "player" && player.raceName == "Nirwaden" && player.title == "Nobility" || self.ID == "Altezor Knight" && player.nirwadenFaction >= 0 && self.team != "player" && player.raceName == "Nirwaden" && player.title == "Nobility" || self.ID == "Altezor Knight" && player.nirwadenFaction >= 0 && self.team != "player" && player.raceName == "Nirwaden" && player.title == "Royalty" || conversationID[0] == "Altezor" && player.nirwadenFaction >= 0 && self.team != "player" && player.raceName == "Nirwaden" && player.title == "Nobility" || conversationID[0] == "Altezor" && player.nirwadenFaction >= 0 && self.team != "player" && player.raceName == "Nirwaden" && player.title == "Royalty")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Altezor";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[Take Command]", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            self.baseTeam = "player";

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Rutgar the Warden" || conversationID[0] == "Rutgar")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Rutgar";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[Buy Kellish Slave For 290 Coins]", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            var coinHitz = -1;
                            var servicesPaid = false;

                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 290)
                                {
                                    coinHitz = i;
                                }
                            }

                            if (coinHitz > -1)
                            {
                                if (Inventory[coinHitz][1] == 290)
                                {
                                    Inventory.splice(coinHitz, 1);
                                }
                                else
                                {
                                    Inventory[coinHitz][1] -= 290;
                                }

                                servicesPaid = true;
                            }

                            if (servicesPaid)
                            {
                                quests.rutgarSlave = true;
                                change = "slavePurchased";
                            }

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Jinn" && self.type == "Jinn" || conversationID[0] == "Jinn")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Jinn";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["...", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("You who possess the vessel to which I have been bound, are owed a single wish, which I will grant for you.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Cure me of all of my afflictions.", false, "a"], ["I wish to not have any wishes", false, "b"], ["I wish for infinite wishes.", false, "c"], ["I wish to have an infinite amount of wishes.", false, "d"], ["I wish to have one more wish.", false, "e"], ["I wish to have two more wishes.", false, "f"], ["Restore my soul and body to their peak condition.", false, "g"], ["Give me an item of my choosing in an amount of my choosing.", false, "h"], ["Rid me of hunger and thirst.", false, "i"], ["Grant me life eternal. ", false, "j"], ["Grant me superhuman strength and speed.", false, "k"], ["Transform me into a diety.", false, "l"], ["Grant me wealth and status.", false, "m"], ["I wish to be loved and cherished throughout the lands.", false, "n"], ["I wish to set you free from your magical captivity.", false, "o"], ["Strengthen my magical ability, but let me retain my humanity.", false, "p"], ["Give me worldly expertise, but let me retain my humanity.", false, "q"], ["Make me into a demi-god.", false, "r"], ["I wish you to be banished from reality for eternity.", false, "s"], ["I wish to have a comprehensive collection of all of the spell scrolls that have been written.", false, "t"], ["I wish to have a spell that no mage has yet discovered.", false, "u"], ["I wish to destroy all that cross my path.", false, "v"], ["I wish to bend time to my will whenever I desire without being affected myself.", false, "w"], ["I wish to change my gender.", false, "x"], ["I wish to have an army that is obedient only to me.", false, "y"], ["I wish to free you on the condition that you do not harm anyone directly or indirectly including me.", false, "z"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1h";
                                        }
                                        else if (player.dialogueOptions[i][2] == "i")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1i";
                                        }
                                        else if (player.dialogueOptions[i][2] == "j")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1j";
                                        }
                                        else if (player.dialogueOptions[i][2] == "k")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1k";
                                        }
                                        else if (player.dialogueOptions[i][2] == "l")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1l";
                                        }
                                        else if (player.dialogueOptions[i][2] == "m")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1m";
                                        }
                                        else if (player.dialogueOptions[i][2] == "n")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1n";
                                        }
                                        else if (player.dialogueOptions[i][2] == "o")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1o";
                                        }
                                        else if (player.dialogueOptions[i][2] == "p")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1p";
                                        }
                                        else if (player.dialogueOptions[i][2] == "q")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1q";
                                        }
                                        else if (player.dialogueOptions[i][2] == "r")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1r";
                                        }
                                        else if (player.dialogueOptions[i][2] == "s")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1s";
                                        }
                                        else if (player.dialogueOptions[i][2] == "t")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1t";
                                        }
                                        else if (player.dialogueOptions[i][2] == "u")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1u";
                                        }
                                        else if (player.dialogueOptions[i][2] == "v")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1v";
                                        }
                                        else if (player.dialogueOptions[i][2] == "w")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1w";
                                        }
                                        else if (player.dialogueOptions[i][2] == "x")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1x";
                                        }
                                        else if (player.dialogueOptions[i][2] == "y")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1y";
                                        }
                                        else if (player.dialogueOptions[i][2] == "z")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1z";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            if (Math.round(Math.random()))
                            {
                                setMsg("Your wish is granted.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    player.asthma = false;
                                    player.thirst = player.thirstMAX;
                                    player.hunger = player.hungerMAX;
                                    player.watered = true;
                                    player.fed = true;
                                    player.sleep = player.sleepMAX;

                                    player.radiation = 0;

                                    player.illnesses = [];
                                    player.gojiiTimer = 0;
                                    player.acidI = false;
                                    player.acidII = false;
                                    player.acidIII = false;
                                    player.acidIV = false;
                                    player.acidV = false;
                                    player.petrified = false;
                                    player.fatigueI = false;
                                    player.fatigueII = false;
                                    player.fatigueIII = false;
                                    player.fatigueIV = false;
                                    player.fatigueV = false;
                                    player.gassinessTime = 0;
                                    player.eliktozeola = false;
                                    player.poisonI = false;
                                    player.poisonII = false;
                                    player.poisonIII = false;
                                    player.poisonIV = false;
                                    player.poisonV = false;
                                    player.poisonVI = false;
                                    player.etnaVenTime = 0;
                                    player.fungalFever = false;
                                    player.cyrinthilimTime = 0;
                                    player.haeflowerTime = 0;
                                    player.bahabTime = 0;
                                    player.inebriation = 0;
                                    player.fleshMites = false;
                                    player.throatTicks = false;
                                    player.gutWorms = false;
                                    player.brainMaggots = false;
                                    player.gojiiTimer = 0;
                                    player.gojiiPoisoned = false;
                                    player.insomniaTime = 0;
                                    player.insomniaStoreTime = 0;
                                    player.insomniated = false; //this is a flag that lets thing give the player permanent insomnia until this is switched off by something.
                                    player.swollenV = false;
                                    player.swollenIV = false;
                                    player.swollenIII = false;
                                    player.swollenII = false;
                                    player.swollenI = false;
                                    player.swollenTime = 0;
                                    player.timeSinceBadFoodEaten = 0;
                                    player.silvered = false;
                                    player.vamprism = false;
                                    player.lycanthropy = false;
                                    if (player.venandi < 400)
                                    {
                                        player.venandi = 0;
                                    }
                                    player.kolumHigh = 0;
                                    player.kolumAddiction = false;
                                    player.kolumTolerance = 0;
                                    player.kolumDegredation = 0;

                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                setMsg("Your wish is granted.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    //kill the player no matter what
                                    player.playerDeath = true;
                                    gameState = "paused";
                                    location.reload();

                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("As you just used the only wish you had to not have any wishes, you granted yourself your own wish...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("There are infinite wishes already, so your wish was needless. You have used up your singular wish, however, and will not be receiving another.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1d")
                        {
                            //text dialogue
                            setMsg("Your wish will be infinite in amount in that your single finite wish will be composed of infinitely small wishes that all work together to produce the result of the single wish that they make up.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1e")
                        {
                            //text dialogue
                            setMsg("As you wish...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1f")
                        {
                            //text dialogue
                            setMsg("You now have 2 more wishes than an entity with negative 2 wishes, for it has two less wishes than you have.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1g")
                        {
                            //text dialogue
                            setMsg("Your wish is granted.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                player.asthma = false;
                                player.respiration = player.respirationMAX;
                                player.will = player.willMAX;
                                player.energy = player.energyMAX;
                                player.health = player.healthMAX;
                                player.thirst = player.thirstMAX;
                                player.hunger = player.hungerMAX;
                                player.watered = true;
                                player.fed = true;
                                player.sleep = player.sleepMAX;

                                player.radiation = 0;

                                player.illnesses = [];
                                player.gojiiTimer = 0;
                                player.acidI = false;
                                player.acidII = false;
                                player.acidIII = false;
                                player.acidIV = false;
                                player.acidV = false;
                                player.petrified = false;
                                player.fatigueI = false;
                                player.fatigueII = false;
                                player.fatigueIII = false;
                                player.fatigueIV = false;
                                player.fatigueV = false;
                                player.gassinessTime = 0;
                                player.eliktozeola = false;
                                player.poisonI = false;
                                player.poisonII = false;
                                player.poisonIII = false;
                                player.poisonIV = false;
                                player.poisonV = false;
                                player.poisonVI = false;
                                player.etnaVenTime = 0;
                                player.fungalFever = false;
                                player.cyrinthilimTime = 0;
                                player.haeflowerTime = 0;
                                player.bahabTime = 0;
                                player.inebriation = 0;
                                player.fleshMites = false;
                                player.throatTicks = false;
                                player.gutWorms = false;
                                player.brainMaggots = false;
                                player.gojiiTimer = 0;
                                player.gojiiPoisoned = false;
                                player.insomniaTime = 0;
                                player.insomniaStoreTime = 0;
                                player.insomniated = false; //this is a flag that lets thing give the player permanent insomnia until this is switched off by something.
                                player.swollenV = false;
                                player.swollenIV = false;
                                player.swollenIII = false;
                                player.swollenII = false;
                                player.swollenI = false;
                                player.swollenTime = 0;
                                player.timeSinceBadFoodEaten = 0;
                                player.silvered = false;
                                player.vamprism = false;
                                player.lycanthropy = false;
                                if (player.venandi < 400)
                                {
                                    player.venandi = 0;
                                }
                                player.kolumHigh = 0;
                                player.kolumAddiction = false;
                                player.kolumTolerance = 0;
                                player.kolumDegredation = 0;

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1h")
                        {
                            var chtItem = prompt("Name exactly what you want, and be precise...");
                            var chtAmnt = JSON.parse(prompt("What amount of " + chtItem + " do you wish for?"));
                            worldItems.push([new Item(chtItem, X, Y), chtAmnt]);
                            dialogueReset(self);
                            self.wishedOut = true;
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1i")
                        {
                            var rand = Math.random();
                            if (rand < 0.333)
                            {
                                //text dialogue
                                setMsg("Your wish is granted.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    player.hunger = player.hungerMAX;
                                    player.thirst = player.thirstMAX;
                                    player.fed = true;
                                    player.watered = true;
                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (rand < 0.666)
                            {
                                //text dialogue
                                setMsg("Your wish is granted.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    //kill the player no matter what
                                    player.playerDeath = true;
                                    gameState = "paused";
                                    location.reload();
                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Your wish is granted.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    player.hunger = player.hungerMAX;
                                    player.thirst = player.thirstMAX;
                                    player.urgeless = true;
                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1j")
                        {
                            //text dialogue
                            setMsg("Your wish is granted.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                if (Math.random() > 0.5)
                                {
                                    player.vamprism = true;
                                    player.silvered = false;
                                    player.lycanthropy = false;
                                }
                                else
                                {
                                    player.lifeEternal = true;
                                }
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1k")
                        {
                            if (Math.round(Math.random()) && player.vamprism == false)
                            {
                                //text dialogue
                                setMsg("Your wish is granted.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    player.strength = 51;
                                    player.dexterity = 51;
                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (player.vamprism == false)
                            {
                                //text dialogue
                                setMsg("Your wish is granted.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    player.lycanthropy = true;
                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("I will give take away your vampire curse then give it back to you, so that I will have granted you superhuman strength...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();
                                    player.vamprism = false;
                                    player.vamprism = true;
                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1l")
                        {
                            if (Math.round(Math.random()))
                            {
                                //text dialogue
                                if (player.gender == "Female")
                                {
                                    setMsg("You are now the goddess of this void and all the nothingness within it.");
                                }
                                else
                                {
                                    setMsg("You are now the god of this void and all the nothingness within it.");
                                }

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    if (Math.random() > 0.5)
                                    {
                                        player.godmode = true;
                                    }
                                    else
                                    {
                                        map = "ghostWorld";
                                        region = "ghostWorld";
                                        change = "ghostWorld";
                                    }

                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                    conversations.jinn = ["Jinn", 0];
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                if (player.gender == "Female")
                                {
                                    setMsg("You are now the godess of this void and all the nothingness within it.");
                                }
                                else
                                {
                                    setMsg("You are now the god of this void and all the nothingness within it.");
                                }

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    dialogueReset(self);
                                    msgReset();

                                    player.godmode = true;
                                    player.lifeEternal = true;
                                    self.wishedOut = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                    conversations.jinn = ["Jinn", 0];
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1m")
                        {
                            //text dialogue
                            if (player.title != "Royalty")
                            {
                                setMsg("You have wealth and status, but you are not technically related to your parents anymore...");
                            }
                            else
                            {
                                setMsg("Your wish is granted.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                player.title = "Royalty";
                                player.kelFaction = 1000;
                                player.thengarFaction = 1000;
                                player.freynorFaction = 1000;
                                player.aldrekFaction = 1000;
                                player.orgellFaction = 1000;
                                player.vardanFaction = 1000;
                                player.cephriteFaction = 1000;
                                player.nirwadenFaction = 1000;
                                worldItems.push([new Item("coins", X, Y), 20000]);

                                player.theBalgurMercenariesFaction = 1000;
                                player.estolgangFaction = 1000;
                                player.sylkeemFaction = 1000;

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1n")
                        {
                            //text dialogue
                            setMsg("Your wish is granted.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                player.kelFaction = 1000;
                                player.thengarFaction = 1000;
                                player.freynorFaction = 1000;
                                player.aldrekFaction = 1000;
                                player.orgellFaction = 1000;
                                player.vardanFaction = 1000;
                                player.cephriteFaction = 1000;
                                player.nirwadenFaction = 1000;

                                player.theBalgurMercenariesFaction = 1000;
                                player.estolgangFaction = 1000;
                                player.sylkeemFaction = 1000;

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1o")
                        {
                            //text dialogue
                            setMsg("Thank you.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                self.trappedInPot = "freedom";
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1p")
                        {
                            //text dialogue
                            setMsg("Your wish is granted.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                player.magicalSkillPoints += 100;
                                player.extraMagicPoints += 100;
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1q")
                        {
                            //text dialogue
                            setMsg("Your wish is granted.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                player.skillPoints += 100;
                                player.extraSkillPoints += 100;
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1r")
                        {
                            //text dialogue
                            setMsg("You are now fused with the demigod known as Gooplur.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                player.endurance = 50;
                                player.constitution = 100;
                                player.knowledge = 50;
                                player.willpower = 100;
                                player.will = 100;
                                player.concentration = 50;
                                player.eminence = 50;
                                player.memory = 100;
                                player.health = 400;
                                player.race = "#336600";
                                player.strength = 50;
                                player.stamina = 100;
                                player.energy = 506;
                                player.toughness = 50;
                                player.intelligence = 50;
                                player.ranged = 50;
                                player.dexterity = 70;
                                player.raceName = "Goop";
                                player.title = "Supreme Overlord";
                                player.name = "Gooplur";
                                player.gender = "Goop";

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1s")
                        {
                            //text dialogue
                            setMsg("You are a pathetic, wretched little creature; how dare you do this to me!!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                self.dmx = null;
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                conversations.jinn = ["Jinn", 0];
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1t")
                        {
                            //text dialogue
                            setMsg("Your wish is granted.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                for (var i = 1; i < allSpells.length; i++)
                                {
                                    Inventory.push(allSpells[i]);
                                }
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1u")
                        {
                            //text dialogue
                            setMsg("Your wish is granted...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                Inventory.push([new Item("potatoInvisibility", false, false), 1]);

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1v")
                        {
                            //text dialogue
                            setMsg("...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                player.medusa = true;
                                self.trappedInPot = false;
                                self.health = -1000;
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1w")
                        {
                            //text dialogue
                            setMsg("As you wish.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                player.chosenOne = true;
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1x")
                        {
                            //text dialogue
                            setMsg("So be it...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();
                                player.gender = prompt("Enter whatever gender you wish to be. Use capitalization for the initial letter, unless that is, you don't identify with capital letters.");
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1y")
                        {
                            //text dialogue
                            setMsg("So be it...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();
                                for (var ploo = 1; ploo <= 20; ploo++)
                                {
                                    if (ploo <= 5)
                                    {
                                        ArtificialIntelligenceAccess.push(new Unit(X + 60, Y + 40 * ploo, "Soldier", false, "Soulless Minion", {race: player.raceName, faction: "player", con: (2 + Math.round(Math.random() * 3)), speed: 1.55, outfit: ["chainArmour", 6.5], weapon: ["mace", [4, 3], 8, 18, 1.5], ranged: [false, "arrow", 7, 2000, 1, 6, 0, "none", 1.25], patrolStops: 0, patrolLoop: false, route:[]}));
                                    }
                                    else if (ploo <= 10)
                                    {
                                        ArtificialIntelligenceAccess.push(new Unit(X + 120, Y + 40 * (ploo / 2), "Soldier", false, "Soulless Minion", {race: player.raceName, faction: "player", con: (2 + Math.round(Math.random() * 3)), speed: 1.55, outfit: ["chainArmour", 6.5], weapon: ["mace", [4, 3], 8, 18, 1.5], ranged: [false, "arrow", 7, 2000, 1, 6, 0, "none", 1.25], patrolStops: 0, patrolLoop: false, route:[]}));
                                    }
                                    else if (ploo <= 15)
                                    {
                                        ArtificialIntelligenceAccess.push(new Unit(X + 180, Y + 40 * (ploo / 3), "Soldier", false, "Soulless Minion", {race: player.raceName, faction: "player", con: (2 + Math.round(Math.random() * 3)), speed: 1.55, outfit: ["chainArmour", 6.5], weapon: ["mace", [4, 3], 8, 18, 1.5], ranged: [false, "arrow", 7, 2000, 1, 6, 0, "none", 1.25], patrolStops: 0, patrolLoop: false, route:[]}));
                                    }
                                    else if (ploo <= 20)
                                    {
                                        ArtificialIntelligenceAccess.push(new Unit(X + 240, Y + 40 * (ploo / 4), "Soldier", false, "Soulless Minion", {race: player.raceName, faction: "player", con: (2 + Math.round(Math.random() * 3)), speed: 1.55, outfit: ["chainArmour", 6.5], weapon: ["mace", [4, 3], 8, 18, 1.5], ranged: [false, "arrow", 7, 2000, 1, 6, 0, "none", 1.25], patrolStops: 0, patrolLoop: false, route:[]}));
                                    }
                                }
                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1z")
                        {
                            //text dialogue
                            setMsg("Your wish is my command.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                msgReset();

                                self.wishedOut = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Maggy the Tailor" || conversationID[0] == "Maggy")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Maggy";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["What is that you're working on?", false, "b"], ["What's new Maggy?", false, "c"], ["How's business?", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Oh good day to you too! It's just lovely don't you think?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Just cleanin' the furs. You got to clean 'em before you can make 'em into something.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Oh you know... A bit o' cleaning a bit o' stitchin', mostly cleanin' though.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Business is hard work youngin'. When I was a girl I had four sisters, and we'd all help my ma' with the sowing. Now it's just me. I'll tell you, this work is not as easy as it seems...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Borje" || conversationID[0] == "Borje")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Borje";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Greetings.", false, "a"], ["You must be the man to talk to around here.", false, "b"], ["I need supplies.", false, "c"], ["I need supplies, would you be willing to part with any?", false, "c"], ["Can you tell me anything about this hamlet?", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Welcome to Jalsirsted, Traveller.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("One might put it that way. My great great grandfather established this hamlet when he arrived after the great southern voyage. So yes, under the rule of Jarl Stambjord I am the holder of these lands.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (player.areGlovesEquipped != true)
                            {
                                setMsg("You are welcome to use my well, and you can warm your hands by my hearth, and you can cook whatever meat you have in the fire. If you seek sustanance I am afraid to say I can not help you. The Jarl takes a sizable cut of the produce I grow here at harvest, and the rest I sell in the market at Venning to buy food, clothing, and furs. Remember this though, the gods help those who forge their own path through the snow, may you persevere.");
                            }
                            else
                            {
                                setMsg("You are welcome to use my well, and you can warm yourself by my hearth, and you can cook whatever meat you have in the fire. If you seek sustanance I am afraid to say I can not help you. The Jarl takes a sizable cut of the produce I grow here at harvest, and the rest I sell in the market at Venning to buy food, clothing, and furs. Remember this though, the gods help those who forge their own path through the snow, may you persevere.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("My family has lived in Jalsirsted since the time of the great southern voyage over a century ago. My great great grandfather had claimed land much farther south, but the Echlin Kels forced him and his compatriots north. It was there that he founded Jalsirsted in his name. Ever since then my family has carried on his legacy, and we have learned that no wise Freydic man should set foot where his boot will not sink into frost, for the south is home to many men weaker in character, but the north is ours. There is hardly a soul that would elect to live in the north but for a freydic man!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Toraan" || conversationID[0] == "Toraan")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Toraan";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["Do you live out here?", false, "b"], ["How far away am I from the nearest township?", false, "c"], ["You look like you've seen a battle or two... what's your story?", false, "d"], ["Where am I?", false, "e"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Yes. My father Borje owns the large house and the farm plot in the north part of Jalsirsted.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Venning City is just north of here... but tread carefully, for there are winter wolves, and there is a balkur that oft wanders through these parts.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("No, I've seen no battles, I spent my youth sailing around the north. There are beasts up there with which no human battle can compare... I just hope I don't become a soft man now that I am back home in this southern weather.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (region == "n3e2")
                            {
                                setMsg("You are in Jalsirsted. I would welcome you, but that is my father's perogative, he lives in the large house.");
                            }
                            else if (region == "n2e2")
                            {
                                setMsg("You are just south of Jalsirsted, and if you venture farther north you will find the port city of Venning.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "High Magus Aleksi" || conversationID[0] == "Aleksi")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Aleksi";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.raceName == "Cephrite" && player.title == "Nobility" || player.raceName == "Cephrite" && player.title == "Royalty")
                                {
                                    player.dialogueOptions = [["What are you doing here Aleksi!? Your family thinks that you are dead, they have replaced your seat on the council!", false, "a"], ["Step aside High Magus Aleksi, I wish to open the portal.", false, "b"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["Who are you and what are you doing here?", false, "c"], ["What an unseemly manner to wait here in the dark alone...", false, "d"], ["Step aside mage!", false, "e"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                setMsg("My sweet lady... I know not what brings you here inquiring after me... but you must leave this place at once! These ancient and dirty ruins are no place for a noble lady such as yourself!");
                            }
                            else
                            {
                                setMsg("I am touched that you have missed me, " + player.name + ", but I care not about the monotonous politics of Cephrite. I am on a quest for power. Dare you not get in my way, or you will face dire consequences...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                setMsg("How dare you try to command me, woman! You forget yourself! Leave now, before I react to your insolence in a manner I would regret!");
                            }
                            else
                            {
                                setMsg("You dare challenge me!? You will regret this...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.gender != "Female")
                                {
                                    self.disturbed = true;
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I am High Magus Aleksi of the Cephrian Council and I am here on business of my own that ought not concern you. Now leave me!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("What an unseemly manner to approach a man in the dark while naming his manner unseemly...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("You are my inferior, and as such I will make you pay for trying to give me orders! You will die painfully you insolent cretin!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                self.disturbed = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Vsevolod" || conversationID[0] == "Vsevolod")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Vsevolod";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.theSecretOfTheSagesCacheQuest == true)
                                {
                                    player.dialogueOptions.push(["What now?", false, "e"]);
                                    if (uniqueChars.aleksiLDS == true)
                                    {
                                        player.dialogueOptions.push(["There is somebody else in the room with the portal... They look to be a mage.", false, "f"]);
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions.push(["Good day.", false, "c"], ["How long will you be staying in Lethik?", false, "d"]);
                                }

                                if (quests.thePlightOfLethikQuest == true)
                                {
                                    if (quests.thePlightOfLethikVardan == true)
                                    {
                                        player.dialogueOptions.push(["You are accused of using dark magics to corrupt Axel's field! How do you plead!?", false, "a"], ["What are you doing in lethik!?", false, "b"])
                                    }
                                }

                                if (quests.theSecretOfTheSagesCacheGarldSaved == true)
                                {
                                    player.dialogueOptions.unshift(["About your offer...", false, "g"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.raceName != "Vardan" && player.raceName != "Thengar")
                            {
                                setMsg("I cursed the field so that these inbreds could have just the slightest taste of what my people in Vardania have been suffering through, but these ignorant idiots don't seem to get the message...");
                            }
                            if (player.raceName != "Vardan")
                            {
                                setMsg("I cursed the field so that you inbreds could have just the slightest taste of what my people in Vardania have been suffering through without any support from your kingdom, but you ignorant idiots don't seem to get the message...");
                            }
                            else
                            {
                                setMsg("I cursed the field so that these inbreds could have just the slightest taste of what our people in Vardania have been suffering through, but these ignorant idiots don't seem to get the message...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.thePlightOfLethikVardan = "accused";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("I am resting, I need a place to settle down and think before continuing with my travels.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Yes, yes, I am busy, I have no time for such frivolous formalities as greetings. Now, if you are any good at riddles you may be useful to me yet.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("I will be staying here until I figure out the next steps to obtain my goal. I am presently trying to solve a rather difficult riddle, if you are any good at riddles I would much appreciate your help.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("You have to solve the sage's puzzle so that we can access his cache of magics and treasures. In my investigations of this place I have found that there are three buttons throughout the dungeon, a magical combination lock, and in the next room there should be the portal. You will need to use the memory orb to unlock it after the other puzzles have been solved.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("I knew it! It was only a matter of time until others sought the magical treasures of this place... We may have to get our hands dirty if we want to claim the treasure for ourselves.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("Have you reconsidered my proposed partnership then? Will you solve the riddle stored within the sage's memories?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["You will be brought to trial for using magics for evil means!", false, "a"], ["You are much too forthcoming with your admission of guilt... what drives the truth from you so.", false, "c"], ["Cursing peoples fields will not bring anybody to see things your way, it will only drive them to hatred of you...", false, "d"], ["Good on you!", false, "e"]];
                                if (player.raceName == "Thengar")
                                {
                                    player.dialogueOptions.unshift(["Vardania's war is petty, it is your people who are idiots. Here in Thengaria we bring criminals like you to justice. Come with me to face your judgement or die!", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("You will not be bringing me anywhere.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                self.disturbed = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Those are bold words for a dead man...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                self.disturbed = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("Its simple really, I highly doubt anybody in Lethik can do anything about it, so I do not really care who knows.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1d")
                        {
                            //text dialogue
                            setMsg("Yes, yes, that is true, it was more for me than anything else... I can not stand the sight of people living with a bounty of resouces whilst my people suffer through famine, disease, and starvation. Humans are inherently greedy, I do not expect this to change. I am retribution. It is up to me to make people suffer for their ways, for nobody else will lift a hand against this evil human nature.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1e")
                        {
                            //text dialogue
                            setMsg("I'm glad to see that at least someone appreciates a good dose of karma.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["A riddle? Do go on...", false, "a"], ["What do I get out of helping you solve this riddle?", false, "b"], ["You're talking to the wrong person... I hate riddles!", false, "c"], ["Why do you want to solve this riddle in the first place?", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("I am seeking a cache of magical treasures that are hidden in an ancient fort sunken deep in the craglands. The problem is that the sage who hid these treasures greedily locked them behind complex magical puzzles. The answer to the riddle that he has hidden in his memories somewhere should help me learn how to access the hidden magics. If you take a look into this sage's memories and help me solve the riddle that holds the key to the magical puzzle I will let you have some of the magical treasures hidden in the cache.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            setMsg("If you help me solve this riddle I will share with you a portion of the magical treasures that I am after. There is a fort lost to time, drowned in the rocky land of the crags. There within is a magical puzzle that a greedy sage who hoarded magics but did not use them used to lock them away so that nobody could ever benefit from the magics. If you take a look into this sage's memories and help me solve the riddle that holds the key to the magical puzzle those treasures can be ours to share with the world!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            //text dialogue
                            setMsg("[laughs gruffly] Then I have no use for you at all!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2d")
                        {
                            //text dialogue
                            setMsg("I am seeking a cache of magical treasures that were locked away by a dastardly sage who greedily wished to keep the magics away from the world. He built an elaborate magical puzzle to keep them locked away that lies in the depths of an ancient fort in the crags. The only way to solve this puzzle is to solve a riddle that lies in the memory of the sage. If you take a look into the memories and help me solve the riddle that is the key to the puzzle then I will share a portion of the magical treasures I find with you.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I will help you with your riddle.", false, "a"], ["Then we will be partners! I will help you with your riddle and we we share the hidden treasures.", false, "a"], ["No thank you.", false, "b"], ["No.", false, "b"], ["I'm afraid I must decline your offer.", false, "b"], ["Now that you have told me all of this, what is to keep me doing this all myself?", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            setMsg("Excellent, I will meet you in the ancient fort in the crags... It is directly to the east of here. When you have solved the riddle come to me and we will solve the magical puzzle.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                give("garldsMemories", 1);
                                quests.theSecretOfTheSagesCacheQuest = true;
                                quests.activeQuests.push({name: "The Secret of the Sage's Cache", description: "A sage has locked away magics in an ancient fort in the crags. Look into the sage's memories and solve the riddle to unlock the magical puzzle guarding the treasures."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                dialogueReset(self);
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Vsevolod")
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            //text dialogue
                            setMsg("If you change your mind I will be here.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.theSecretOfTheSagesCacheGarldSaved = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3c")
                        {
                            //text dialogue
                            setMsg("Because you have not the memories of the sage! You will have to slay me to get them, and I am no easy foe!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                self.disturbed = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Mesek the Runaway" || conversationID[0] == "Mesek")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Mesek";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (region == "central")
                                {
                                    player.dialogueOptions = [["How's life in Teshir?", false, "a"]];
                                }
                                else
                                {
                                    if (player.raceName == "Thengar")
                                    {
                                        if (quests.spouseTrackerCompletionStyle != "escort" && quests.spouseTrackerCompletionStyle != "bienEscort")
                                        {
                                            player.dialogueOptions = [["Kels are meant to have a master, they say that a Kel without a master is a feral beast. I kill wild beasts...", false, "b"], ["You're disgusting! Just looking at you makes me sick!", false, "c"], ["What are you doing out here?", false, "d"]];
                                        }
                                        else
                                        {
                                            player.dialogueOptions = [["What inspired you to cross the crags?", false, "d"]];
                                        }
                                    }
                                    else
                                    {
                                        if (quests.spouseTrackerCompletionStyle != "escort" && quests.spouseTrackerCompletionStyle != "bienEscort")
                                        {
                                            player.dialogueOptions = [["What are you doing out here?", false, "d"]];
                                        }
                                        else
                                        {
                                            player.dialogueOptions = [["What inspired you to cross the crags?", false, "d"]];
                                        }
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (uniqueChars.bellaLDS == true)
                            {
                                setMsg("I am thankful to you that you have helped us across the crags to get here, but I am still far away from the land of my birth. I cannot return home, not ever. The tribe that I was born to was burnt to the ground by the Thengans... my people are all enslaved. I will never be truly happy while my people live in chains.");
                            }
                            else
                            {
                                setMsg("I feel sadness for many reasons friend... being in Teshir is good because it is good to be free. But my freedom is won while so many others suffer in chains. I am sad that Madam Bella died... but she is with the wind now. She will be happy where she is. ");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                            self.disturbed = true;
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("If looking at me is so painful for you maybe there is something wrong with your eyes...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (quests.spouseTrackerCompletionStyle != "escort" && quests.spouseTrackerCompletionStyle != "bienEscort")
                            {
                                setMsg("I am accompanying Madam Bella on a trip across the crags.");
                            }
                            else
                            {
                                setMsg("A life in captivity is no life. It is better to die free in the jaws of a beruln than to live as a slave.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Madam Bella" || conversationID[0] == "Bella")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Bella";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.spouseTrackerQuest == false)
                                {
                                    player.dialogueOptions = [["What madness has overcome you that you attempt to cross the crags?", false, "a"], ["Just camping in the craglands for fun? As you do...", false, "c"]];
                                }
                                else
                                {
                                    if (uniqueChars.spouseTrackerCompletionStyle == false)
                                    {
                                        uniqueChars.spouseTrackerCompletionStyle = "local";
                                    }
                                    player.dialogueOptions = [["I'm here to return you to your husband, come in peace or face the consequences.", false, "b"], ["I know you fled your husband with your lover, I want to help you both escape. How can I help?", false, "d"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("No wild beast here in the crags could compare with the ferocity of my husband. If he finds me I will surely hang for the love I hold for my dear Mesek.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (uniqueChars.mesekLDS == true)
                            {
                                setMsg("I should have known my husband would hire thugs to find us! Mesek, run!! Don't look back, just run!!!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                    self.disturbed = true;
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                setMsg("I have nothing left to live for, I will return with you to face my husband, if only to be reunited with my dear Mesek in death.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();

                                    if (uniqueChars.bellaLDS == true)
                                    {
                                        uniqueChars.spouseTrackerCompletionStyle = "spouseCollected";
                                    }
                                    alert("Upon returning to Lethik the guards arrest Madam Bella and take her to be executed for adultery with a slave and for conspiring to free a slave.");
                                    uniqueChars.bellaLDS = false;
                                    player.blinded = true;
                                    player.blindedStoreTime = new Date().getTime();
                                    player.blindedTime = 1;
                                    X = 50643;
                                    Y = -10255;
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I would not for a moment call being forced to survive in this inhospitable wasteland fun! I would not be in these brutal conditions if they were not imposed upon me by my terrible husband!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("You want to help? I am am glad to hear it, as help is sorely needed. If there is any way you could escort us to Teshir to the east, I would be ever grateful to you.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'm sorry to hear that.", false, "a"], ["Is there any way I can help you?", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            if (uniqueChars.mesekLDS == true)
                            {
                                setMsg("We will do our best to survive these terrible crags on our way to Teshir, but the odds are not in our favour...");
                            }
                            else
                            {
                                setMsg("I will do my best to survive these terrible crags on my way to Teshir, but the odds are not in my favour...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();

                                uniqueChars.mesekLDS = false;
                                uniqueChars.bellaLDS = false;

                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Madam Bella")
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Mesek the Runaway")
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("If you could escort us eastward to Teshir, we would be ever grateful... our odds of surviving without an escort are extremely low.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["How is everything?", false, "a"], ["Do you need help with anything else?", false, "c"]];

                                if (region == "central")
                                {

                                }
                                player.dialogueOptions.push(["Have you settled well in here in Teshir?", false, "b"]);
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            if (uniqueChars.mesekLDS == true && quests.spouseTrackerCompletionStyle == "bienEscort")
                            {
                                setMsg("We are doing great! Thanks to you!");
                            }
                            else if (quests.spouseTrackerCompletionStyle == "malEscort" || uniqueChars.mesekLDS == false)
                            {
                                setMsg("Why do I carry on living? My life is pointless without my dear Mesek.");
                            }
                            else
                            {
                                setMsg("Well being on the run isn't exactly jolly...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();

                                uniqueChars.mesekLDS = false;
                                uniqueChars.bellaLDS = false;
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            if (uniqueChars.mesekLDS == true && quests.spouseTrackerCompletionStyle == "bienEscort")
                            {
                                if (uniqueChars.medliaLDS)
                                {
                                    setMsg("I like it here, it sort of reminds me of home. There is much more hunting here though, and much less fighting. It seems the Freydic have never heard of buying food in the market, they are always venturing out to slay this or that or to gather berries or collect honey or what not... I'm sure I'll get used to it eventually. At least the townsfolk are friendly. Medlia was just darling, she asked me how my day was and even helped me carry the firewood back home. What a sweet woman... Mesek isn't settled in at all though, he is always scared that mercenaries will march from the west to take us back to Thengaria.");
                                }
                                else
                                {
                                    setMsg("I like it here, it sort of reminds me of home. There is much more hunting here though, and much less fighting. It seems the Freydic have never heard of buying food in the market, they are always venturing out to slay this or that or to gather berries or collect honey or what not... I'm sure I'll get used to it eventually. I don't think that Mesek would feel comfortable anywhere, he is always scared that mercenaries will march from the west to take us back to Thengaria.");
                                }
                            }
                            else if (quests.spouseTrackerCompletionStyle == "malEscort" && uniqueChars.mesekLDS == false)
                            {
                                setMsg("How can I settle in to a foreign land when my love is dead!? The freydic do nothing but hunt, dance, pick berries and drink... Life was so much easier before too, I have little way to support myself out here. If it weren't for you, I would be living a happy life, and Mesek would be alive!");
                            }
                            else
                            {
                                setMsg("Well being on the run isn't exactly jolly...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            //text dialogue
                            if (uniqueChars.mesekLDS == true && quests.spouseTrackerCompletionStyle == "bienEscort")
                            {
                                setMsg("You are so kind to ask! I do not need help with anything at the moment.");
                            }
                            else if (quests.spouseTrackerCompletionStyle == "malEscort" && uniqueChars.mesekLDS == false)
                            {
                                setMsg("If I did need help, you would be the last person I'd ask!");
                            }
                            else
                            {
                                setMsg("Yes...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I would be pleased to escort you to Teshir.", false, "a"], ["Sorry, but I am not up to the task.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            setMsg("Thank you! Remember, Teshir is directly to the east.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                if (quests.spouseTrackerQuest == false)
                                {
                                    quests.spouseTrackerQuest = true;
                                    quests.activeQuests.push({name: "Spouse Tracker", description: "You offered to escort Madam Bella and her lover across the crags."});
                                    quests.spouseTrackerCompletionStyle = "escort";
                                }
                                self.SC();
                                change = "bellaEscort";
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Madam Bella")
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Mesek the Runaway")
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            //text dialogue
                            if (uniqueChars.mesekLDS == true)
                            {
                                setMsg("We will do our best to survive these terrible crags on our way to Teshir without an escort... but we will likely die.");
                            }
                            else
                            {
                                setMsg("I will do my best to survive these terrible crags on my way to Teshir without an escort... but I will likely be eaten by a ravenous beast.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();

                                uniqueChars.mesekLDS = false;
                                uniqueChars.bellaLDS = false;
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (region == "central")
                                {
                                    player.dialogueOptions = [["We are through the crags, the road to Teshir is before you.", false, "a"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["Wait here for a moment.", false, "b"], ["Lets move!", false, "c"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            //text dialogue
                            if (uniqueChars.mesekLDS == true)
                            {
                                setMsg("You have saved us! I can't thank you enough! Here take this family jewl, it belonged to my mother... it is the least I can do to repay you.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();

                                    var hits = 0;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "sapphire")
                                        {
                                            Inventory[i][1] += 1;
                                            hits = 1;
                                            break;
                                        }
                                    }
                                    if (!hits)
                                    {
                                        Inventory.push([new Item("sapphire", false, false), 1]);
                                    }

                                    quests.spouseTrackerCompletionStyle = "bienEscort";
                                    quests.spouseTrackerQuest = "complete";
                                    quests.completeQuests.push({name: "Spouse Tracker", description: "You helped Madam Bella and her lover escape Thengaria."});
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 20;
                                    }
                                    else
                                    {
                                        player.experience += 65;
                                    }
                                    player.fame += 1;

                                    change = "mesekFreedom";

                                    player.blinded = true;
                                    player.blindedStoreTime = new Date().getTime();
                                    player.blindedTime = 1;
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Madam Bella")
                                        {
                                            ArtificialIntelligenceAccess.splice(i, 1);
                                            break;
                                        }
                                    }
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Mesek the Runaway")
                                        {
                                            ArtificialIntelligenceAccess.splice(i, 1);
                                            break;
                                        }
                                    }
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                setMsg("It doesn't matter anymore... my dear Mesek is dead. Our escape was all for nothing!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();

                                    quests.spouseTrackerCompletionStyle = "malEscort";
                                    quests.spouseTrackerQuest = "complete";
                                    quests.completeQuests.push({name: "Spouse Tracker", description: "You helped Madam Bella escape Thengaria, but her lover didn't make it."});
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 15;
                                    }
                                    else
                                    {
                                        player.experience += 50;
                                    }

                                    change = "bellaFreedom";

                                    player.blinded = true;
                                    player.blindedStoreTime = new Date().getTime();
                                    player.blindedTime = 1;
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Madam Bella")
                                        {
                                            ArtificialIntelligenceAccess.splice(i, 1);
                                            break;
                                        }
                                    }
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Mesek the Runaway")
                                        {
                                            ArtificialIntelligenceAccess.splice(i, 1);
                                            break;
                                        }
                                    }
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "4b")
                        {
                            //text dialogue
                            setMsg("Alright, I will wait.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                                self.speed = 0;
                                if (uniqueChars.mesekLDS == true)
                                {
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Mesek the Runaway")
                                        {
                                            ArtificialIntelligenceAccess[i].speed = 0;
                                            break;
                                        }
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4c")
                        {
                            //text dialogue
                            setMsg("Alright then...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                                self.speed = 1;
                                if (uniqueChars.mesekLDS == true)
                                {
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Mesek the Runaway")
                                        {
                                            ArtificialIntelligenceAccess[i].speed = 1;
                                            break;
                                        }
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Hanz" || conversationID[0] == "Hanz")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Hanz";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.raceName == "Kel")
                                {
                                    player.dialogueOptions = [["Good day.", false, "c"], ["What brings you to the tavern?", false, "b"]];
                                }
                                else if (player.raceName != "Thengar" || player.title != "Nobility")
                                {
                                    player.dialogueOptions = [["Good day.", false, "a"], ["What brings you to the tavern?", false, "b"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["Good day, cousin Hanz.", false, "d"]];

                                    player.dialogueOptions.unshift(["I have heard of your shame your wife brought to your household, cousin...", false, "e"])
                                }
                                if (quests.debtCollectorQuest == true && quests.debtCollectorHanz == false)
                                {
                                    player.dialogueOptions.unshift(["You owe Ederhal 39 coins, I'm here to collect them for him.", false, "f"]);
                                }
                                if (quests.spouseTrackerQuest == true)
                                {
                                    if (quests.spouseTrackerCompletionStyle == "escort")
                                    {
                                        player.dialogueOptions.push(["Your wife was trying to cross the crags into Teshir...", false, "g"]);
                                    }
                                    else if (quests.spouseTrackerCompletionStyle == "local")
                                    {
                                        player.dialogueOptions.push(["Your wife and slave are camped out in the crags to the northeast of here.", false, "g"]);
                                    }
                                    else if (quests.spouseTrackerCompletionStyle == "spouseCollected")
                                    {
                                        if (uniqueChars.mesekLDS == true)
                                        {
                                            player.dialogueOptions.push(["I brought your wife back, but the local authorities had her executed... Your slave got away, but he probably will not survive long in the crags.", false, "g"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.push(["I brought your wife back, but the local authorities had her executed... Your slave is dead too.", false, "g"]);
                                        }
                                    }
                                    else
                                    {
                                        player.dialogueOptions.push(["About your wife...", false, "g"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (quests.debtCollectorStoryTold == false)
                            {
                                //text dialogue
                                setMsg("Good day! Hey, I'll tell you a tale for a beer, does that sound like a deal?");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Good day! Do you want to hear my cautionary tale again for another beer?");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (player.raceName == "Kel")
                            {
                                //text dialogue
                                setMsg("To get away from my troubles... leave me, Kel. I do not wish to be seen talking to you. I am the lord's nephew after all, you have no right to approach me.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Just drowning down my sorrows, friend. What brings you to the tavern?");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Go back to your master, Kel! It is not in good taste for a Kel to wander around the city alone except to do menial errands.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Ah, good day cousin! Well, it is now that you are here.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("I suspected as much... and so I am overjoyed that you are finally here!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("I would be happy to pay what I owe... Here you are.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.debtCollectorHanz = true;
                                worldItems.push([new Item("coins", X, Y), 39]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            if (quests.spouseTrackerCompletionStyle == "local")
                            {
                                //text dialogue
                                setMsg("She probably will not survive long, the crags often prove to be deadly to those who try to traverse them... thank you for telling me her location. I owe you 80 coins");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.spouseTrackerQuest = "complete";
                                    quests.completeQuests.push({name: "Spouse Tracker", description: "You informed Master Hanz that his wife and slave were camping out in the crags."});
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 8;
                                    }
                                    else
                                    {
                                        player.experience += 40;
                                    }

                                    var hits = 0;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins")
                                        {
                                            Inventory[i][1] += 80;
                                            hits = 1;
                                            break;
                                        }
                                    }
                                    if (!hits)
                                    {
                                        Inventory.unshift([new Item("coins", false, false), 80]);
                                    }

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (quests.spouseTrackerCompletionStyle == "escort")
                            {
                                //text dialogue
                                setMsg("She probably will not survive long, the crags often prove to be deadly to those who try to traverse them... thank you for telling me her location. I owe you 80 coins");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.spouseTrackerQuest = "complete";
                                    quests.completeQuests.push({name: "Spouse Tracker", description: "You informed Master Hanz that his wife was trying to cross the crags."});
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 8;
                                    }
                                    else
                                    {
                                        player.experience += 40;
                                    }

                                    var hits = 0;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins")
                                        {
                                            Inventory[i][1] += 80;
                                            hits = 1;
                                            break;
                                        }
                                    }
                                    if (!hits)
                                    {
                                        Inventory.unshift([new Item("coins", false, false), 80]);
                                    }


                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (quests.spouseTrackerCompletionStyle == "spouseCollected")
                            {
                                //text dialogue
                                setMsg("Do not trouble yourself with my wife's execution. I attended it... She deserved the punishment she got for the filthy harlot of a woman she was. Now that my wife is dead I am free from her dishonour. My worthiness of the Beulingerr name is no longer in question. -- Ah right, your pay... Here you are. It's been a pleasure doing business with you.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.spouseTrackerQuest = "complete";
                                    quests.completeQuests.push({name: "Spouse Tracker", description: "You arrested Madam Bella and brought her back to Lethik to be executed."});
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 10;
                                    }
                                    else
                                    {
                                        player.experience += 45;
                                    }
                                    player.fame += 1;

                                    var hasScalp = false;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "mesekScalp")
                                        {
                                            Inventory.splice(i, 1);
                                            hasScalp = true;
                                            break;
                                        }
                                    }

                                    if (hasScalp == true)
                                    {
                                        var hits = 0;
                                        for (var i = 0; i < Inventory.length; i++)
                                        {
                                            if (Inventory[i][0].type == "coins")
                                            {
                                                Inventory[i][1] += 100;
                                                hits = 1;
                                                break;
                                            }
                                        }
                                        if (!hits)
                                        {
                                            Inventory.unshift([new Item("coins", false, false), 100]);
                                        }
                                    }
                                    else
                                    {
                                        var hits = 0;
                                        for (var i = 0; i < Inventory.length; i++)
                                        {
                                            if (Inventory[i][0].type == "coins")
                                            {
                                                Inventory[i][1] += 80;
                                                hits = 1;
                                                break;
                                            }
                                        }
                                        if (!hits)
                                        {
                                            Inventory.unshift([new Item("coins", false, false), 80]);
                                        }
                                    }

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("She couldn't have gotten far, she most likely is trying to flee Thengaria, that means going through either the barren icy northlands, going southeast to the fronteir, or east to the crags. It wouldn't suprise me if you find them both dead.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["No thanks.", false, "b"]];

                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "harstAle")
                                    {
                                        player.dialogueOptions.push(["Sure! [give harst ale]", false, "a"]);
                                        break;
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("[takes a long swig of the beer you offered then clears his throat]");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var alehasA = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "harstAle")
                                    {
                                        alehasA = i;
                                    }
                                }
                                if (alehasA > -1)
                                {
                                    Inventory[alehasA][1] -= 1;

                                    if (Inventory[alehasA][1] <= 0)
                                    {
                                        Inventory.splice(alehasA, 1);
                                    }
                                }


                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                                quests.debtCollectorStoryTold = true;
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Allright then... maybe later.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["...", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("Once upon a time in a village much like this one, lived two children. They were very active children, a brother, and a sister. One day the children were playing along the edge of the woods when they heard a weird sound. They were both intreagued by the sound and wanted to investigate it, but the young boy... let's call him Fredriche, remember that his mother told him never to enter the woods. No matter what! < We have to see what that sound was! > said the girl, lets call her, ummm, Gilbana. The boy warned her of the dangers that his mom described. He said there were terrifying creatures like skols and spiders, and beasts that might tear little children limb from limb. The girl was not worried by this and so as to prove that he was no coward the boy offered to accompany the girl into the woods despite the dangers that awaited them. The deeper into the woods the children went, the louder the sound became as if it was beckoning them nearer. Soon enough they came across a pile of sticks. The children took the sticks to use as swords and they continued bravely. Next the children found a large spiderweb that spread across the woodland floor. They found the web in the most peculiar of ways, Gilbana had stepped right into it and fallen over. The more she struggled in the web, the more stuck she became. It wasn't long before giant etna spiders came crawling close with acidic foam dripping from each of their fanged mouths. They scurried forth to drain Gilbana dry of her blood, but as they drew near her brother defender her fiercely brandishing the sticks they had collected earlier. Soon enough he had poked out all of the spiders beady eyes. with the sticks. He helped his sister out of the web and they continued deeper into the woods. Next they came across a pile of rocks. They took the rocks just in case they might come in handy later on. After following the strange sound even deeper into the dark woods that were now only illuminated by the light of the moon, they came across a snarling pack of skols. One large Skol grabbed Fredriche  by his boot and began to drag him away to eat as a snack. Gilbana threw one of the heavy rocks the children had found earlier and it hit the Skol right between the eyes. It fell over dead releasing the boys leg from its jaws. She threw the rest of the rocks at the rest of the pack and they ran away. Finally the children came across a glowing white light in the woods. The light it seemed was the source of the sound, It had long black eyes and a twisted black smile. It reached out as if to embrace the children but within a moment had grabbed them each in one of its giant hands and toar them limb from limb eating their flesh as it spilled. The End! The moral of the story is to never go into the woods... that is I mean, if you want to live.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["The usual, beer, food, merriment...", false, "a"], ["I'm looking for work.", false, "c"], ["I'm drinking away my troubles as well... what sort of sorrows are you drowning?", false, "d"], ["I'm renting a room here.", false, "e"]];
                                if (player.gamemode == "protagonist")
                                {
                                    player.dialogueOptions.push(["Oh I'm just brooding, I brood on Thursdays mostly. Its the edgey thing to do.", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            setMsg("Ederhal has delicious food here, if you can afford it I recommend the bread with vel spread on it. Vel tastes amazing. Enjoy yourself then!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            //text dialogue
                            setMsg("[he nods seeming to not understand a thing you just said] Alright then, I'll leave you to that.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3c")
                        {
                            //text dialogue
                            setMsg("Well that is a stroke of convenience because I just happen to have a job for you if you are interested. I need a tracker to find my wife and the slave she ran off with.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3d")
                        {
                            //text dialogue
                            setMsg("My wife ran away with one of my slaves and everybody knows about it. They say, what sort of a man is Hanz who can't even control his own wife... I have lost my credebility and honour in the eyes of my peers and so I spend my time here drinking to forget my shame. There's not enough beer in the world to forget it long enough to feel content.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 7;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3e")
                        {
                            //text dialogue
                            setMsg("If you are staying for a while you should watch a pit fight or two, Lethik is famous for our champion pit fighters.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Why is that?", false, "a"], ["Funny, I suspected my coming here to disown you would make your day worse...", false, "b"], ["I'm glad, I hope to help you however I can with this most unfortunate occurence.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            //text dialogue
                            setMsg("Because you can restore my honour by nullifying my marriage and having my wife and her Kellish lover killed. Please cousin, do this for me.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4b")
                        {
                            //text dialogue
                            setMsg("You came here to disown me!?!?!?! Does blood matter so little to house Beulingerr!? I am leaving!!! I would rather live a life of exile than bear the shame that you unjustly lay upon me!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                uniqueChars.hanzLDS = false;
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                change = "hanzExile";

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4c")
                        {
                            if (player.gender == "Female")
                            {
                                //text dialogue
                                setMsg("Sweet cousin, I am glad that you are so eager to help me... would you request an anullment of my marriage to my wife and have her and her kellish lover hanged? That is the only way to restore my honour at this point.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 5;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("It warms my heart that you are so zealous in your desire to help out a family member in need... would you request an anullment of my marriage to my wife and have her and her kellish lover hanged? That is the only way to restore my honour at this point.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 5;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I will. [write a letter requesting an anullment for your cousin's past marriage and requesting a death warrant to be placed on his wife and her lover]", false, "a"], ["I will grant you the anullment but I will not order the execution of your wife. [write a letter requesting the marriage anullment]", false, "b"]];
                                if (player.gender == "Female")
                                {
                                    player.dialogueOptions.push(["I will nullify your marriage on the condition that you marry me, cousin Hanz. I will see to it that your wife and her lover will be executed as well. [write a letter to the necessary authorities]", false, "c"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            //text dialogue
                            setMsg("You have saved me pulled me up from dishonor, cousin! I can not thank you enough! I will return to my estate now that I am free from the culpability of that wretched woman who called herself my wife... I hope you stop by to see me some time.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                lethikHanzRestored = true;
                                playersTurnToSpeak = true;
                                uniqueChars.bellaLDS = false;
                                uniqueChars.mesekLDS = false;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            //text dialogue
                            setMsg("I thank you, cousin, so very much, though I fail to see the justice in letting my wife run amuck dishonoring herself and me by whoring herself to that despicable Kellish slave she ran away with. I will return to my estate now, perhaps you will stop by and visit sometime. You are always welcome.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                lethikHanzRestored = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5c")
                        {
                            //text dialogue
                            setMsg("I would be delighted to marry you! I have known you since we were both children, even then I was infatuated by your beauty. It was a mistake for me to marry my wife, I see that now! Let us marry in Cranheim, then we will return to live in my estate to the south of here!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                uniqueChars.bellaLDS = false;
                                uniqueChars.mesekLDS = false;
                                lethikHanzRestored = true;
                                lethikHanzMarried = true;
                                alert("Your family and crowds of local notables gather around as you approach the High Sage. Hanz is waiting for you in all his finery and lends you his outstretched hand to step up to the alter. You take his hand and stand facing him. Do you take this Man, Hanz of house Beulingerr to be your husband? You reply affirmatively. And do you take her Ladyship " + player.name + "to be your wife? Hanz replies affirmatively. The under the eyes of the gods, watchful and judging do we hereby proclaim the union of this noble couple. May prosperity seed your fields and may your union seed life! By the will of the gods you shall bed each other and be joined!")
                                alert("You and Hanz have been married, and the seed of your union has been planted!");
                                quests.hanzChildName = prompt("After nine months pass by, you deliver your daughter. What do you name her?", "Gelna");
                                quests.hanzChild = true;
                                change = "hanzMarried";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 6)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["How much will you pay for the job?", false, "c"], ["I'll track them down for you, just tell me where to start.", false, "a"], ["Thanks for the offer but I'm not much of a tracker.", false, "b"], ["No thanks.", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "6a")
                        {
                            //text dialogue
                            setMsg("My best guess is that they went south west towards kellish territory, otherwise maybe they went north to Hawik or west to Teshir. Any of those options are suicidal: because south west is the front lines of our nation's war with the Kellish tribes, if they went north they would freeze to death, and if they went west they would likely never get across the crag lands alive without a large armed escort protecting them. I'm sorry I can't be more helpful.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.spouseTrackerQuest = true;
                                quests.activeQuests.push({name: "Spouse Tracker", description: "Hanz has hired you to track down his wife and slave and either bring them back or inform him of their location."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6b")
                        {
                            //text dialogue
                            setMsg("I understand, everyone has their own skillset.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6c")
                        {
                            //text dialogue
                            setMsg("If you find them and tell me their location I will pay you 80 coins, if you bring them back I will pay 100. Don't hurt my wife if it can be avoided, but the only part of the slave you would need to bring back is the scalp.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6d")
                        {
                            //text dialogue
                            setMsg("Oh, I'm sorry for bothering you then...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 7)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Thats tough...", false, "a"], ["Is there any way I can help?", false, "b"], ["I'm down on my luck too. Let us toast to our woes!", false, "c"], ["I can track them down for you if you are willing to pay.", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "7a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "7b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "7c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "7d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "7a")
                        {
                            //text dialogue
                            setMsg("Yeah... Its been good to spend time with the locals though, there are many good people who I never would have met before because I used to spent all my time in my estate. This bitter experience has its positive side.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "7b")
                        {
                            //text dialogue
                            setMsg("Actually yes, if you think you would be able to track down my wife and my slave I would pay.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "7c")
                        {
                            //text dialogue
                            setMsg("Here's to drowning sorrows with beer!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "7d")
                        {
                            //text dialogue
                            setMsg("Excellent! I had need for a tracker for just that purpose. I will pay you 80 coins for finding them and another 20 if you bring them back. Don't harm my wife if you can avoid it, but all I need back from the slave is his head.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.spouseTrackerQuest = true;
                                quests.activeQuests.push({name: "Spouse Tracker", description: "Hanz has hired you to track down his wife and slave and either bring them back or inform him of their location."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Conrad" || conversationID[0] == "Conrad")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Conrad";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["Why weren't you drafted?", false, "b"], ["What do you think about Kellish slaves?", false, "c"]];
                                if (player.raceName != "Thengar")
                                {
                                    player.dialogueOptions.unshift(["I'm not from around here, do you have any idea whom I should talk to if I'm looking for a job?", false, "d"]);
                                }
                                if (quests.debtCollectorQuest == true && quests.debtCollectorConrad == false)
                                {
                                    player.dialogueOptions.unshift(["You owe Ederhal 45 coins, pay up.", false, "e"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (quests.thePlightOfLethikQuest == "complete" && uniqueChars.vsevolodLDS == false)
                            {
                                //text dialogue
                                setMsg("Hey, axel told me that you saved his farm... I got my job back thanks to you!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                setMsg("Yeah, its a good, but a bit dull I admit since I've been out of work.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Most families in Lethik were asked to provide one able bodied man to fight, I walk with a limp, so I didn't qualify.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I think that I can't afford to buy one... I wish I could though, I would have it carry me around everywhere so that I wouldn't have to walk on my limp. Then I'd get to see the look on my neighbors faces when they see me living the high life while they're still shoveling manure in the fields.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (uniqueChars.vsevolodLDS == true && quests.theSecretOfTheSagesCacheQuest == false)
                            {
                                setMsg("Yeah, um I heard that there was some Vardan fellow that came into town a little while back, he was looking for somebody to help him with some sort of an expedition. It sounded exciting, but much too dangerous for me. He's probably still staying in a room at our local inn on the southeast corner of town.");
                            }
                            else
                            {
                                setMsg("To be honest, I can't think of any other sort of work. I guess it wouldn't hurt to ask around in the tavern. People usually congregate there after a hard days work.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            if (quests.thePlightOfLethikQuest == "complete" && uniqueChars.vsevolodLDS == false)
                            {
                                //text dialogue
                                setMsg("Since I got my job back working Axels field, I feel comfortable paying off my tab. Here is the money for that... Thank you for being pacient with me!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.debtCollectorConrad = true;
                                    worldItems.push([new Item("coins", X, Y), 45]);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Uuummm, is there any chance I could get an extension on that? My boss Axel hasn't paid me since his farm dried up. There hasn't been much land to work so, I don't blame him... but I sort of don't have any coins to spare.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Sure, I guess you can have a short extension.", false, "a"], ["Your out of time, pay up now!", false, "b"], ["If you pay your tab back now I won't have to make this encounter unpleasant...", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("Thank you so much, this is such a relief!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Wow... that was a really short extension.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.debtCollectorConrad = true;
                                worldItems.push([new Item("coins", X, Y), 45]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("I'll pay, I'll pay, it is just inconvenient for me because I am not making any money right now.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.debtCollectorConrad = true;
                                worldItems.push([new Item("coins", X, Y), 45]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Lenard" || conversationID[0] == "Lenard")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Lenard";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.debtCollectorLenardSeduced == false)
                                {
                                    if (player.raceName != "Kel")
                                    {
                                        player.dialogueOptions = [["Hello.", false, "a"], ["What do you think about the war?", false, "b"], ["Stop staring at me!", false, "c"]];
                                        if (quests.debtCollectorQuest == true && quests.debtCollectorLenard == false)
                                        {
                                            player.dialogueOptions.unshift(["You owe Ederhal 65 coins, pay up.", false, "d"]);
                                        }
                                    }
                                    else
                                    {
                                        player.dialogueOptions = [["Hello.", false, "e"]];
                                    }
                                }
                                else if (quests.debtCollectorLenardSeduced != "hurt")
                                {

                                    if (player.matureContentFilter != true)
                                    {
                                        player.dialogueOptions = [["Hello.", false, "f"], ["I played you for the fool that you are!", false, "f"]];
                                        player.dialogueOptions.push(["Hey there lover... [kiss]", false, "g"], ["Sorry for rushing off earlier. I want to make that up to you. [unbutton his shirt -> XXX]", false, "h"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (X < 52851 && X > 52676 && Y < -7125 && Y > -7235 && player.title != "Royalty" && player.title != "Nobility")
                            {
                                //text dialogue
                                setMsg("What are you doing in my home!? Get out!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Hello...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (X < 52851 && X > 52676 && Y < -7125 && Y > -7235 && player.title != "Royalty" && player.title != "Nobility")
                            {
                                //text dialogue
                                setMsg("I think its weird that you are asking me what I think about it in my home uninvited, thats what I think about it! Get out!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                if (player.title != "Highfolk" && player.title != "Royalty" && player.title != "Nobility")
                                {
                                    //text dialogue
                                    setMsg("Is this your thing? You just walk up to strangers and start asking them big political questions? Mind your own business will you!");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    //text dialogue
                                    setMsg("It is a just war, the Kellish are scum and occupy expansive amounts a fertile land that our people who are more worthy in all respects deserve to have.");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            if (player.gender == "Female" && player.title != "Royalty" && player.title != "Nobility" && player.matureContentFilter != true)
                            {
                                //text dialogue
                                if (player.charisma >= 4)
                                {
                                    setMsg("With a body like yours, can you blame me?");
                                }
                                else if (player.getCharisma() >= 12)
                                {
                                    setMsg("If you don't want me to stare why are you so dressed up? You're literally begging me to look at you, you harlot!");
                                }
                                else
                                {
                                    setMsg("I wasn't looking at you... Who would want to look at you!? You ugly whore!");
                                }

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (X < 52851 && X > 52676 && Y < -7125 && Y > -7235 && player.title != "Royalty" && player.title != "Nobility")
                            {
                                //text dialogue
                                setMsg("Get out of my house before I call the guards!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (player.title == "Royalty" || player.title == "Nobility")
                            {
                                if (player.gender == "Male")
                                {
                                    //text dialogue
                                    setMsg("I apologize your lordship...");
                                }
                                else
                                {
                                    //text dialogue
                                    setMsg("I apologize your ladyship... ");
                                }

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (player.gender == "Female" && player.matureContentFilter == true)
                            {
                                //text dialogue
                                setMsg("Your a beauty, what can I say!?");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("You're in my way... Move!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (player.gender == "Male")
                            {
                                setMsg("Ederhal wants to collect my tab, eh? Well if he isn't even brave enough to come collect his own dues then he is without honor and I need not pay him a single coin.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                setMsg("If Ederhal is such a coward that he needs to send a woman to collect his tabs, he isn't going to see a single coin from me.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (player.matureContentFilter != true)
                            {
                                setMsg("How dare you speak to me you disgusting abomination, go run back to your master before I cut your nose off!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                setMsg("How dare you speak to me you disgusting abomination, go run along back to your master!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("You thieving whore! You stole my money, you vile succubus!!! I should kill you!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                self.baseTeam = "arena3";
                                self.ultra.faction = "arena3";
                                self.disturbed = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("[As you approach for a kiss Lenard grabs you by the hair and starts punching you in the face!] You'll regret robbing me you no good whore!!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.debtCollectorLenardSeduced = "hurt";
                                if (player.health < 8)
                                {
                                    player.health = 0;
                                }
                                else
                                {
                                    player.health = 1/50 * player.healthMAX;
                                }
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        Inventory.splice(i, 1);
                                        break;
                                    }
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            setMsg("[You unbutton his shirt and well you know... He is extremely rough with you and when he finishes up he cuts your throat] That's for robbing me, Whore!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                player.health = 0;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["You'll pay up, I'll make sure of that. Do you want to do this the hard way or the easy way?", false, "a"], ["Your right it is sort of dishonorable to send someone to collect debts for you...", false, "b"], ["I don't give a crap about honour, pay up or else!", false, "c"], ["It is dishonorable to keep a running tab of 65 coins without paying it off, the only one whose honour is in question here is you.", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            if (player.level > 3 || player.title == "Nobility" || player.title == "Royalty")
                            {
                                setMsg("Fine I'll pay the tab, but he'll never see me coming around to that broken down excuse for an tavern ever again! I mean not until I get thirsty at least...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.debtCollectorLenard = true;
                                    worldItems.push([new Item("coins", X, Y), 65]);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                setMsg("OH the hard way for sure, I haven't had a good fight in ages!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    self.baseTeam = "arena3";
                                    self.ultra.faction = "arena3";
                                    self.disturbed = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            if (player.title == "Nobility" || player.title == "Royalty")
                            {
                                setMsg("I'm glad you agree, now would you kindly let me be?");
                            }
                            else
                            {
                                setMsg("So what are you still doing here then! Bugger off!!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            if (player.weaponEquipped != "none" && player.level >= 2 || player.title == "Nobility" || player.title == "Royalty")
                            {
                                //text dialogue
                                setMsg("Take the money, you're not worth my trouble!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.debtCollectorLenard = true;
                                    worldItems.push([new Item("coins", X, Y), 65]);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("You dishonorable fiend, I will make you regret challenging me!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    self.baseTeam = "arena3";
                                    self.ultra.faction = "arena3";
                                    self.disturbed = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1d")
                        {
                            if (player.getCharisma >= 10 || player.title == "Nobility" || player.title == "Royalty")
                            {
                                if (player.title != "Nobility" && player.title != "Royalty")
                                {
                                    //text dialogue
                                    setMsg("Your right, I... If you tell anybody about this I will cut your face!");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        quests.debtCollectorLenard = true;
                                        worldItems.push([new Item("coins", X, Y), 65]);
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    //text dialogue
                                    setMsg("Your right... I guess I should just pay him back so that my honour remains in tact. There is never a convenient time to lose 65 coins...");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        quests.debtCollectorLenard = true;
                                        worldItems.push([new Item("coins", X, Y), 65]);
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("You think you're smart don't you, well your not! Bugger off!!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (player.title == "Nobility" || player.title == "Royalty")
                                {
                                    if (player.raceName == "Thengar")
                                    {
                                        player.dialogueOptions.unshift(["Must I repeat myself, or would you like to keep your head on your shoulders?", false, "b"], ["Debt avoidance is a punishable offense, must I have you hanged for insubordination or will you pay what you owe?", false, "b"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.unshift(["You insolent fool, don't you realize to whom you are speaking!?", false, "a"], ["It is best not to challenge a woman of noble birth you baseborn fool!", false, "a"]);
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions.push(["You think I can't take you on!?", false, "a"], ["With respect, I am a perfectly capable stand in for Ederhal. Please pay what you owe.", false, "c"], ["Your right, you shouldn't have to give Ederhal anything. Forgive me... [seduce him and steal his coin purse while kissing]", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            if (player.title == "Nobility" || player.title == "Royalty")
                            {
                                setMsg("I meant no offense your ladyship, I only meant that he ought to come collect the tab himself is all. I will pay the money, its all here see.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.debtCollectorLenard = true;
                                    worldItems.push([new Item("coins", X, Y), 65]);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                if (player.weaponEquipped != "none")
                                {
                                    if (player.level < 8)
                                    {
                                        setMsg("Do you even know how to use that weapon? The tales of Brunhilda the warrior princess are just that, tales, women will never be fit enough to face men in battle. Put that weapon down and give me a kiss, you Harlot.");
                                    }
                                    else
                                    {
                                        setMsg("Alright now, alright, you don't need to make threats... here is the money.");
                                    }
                                }
                                else
                                {
                                    setMsg("Your an ornery one aren't you... I'll tell you what, you swing at me first and we'll see who's tough then.");
                                }

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    if (player.level >= 8)
                                    {
                                        quests.debtCollectorLenard = true;
                                        worldItems.push([new Item("coins", X, Y), 65]);
                                    }
                                    else
                                    {
                                        self.baseTeam = "loner";
                                        self.ultra.faction = "arena3";
                                    }
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            setMsg("Here is the coin your ladyship, forgive my rudeness... here take some more as gift of apology, it is all I can afford.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.debtCollectorLenard = true;
                                worldItems.push([new Item("coins", X, Y), 75]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            //text dialogue
                            setMsg("With respect!? [spits on your feet and laughs loudly] Your a woman! Handling money is a man's job! Now you go and tell your lover Ederhal that he needs to come collect his own debt!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2d")
                        {
                            //text dialogue
                            setMsg("[Your kissing stops abruptly after you unfasten Lenard's coin purse] ...Hey! Come back here you harlot! Give me another kiss! You tease!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.debtCollectorLenardSeduced = true;
                                quests.debtCollectorLenard = true;
                                var koinz = -1
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        koinz = i;
                                    }
                                }

                                if (koinz > -1)
                                {
                                    Inventory[koinz][1] += 75;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), 75])
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Axel" || conversationID[0] == "Axel")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Axel";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hey there.", false, "a"]];

                                if (uniqueChars.vsevolodLDS == true && quests.thePlightOfLethikQuest == "complete")
                                {
                                    player.dialogueOptions.push(["I slayed the witch... Why is your farm still barren?", false, "e"]);
                                }

                                if (quests.thePlightOfLethikQuest == false)
                                {
                                    player.dialogueOptions.push(["Why is your farm so barren?", false, "b"]);
                                }
                                else if (quests.thePlightOfLethikQuest == true)
                                {
                                    if (uniqueChars.vsevolodLDS == false)
                                    {
                                        player.dialogueOptions.push(["Hildegard was innocent, the warlock responsible has been slain.", false, "d"]);
                                        quests.thePlightOfLethikCompletionStyle = "vsevolod";
                                    }
                                    else if (uniqueChars.hildegardLDS == false)
                                    {
                                        player.dialogueOptions.push(["The witch is dead.", false, "d"]);
                                        quests.thePlightOfLethikCompletionStyle = "hildegard";
                                    }
                                    else
                                    {
                                        player.dialogueOptions.push(["Could you tell me where to find the witch again?", false, "d"]);
                                        quests.thePlightOfLethikCompletionStyle = "repeat";
                                    }
                                }

                                if (quests.debtCollectorQuest == true && quests.debtCollectorAxel == false)
                                {
                                    player.dialogueOptions.push(["You owe Ederhal 33 coins, pay up.", false, "c"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (uniqueChars.vsevolodLDS == false)
                            {
                                setMsg("I can't thank you enough for ridding my field of that warlock's curse!");
                            }
                            else if (quests.thePlightOfLethikCompletionStyle == "hildegard" && quests.thePlightOfLethikPay == 0)
                            {
                                setMsg("I am grateful that you slayed the old crone who cursed my field, but unfortunately my luck hasn't improved any...");
                            }
                            else if (quests.thePlightOfLethikCompletionStyle == "hildegard")
                            {
                                setMsg("I was hoping for better results since I paid you to take care of my witch problem... What a waste of money!");
                            }
                            else
                            {
                                setMsg("Hi.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("It's witchcraft I tell ye, witchcraft, and I know who's behind it too. That nasty old crone Hildegard!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("So, you're collecting Ederhal's tabs, eh? I'll have you know that I pay my debts when they are called on... here are the coins for Ederhal, make sure they get to him safely.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.debtCollectorAxel = true;
                                worldItems.push([new Item("coins", X, Y), 33]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            if (quests.thePlightOfLethikCompletionStyle == "repeat")
                            {
                                //text dialogue
                                setMsg("She lives in the house right beside the barracks.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (quests.thePlightOfLethikCompletionStyle == "vsevolod")
                            {
                                //text dialogue
                                setMsg("What a twist of fate, a warlock eh? Who would have thought? I guess I should consider apologizing to Hildegard for calling her a wicked fiendish hag...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    if (quests.thePlightOfLethikPay > 0)
                                    {
                                        worldItems.push([new Item("coins", X, Y), quests.thePlightOfLethikPay]);
                                    }
                                    quests.thePlightOfLethikQuest = "complete";
                                    quests.completeQuests.push({name: "The Plight of Lethik", description: "You slayed the warlock that was responsible for cursing Axel's farm."});
                                    player.thengarFaction += 30;
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 100;
                                    }
                                    else
                                    {
                                        player.magicalExperience += 20;
                                        player.experience += 400;
                                    }
                                    player.fame += 1;
                                    change = "bringBackDaField";
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (quests.thePlightOfLethikCompletionStyle == "hildegard")
                            {
                                //text dialogue
                                setMsg("May the gods grant you glory! You have saved my farm!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    if (quests.thePlightOfLethikPay > 0)
                                    {
                                        worldItems.push([new Item("coins", X, Y), quests.thePlightOfLethikPay]);
                                    }
                                    quests.thePlightOfLethikQuest = "complete";
                                    quests.completeQuests.push({name: "The Plight of Lethik", description: "You slayed the witch accused of cursing Axel's farm."});
                                    player.thengarFaction += 30;
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 20;
                                    }
                                    else
                                    {
                                        player.experience += 95;
                                    }
                                    player.fame += 1;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("That dastardly curse of hers was so potent that even her death couldn't stop it. I hope that its effects will wear off soon, because my living depends on it.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Why do you think she is behind it?", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("She walked by here muttering spells several times! She's a witch and she's cursed me poor field!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Tell me where she is, we shant suffer a witch to live! ", false, "a"], ["I'll help you find out the problem with your field.", false, "b"], ["How much will you pay me to solve your problem?", false, "c"], ["I'm sorry to hear that...", false, "d"], ["Good luck with that...", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("She lives in a big house to the south-east of here, sort of near the middle of town, good luck to ye, and be wary of her evil spells.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.thePlightOfLethikQuest = true;
                                quests.activeQuests.push({name: "The Plight of Lethik", description: "Old Lady Hildegard is accused of cursing the town field."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            setMsg("I already know the problem, its that old hag Hildegard and her curses.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.thePlightOfLethikQuest = true;
                                quests.activeQuests.push({name: "The Plight of Lethik", description: "Old Lady Hildegard is accused of cursing the town field."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            //text dialogue
                            setMsg("Pay you? I guess I could spare 20 coins.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2d")
                        {
                            //text dialogue
                            setMsg("Thanks for your kind words...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Its a deal.", false, "a"], ["You want me to kill a magical lune for just 20 coins, no.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            setMsg("She lives in a big house to the south-east of here, sort of near the middle of town. You won't see a single coin until every last drop of her evil blood is spilled...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.thePlightOfLethikPay = 20;
                                quests.thePlightOfLethikQuest = true;
                                quests.activeQuests.push({name: "The Plight of Lethik", description: "Old Lady Hildegard is accused of cursing the town field."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            if (player.inquisitionRank != "none" || player.charisma >= 6 || player.getCharisma() >= 10)
                            {
                                //text dialogue
                                setMsg("Fine I'll make it 35, please help me! This field is my entire living...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.thePlightOfLethikPay = 35;
                                    quests.thePlightOfLethikQuest = true;
                                    quests.activeQuests.push({name: "The Plight of Lethik", description: "Old Lady Hildegard is accused of cursing the town field."});
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogu
                                setMsg("If your not happy with what I can offer you, then I'm not paying you nothing!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Lambert" || conversationID[0] == "Lambert")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Lambert";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.debtCollectorLambertViolence == false)
                                {
                                    player.dialogueOptions = [["Hello.", false, "a"]];
                                    if (quests.debtCollectorQuest == true && quests.debtCollectorLambert == false)
                                    {
                                        player.dialogueOptions.push(["You owe Ederhal 47 coins, pay up.", false, "c"])
                                    }
                                    else if (quests.debtCollectorLambert == "gift")
                                    {
                                        player.dialogueOptions.push(["How is your life so far?", false, "b"]);
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions = [["Hello there.", false, "d"]];
                                }

                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (quests.debtCollectorLambert == "gift")
                            {
                                //text dialogue
                                setMsg("Its nice to see you again!");
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Hello.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Times are tough, but thanks to you I can afford to feed myself still!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I can't afford to pay Ederhal back yet, I need the money I have for food and clothing. My boots are worn and my pantry is nearly empty.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("I don't want any trouble.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Frankly, I don't care about your other expenses, if you don't fork over the coins your boots won't be the only things of yours in disrepair!", false, "a"], ["Look, everyone needs the coins, but what is more important than coins is honor. Your honor will be at stake if you evade your debt any longer.", false, "b"], ["I didn't realize you were in such bad circumstances, I can pay your bar tab for you if you like.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            if (player.weaponEquipped != "none")
                            {
                                //text dialogue
                                setMsg("OK OK!! There is no need for violence, the coins are right here.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.debtCollectorLambert = true;
                                    quests.debtCollectorLambertViolence = true;
                                    worldItems.push([new Item("coins", X, Y), 47]);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("I won't stand here and listen to your empty threats, Ederhal will get his money when I am ready to pay him it!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            if (player.getCharisma() >= 8 || player.charisma >= 5)
                            {
                                //text dialogue
                                setMsg("Your right, I should not wait any longer to pay this debt, I can't have the townsfolk seeing me as dishonorable.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.debtCollectorLambert = true;
                                    playersTurnToSpeak = true;
                                    worldItems.push([new Item("coins", X, Y), 47]);
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Being poor and being dishonorable are not the same! I will pay ederhal back when I can afford to.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("Your kindness is a gift from the gods! I will remember this!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.debtCollectorLambert = "gift";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }

                    }

                    if (self.ID == "Iplala the Warrior Elder" || conversationID[0] == "Iplala")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Iplala";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                if (player.title == "Nobility" && player.gender == "Female" && player.raceName == "Kel")
                                {
                                    player.dialogueOptions.push(["Tell me the story of how you lost your eye.", false, "a"]);
                                    player.dialogueOptions.push(["Do you have any advice to offer me, Elder Iplala?", false, "c"]);
                                    player.dialogueOptions.push(["Tell me a tale of the spirits.", false, "d"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["How did you lose your eye?", false, "a"]);
                                    player.dialogueOptions.push(["Can you tell me about your village?", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.title == "Nobility" && player.gender == "Female" && player.raceName == "Kel")
                            {
                                setMsg("I must have told you this once before, but if you insist. When you were not but a wee lass, the Kerib Tribe who held greed in their hearts, desired the wealth and resources that the great mother had granted us. A band of their women came to our village with clubs and demanded that we pay them a tribute of maize, frijols, fish, and apotl. We, being a sensible people declined them and a battle broke out between us all...");
                            }
                            else
                            {
                                setMsg("Curiosity can be dangerous, stranger, but I will indulge you. I lost my eye fighting the Kerib Tribe a long time ago before High Chieftain Har united most of the Kellish tribes to fight the barbarians.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                if (player.title == "Nobility" && player.gender == "Female" && player.raceName == "Kel")
                                {
                                    conversationID[1] = 1;
                                }
                                else
                                {
                                    conversationID[1] = 0;
                                }
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Our village is old, as are our ways. It is good you ask me about it because if you are to remain a welcome guest there is much you need to know. In Alzkwaya tradition, the women are those who are the warriors, and the men craft the goods and work the land. We will permit men to enter our village, but only as long as they respect our red sisters. The red sisters are the warriers who fight for the great mother and the Matriarch of the village. Also, you should know that the well is home to a spirit of the deep that is kept at bay by the itlin branch we have placed by the well. If you were to remove the branch, the spirit would cause great harm to our people and the chaos that would ensue would be your fault. Also, never eat of the lel berries at the great alter. The great mother has breathed her life upon them for the red sisters and the matriarch, to eat of them would be to disrespect our spiritual pact with the great mother. Respect our rules and traditions and you will be welcomed.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Never let a man believe that he can best you because he is bigger. His large size is exactly what makes him a worse warrior; it makes him slow and predictable. Women, we are small targets, we are nimble and can use our agility to avoid men's sluggish attacks. It is bad to underestimate your foes, but it is worse to underestimate yourself.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Yes... the spirits were once all part of the great mothers domain, but they began to destroy her creations in a mad rage that was unsoothable. The great mother devised a plan, she took a thread of her own green hair and planted it in the ground. It grew to be an ish bush, the first ish bush ever to grow. When the spirits tried to devour her creation they became horribly ill at the taste of it and started to wither. Their bodies melted away, and now all that remains of them are their twisted souls. To this day the spirits are deathly afraid of the ish bush. That is why we put an itlin branch by the well, it keeps the deep spirit at bay. Never remove the itlin branch from its place or we will all be in danger. The spirits will not stop until all of the nature is devoured.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                player.dialogueOptions.push(["-- But the kerib tribe are our allies, why would they have attacked us so unjustly?", false, "a"]);
                                player.dialogueOptions.push(["Tell me more.", false, "b"]);
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            if (player.title == "Nobility" && player.gender == "Female" && player.raceName == "Kel")
                            {
                                setMsg("The kerib tribes have not always been our allies, " + player.name + ", High Chieftain Har convinced your mother and the matriarch of the Kerib peoples to unite to stop the barbarians of the west. If our lands were not under attack we would never have reconciled our differences. I certainly do not trust them.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("...oh... where was I... Oh, yes, the battle. The red sisters gave the keribs a fight they would never forget, but in the wildness I was struck hard by the blow of a kerib club. The great mother did not take me into the wind, though, she filled me with life anew, but in exchange for my life, she took my eye.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Ehitli" || conversationID[0] == "Ehitli")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Ehitli";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"]];

                                if (player.title == "Nobility" && player.gender == "Female" && player.raceName == "Kel")
                                {
                                    player.dialogueOptions.push(["How goes your vigil?", false, "c"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["What are you up to?", false, "d"]);
                                    player.dialogueOptions.push(["Where are your parents?", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Watch out for the Yioshk, they will eat you up with their big teeth. Chomp chomp chomp chomp chomp!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("My mother went west to fight the barbarian raiders, she told me that it is our tribe's duty to help the other tribes who are in need, so that they will help us when we are threatened. My papa was bit by a taipan snake when I was young, it was hiding in the maize patch, and it bit him when he was picking maize.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Alright I guess, I hope one day I can be a full warrior like the red sisters are...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("I'm trying to guard the village from wild animals, please don't distract me.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Muktu the Artisan" || conversationID[0] == "Muktu")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Muktu";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                if (player.title == "Nobility" && player.gender == "Female" && player.raceName == "Kel")
                                {
                                    player.dialogueOptions.push(["How goes your pottery crafting?", false, "a"]);
                                    player.dialogueOptions.push(["Great job, these pots are well made!", false, "b"]);
                                    if (quests.lostHuntressQuest == false)
                                    {
                                        player.dialogueOptions.push(["You look worried, Muktu...", false, "c"]);
                                    }
                                    else if (quests.lostHuntressFound == true && quests.lostHuntressCompletionStyle != "complete")
                                    {
                                        player.dialogueOptions.push(["I found your wife's body by the river, she fought off a hungry drile, but she did not survive her wounds. She died honorably...", false, "e"]);
                                    }
                                }
                                else
                                {
                                    if (quests.lostHuntressQuest == false)
                                    {
                                        player.dialogueOptions.push(["You seem stressed out...", false, "c"]);
                                    }
                                    else if (quests.lostHuntressFound == true && quests.lostHuntressQuest != "complete")
                                    {
                                        player.dialogueOptions.push(["I found your wife's body by the river, she fought off a hungry drile, but she did not survive her wounds.", false, "e"]);
                                    }
                                    player.dialogueOptions.push(["How do you get clay down here in the savannah?", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("I have made a lot with the new clay that the red sisters have brought.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("I do my best...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (player.title == "Nobility" && player.gender == "Female" && player.raceName == "Kel")
                            {
                                setMsg("My wife has not returned from hunting, " + player.name + ", she is fierce and strong, but so are the beasts. Would you go out and see if she is okay?");
                            }
                            else
                            {
                                setMsg("My wife has not returned from hunting, she is fierce and strong, but so are the beasts. I will pay you 15 coins to check if she is okay.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.lostHuntressQuest = true;
                                quests.activeQuests.push({name: "Lost Huntress", description: "Muktu's wife has not come back from hunting; find out if she is okay."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("There is a small mudbog not to far to the northeast of here. Some of the red sisters occasionally go north to collect clay and they bring it back here so that I can make it into pots and bowls for the tribe.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("[tears well in his eyes] I can't believe she's dead... I know that she died honourably... but I... I can't believe shes dead! [cries out in pain]");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();


                                quests.completeQuests.push({name: "Lost Huntress", description: "You found the missing huntress. Her body was beside a drile which she had slain."});
                                player.experience += 25;
                                quests.lostHuntressCompletionStyle = "foundherdead";
                                quests.lostHuntressQuest = "complete";
                                if (player.title != "Nobility" || player.gender != "Female" || player.raceName != "Kel")
                                {
                                    worldItems.push([new Item("coins", X, Y), 15]);
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Inquisitor Gavilio" || conversationID[0] == "Gavilio")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Gavilio";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.inquisitionRank != "none")
                                {
                                    player.dialogueOptions = [["Hello, Inquisitor.", false, "a"], ["What do you do around here, Inquisitor?", false, "b"], ["Are there any guild related jobs I am needed for, Inquisitor?", false, "c"]];
                                    if (uniqueChars.matildaLDS == false && quests.atalinWitchHuntQuest == true)
                                    {
                                        player.dialogueOptions.unshift(["The witch is dead.", false, "d"]);
                                    }
                                    if (uniqueChars.gesuldoLDS == false && quests.torturedSpiritQuest == true)
                                    {
                                        if (quests.torturedSpiritPhantom == true)
                                        {
                                            player.dialogueOptions.unshift(["I banished the phantom.", false, "e"]);
                                        }
                                        else if (quests.torturedSpiritBishop == true)
                                        {
                                            player.dialogueOptions.unshift(["I have banished the ghost that killed the man you found... now his soul can finally find peace in eternity.", false, "e"], ["I banished the ghost that killed the man you found.", false, "e"]);
                                        }
                                        else
                                        {

                                            player.dialogueOptions.unshift(["It was a ghost... I burnt its bones and sent it back to the void.", false, "e"]);
                                        }
                                    }
                                    else if (uniqueChars.gesuldoLDS == true && quests.torturedSpiritQuest == true && quests.torturedSpiritBishop == true)
                                    {
                                        player.dialogueOptions.unshift(["Bishop Emmanuel suspects the graveyard is haunted by a man named Gesuldo who was killed trying to preach in the slums...", false, "f"]);
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions = [["Hello, Inquisitor.", false, "a"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.inquisitionRank != "none")
                            {
                                if (player.inquisitionRank == "Initiate")
                                {
                                    setMsg("So you're the new Initiate...");
                                }
                                else if (player.inquisitionRank == "Inquisitor")
                                {
                                    setMsg("Oh... it's you again.");
                                }
                                else
                                {
                                    setMsg("What can I do for you, " + player.inquisitionRank + " " + player.name + "?");
                                }
                            }
                            else
                            {
                                setMsg("I have no business with you.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.inquisitionRank != "none")
                            {
                                setMsg("You mean besides single handedly slaying a chupacabras and bringing back its head as a trophy for the guild? I guess I sometimes banish ghosts and carry out low level assassinations. Mostly mundane stuff, I know.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (quests.atalinWitchHuntQuest == false && quests.torturedSpiritQuest == false)
                            {
                                setMsg("To be precise, there are two. One of our spies reported back that Old Lady Matilda who lives in the west end of the slums is a witch, and she is brewing potions and reading people's fates... Obviously one of us has to get around to killing her sooner or later. As for the other job... a young man was found dead at the graveyard... [laughs] What a convenient place to die! But anyways, upon disection of his corpse I noticed that his organs were coated in a dry grey dust... so, I suppose you could take a closer look into the graveyard to see what is going on there.");
                            }
                            else
                            {
                                setMsg("Nope, nothing new today...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (quests.atalinWitchHuntQuest == false && quests.torturedSpiritQuest == false)
                                {
                                    quests.atalinWitchHuntQuest = true;
                                    quests.torturedSpiritQuest = true;
                                    quests.activeQuests.push({name: "Atalin Witch Hunt", description: "Old Lady Matilda who lives in the west side of the Atalin Slums is to be arrested for suspected witchcraft and brewing magical elixers."});
                                    quests.activeQuests.push({name: "Grey Dust", description: "A man found dead at the Atalin Graveyard was found to have his innards coated in a strange grey dusty substance. What could have done this?"});
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("It is preferable to bring witches to the church pyre to be burnt... but good work all the same.");


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.atalinWitchHuntCompletionStyle = "kill";
                                quests.atalinWitchHuntQuest = "complete";
                                quests.completeQuests.push({name: "Atalin Witch Hunt", description: "You hunted down and killed the witch known as Old Lady Matilda."});
                                player.nirwadenFaction += 20;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 130;
                                }
                                else
                                {
                                    player.magicalExperience += 5;
                                    player.experience += 195;
                                }
                                player.fame += 1;
                                if (player.inquisitionRank != "none")
                                {
                                    quests.theOrderOfTheInquisition += 1; //the inquisition guild cares about this quest and will recognize its members for completing it.
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("Very good, now the graveyard will be safe from malicious spectral beings... that is until somebody else dies tragically... but, I do admit, well done!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.torturedSpiritQuest = "complete";
                                if (quests.torturedSpiritPhantom == true)
                                {
                                    quests.torturedSpiritCompletionStyle = "phantom";
                                    quests.completeQuests.push({name: "Grey Dust", description: "You banished the phantom that was haunting the Atalin Graveyard."});
                                }
                                else
                                {
                                    quests.torturedSpiritCompletionStyle = "banish";
                                    quests.completeQuests.push({name: "Grey Dust", description: "You banished the ghost that was haunting the Atalin Graveyard."});
                                }
                                player.nirwadenFaction += 35;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 100;
                                }
                                else
                                {
                                    player.magicalExperience += 15;
                                    player.experience += 125;
                                }
                                player.fame += 1;
                                if (player.inquisitionRank != "none")
                                {
                                    quests.theOrderOfTheInquisition += 1; //the inquisition guild cares about this quest and will recognize its members for completing it.
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("Hmmm, sad... I suspected it was a haunting I just wasn't sure which type of spectral being it was... By the sound of the story the Bishop told you I would say that we're dealing with a Phantom. Phantom's are trapped in pergatory when they have been horribly wronged on the earth. I mean, this is not an exact science... but this one sounds like a phantom case to me. Phantoms only attack at night, so if you want to kill it without having your insides dusted like its last victim... I recommend burning its bones while the sun is high in the sky.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.torturedSpiritPhantom = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Inquisition Emprendor" || conversationID[0] == "InquisitionRecruiter")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "InquisitionRecruiter";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                if (player.inquisitionRank == "none")
                                {
                                    player.dialogueOptions.unshift(["What is The Royal Order of the Inquisition?", false, "a"], ["I want to join the Inquisition, how might I do that?", false, "b"]);
                                }
                                else
                                {
                                    if (quests.inquisitionOutfitGiven == false)
                                    {
                                        player.dialogueOptions.push(["Do I get an inquisitor's outfit Now that I am a member?", false, "e"]);
                                    }
                                    player.dialogueOptions.push(["Remind me, what is my rank in the Inquisition?", false, "c"]);
                                    if (player.inquisitionRank == "Initiate" && quests.theOrderOfTheInquisition >= 3)
                                    {
                                        player.dialogueOptions.push(["[promotion]", false, "d"]);
                                    }
                                    else if (player.inquisitionRank == "Inquisitor" && quests.theOrderOfTheInquisition >= 4)
                                    {
                                        player.dialogueOptions.push(["[promotion]", false, "d"]);
                                    }
                                    else if (player.inquisitionRank == "High Inquisitor" && quests.theOrderOfTheInquisition >= 6)
                                    {
                                        player.dialogueOptions.push(["[promotion]", false, "d"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("The Royal Order of the Inquisition is a branch of the imperial authority ruled by The Royal Council of the Inquisition which is made up of seven Master Inquisitors. The council was appointed by the imperial crown to ensure the empire's survival against all of the demonic beings and sorcery in the world, as well as to ensure that those who convert to the faith do so honestly and genuinely. Effectively, this royal guild acts as the council's hands, and eyes. We hunt the witches, slay the beasts, and assassinate the crowns adversaries... the council gives us the orders.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.title == "Royalty" && player.raceName != "Aldrek" || player.title == "Nobility" && player.raceName != "Aldrek")
                            {
                                if (player.raceName == "Nirwaden")
                                {
                                    setMsg("Your grace... to join this guild would be below you. I must politely decline.");
                                }
                                else
                                {
                                    setMsg("As a matter of imperial security we do not permit foreign nobles or monarchs to join us... I most politely decline your grace's request.");
                                }
                            }
                            else if (player.raceName != "Aldrek" && player.nirwadenFaction >= 0 && player.fame >= 6 || player.raceName != "Aldrek" && player.nirwadenFaction >= 0 && player.title == "Highfolk")
                            {
                                setMsg("You ask me. You meet the qualifications to join the guild, so welcome, Initiate " + player.name + ".");
                            }
                            else if (player.raceName != "Aldrek")
                            {
                                setMsg("You can not have poor standing within the Nirwaden Empire, and you must perform deeds that will catch the guild's attention...");
                            }
                            else
                            {
                                setMsg("You're lucky I don't slay you were you stand, Aldrekii scum... You are not welcome in this guild.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.title == "Royalty" || player.title == "Nobility")
                                {
                                    //can't join ever
                                }
                                else if (player.raceName != "Aldrek" && player.nirwadenFaction >= 0 && player.fame >= 6 || player.raceName != "Aldrek" && player.nirwadenFaction >= 0 && player.title == "Highfolk")
                                {
                                    player.inquisitionRank = "Initiate";
                                }
                                else if (player.raceName != "Aldrek")
                                {
                                    //can join later on if qualifications are met...
                                }
                                else
                                {
                                    //can't join ever
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (player.inquisitionRank != "High Inquisitor")
                            {
                                setMsg("Why you are an " + player.inquisitionRank.toLowerCase() + ", " + player.inquisitionRank + " " + player.name + ".");
                            }
                            else
                            {
                                setMsg("Why you are a " + player.inquisitionRank.toLowerCase() + ", " + player.inquisitionRank + " " + player.name + ".");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (player.inquisitionRank == "Initiate" && quests.theOrderOfTheInquisition >= 3)
                            {
                                setMsg("You are hence forth an Inquisitor of the Nirwaden Empire, bound to serve the imperial throne by vanquishing any threats to its dominion of the lands, be they magical, beastial, or otherwise...");
                            }
                            else if (player.inquisitionRank == "Inquisitor" && quests.theOrderOfTheInquisition >= 4)
                            {
                                setMsg("You have earned the title of High Inquisitor!");
                            }
                            else if (player.inquisitionRank == "High Inquisitor" && quests.theOrderOfTheInquisition >= 6)
                            {
                                setMsg("For you unparaleled master in the art of vanquishing magics of all sorts, be they witches, fairies or demons. You are now awarded the highest rank in the Royal Order of the Inquisition... You now hold the title of Arch Inquisitor!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.inquisitionRank == "Initiate" && quests.theOrderOfTheInquisition >= 3)
                                {
                                    player.inquisitionRank = "Inquisitor";
                                    quests.theOrderOfTheInquisition -= 3;
                                }
                                else if (player.inquisitionRank == "Inquisitor" && quests.theOrderOfTheInquisition >= 6)
                                {
                                    player.inquisitionRank = "High Inquisitor";
                                    quests.theOrderOfTheInquisition -= 6;
                                }
                                else if (player.inquisitionRank == "High Inquisitor" && quests.theOrderOfTheInquisition >= 11)
                                {
                                    player.inquisitionRank = "Arch Inquisitor";
                                    quests.theOrderOfTheInquisition -= 11;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("Of course! But you only get one...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                worldItems.push([new Item("witchHunterOutfit", X, Y), 1]);
                                quests.inquisitionOutfitGiven = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Aavai the Reformed Northern Bandit" || conversationID[0] == "Aavai")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Aavai";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["So you used to be a bandit?", false, "b"], ["What do you want to do with your life?", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Shan Toor.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Yeah, I used to be in Hetmer's gang, but eh, we had a bit of a falling out and I went north for a while... I came back to Teshir and then I saw this place... My new faith has changed my life!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("At first I was just content to murder and loot and all that, because I used to think that the point of life was to live by the blade, strength and might were my gods. Sure I looked up to Gemesh every once in a while but, only to curse him for the cold... Now... everything's different. I don't feel like I have to kill people to have meaning in my life. I think what I really want now is to be a priest of the church... that would be wonderful!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Bishop Bernardo" || conversationID[0] == "Bernardo")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Bernardo";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["Can you bless me father?", false, "b"], ["Tell me about the Everlasting Spirit", false, "c"], ["How goes the conversion of Teshir?", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Yes, it is. Thank the spirit for that...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                setMsg("Indeed, let the holiness of the everlasting spirit fill this humble servant of light so that she might do its will.");
                            }
                            else
                            {
                                setMsg("Indeed, let the holiness of the everlasting spirit fill this humble servant of light so that he might do its will.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("The everlasting spirit is in all of us... some choose to embrace the light within... but others... well others invite the darkness. Those who invite the void into their hearts have no hope and can not be saved from the grip of evil except for by holy fire.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("The folk here are stubborn, but many have overcome the depravity of their old ways and sought to join the church.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Bishop Emmanuel" || conversationID[0] == "Emmanuel")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Emmanuel";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Praise be to the eternal spirit.", false, "a"], ["I seek wisdom of the eternal spirit.", false, "c"]];
                                if (player.class == "Priest" && quests.neighborlyConversionQuest == false)
                                {
                                    player.dialogueOptions.push(["I wish to do the holy work of the spirit everlasting...", false, "b"])
                                }
                                if (player.class == "Priest" && quests.neighborlyConversionJarlConvinced == true)
                                {
                                    player.dialogueOptions.push(["The light of the eternal spirit shines over Teshir!", false, "e"])
                                }
                                if (player.class == "Priest" && quests.neighborlyConversionCompletionStyle == "fail")
                                {
                                    player.dialogueOptions.push(["I have failed, the north men are stubborn and madly lost in their ways of idolitry and brutishness...", false, "g"]);
                                }
                                if (quests.torturedSpiritQuest == true)
                                {
                                    player.dialogueOptions.unshift(["Tell me, father, have you noticed anything unusual about the graveyard as of late?", false, "f"])
                                    if (quests.torturedSpiritBishop == true)
                                    {
                                        player.dialogueOptions.unshift(["Where was this poor man buried, Bishop?", false, "h"])
                                    }
                                }
                                if (player.raceName != "Nirwaden")
                                {
                                    player.dialogueOptions.push(["Your religion is wrong and evil!", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("May the light of wisdom shine down on you child.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("As it should be... Our neighbors to the west have been living in wretched shadows; hidden from the great light of the eternal spirit. I charge thee with the awesome task of pulling them up from their depravity. Seek permission from the jarl of the city of Teshir for us to construct a church in his lands.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("When we were not but ash and bones the spirit saw our pitiful state and breathed itself into us all. It filled our bones with purpose, and our eyes with light. We are meant to bring life to the world where death reigns, we are meant to fill with light all that remains in darkness.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Your hatred of goodness is truly pitiful. The spirit everlasting does not hate. It loves you, for you are a part of it... to hate the spirit is to hate yourself. As you are clearly corrupted and blinded by the void, you must be cleansed at the pyre... Do not fear a death by flame, the pain you will feel is not but the evil fleeing the holy flames. When it is over you will be reunited with the spirit in the eternal, free from this worldly corruption that has plagued you so.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                player.nirwadenFaction -= 400;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("This is great news, we will commence the construction of a new church immediately!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.neighborlyConversionCompletionStyle = "success";
                                quests.neighborlyConversionQuest = "complete";
                                quests.teshirConverted = true;
                                quests.completeQuests.push({name: "Neighborly Conversion", description: "You convinced the Jarl of Teshir to permit the construction of a church to the Spirit Everlasting in his city."});
                                player.nirwadenFaction += 60;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 100;
                                }
                                else
                                {
                                    player.experience += 100;
                                }
                                player.fame += 2;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            if (quests.torturedSpiritBishop == false)
                            {
                                setMsg("Yes... I'm afraid that the graveyard might be haunted. It all started after we burried this man named Gesuldo... He was a devoted servant of the light. He was murdered trying to preach in the slums... poor man. Surely it is a message from the Spirit that such a good servant of the light would be trapped in pergatory... Perhaps it is a sign... some people are beyond saving with words and good deeds. Some may only be cleansed of impurity by the light of the spirit's flames.");
                            }
                            else
                            {
                                setMsg("I told you already, his name was Gesuldo, he was murded by the very souls that he intended to save... This is what becomes of trusting the depraved to be good hearted...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.torturedSpiritBishop = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("It is a shame that the Freids will not let goodness into their hearts... Some however may only be cleansed with flames. Those barbarians' day will come. The spirit will make sure of that.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.neighborlyConversionCompletionStyle = "failed";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            setMsg("I believe he was buried near the back, with his family. His family tombstone has moss on it if that helps at all. Please... be careful...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I will do this great work in the name of the eternal spirit!", false, "a"], ["Actually, I should wait until I have purified myself more before I take on such a great responsibility...", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("May the spirit everlasting grant you glorius success!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.neighborlyConversionQuest = true;
                                quests.activeQuests.push({name: "Neighborly Conversion", description: "Convince the Jarl of Teshir to let the church authority build a parish dedicated to the spirit everlasting in his land."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("You are wise to take time to prepare yourself spiritually for such a grand undertaking, my child.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What about evil people are we meant to bring life to them too?", false, "a"], ["What can I do to serve the eternal spirit?", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("The only act worse than to deny the light is to bring about the darkness by challenging the light. Those who challenge the light must be purified in flames. The followers of the void must be cleansed if light and life are to thrive and prosper.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            setMsg("Do acts of good, heal others be charitable to others, but lend no hand to the darkness. Cast death away with love and light; let death have no place in your eyes lest they turn into coal and you become one with the darkness. Challenge those who would besmirch the ways of life and light, and let all be purified, be it through deeds and service or with holy scorching fire.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Arcus Mining Co. Foreman Gavor" || conversationID[0] == "Gavor")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Gavor";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["So how does mining for the Arcus Company work?", false, "b"], ["I'm here to work, what should I do?", false, "a"], ["How much do I get paid for what I mine?", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("You can mine any of the rocks in the mine... but you have to bring your own light and pick.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("You mine until you feel like you've mined enough... and then when you leave, all of the ores are purchased by The Arcus Co. Keep in mind that The Arcus Co. owns the mine so we buy at a discounted rate.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Alca Stone: 0.5, Iron: 4, Copper: 5, Coal: 2.5, Gold: 92");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Ser Barraco Kein the Bandit Chieftain" || conversationID[0] == "Barraco")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Barraco";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.manOfThePeopleQuest == false && quests.manOfThePeoplePresented == false)
                                {
                                    player.dialogueOptions.unshift(["Who are you, and what are you doing out here in the woods?", false, "a"]);
                                }
                                if (quests.manOfThePeoplePresented == true && quests.manOfThePeopleQuest != "complete" || quests.manOfThePeopleQuest == true)
                                {
                                    player.dialogueOptions.push(["What do you do with your spoils?", false, "b"], ["Why do you call yourself Ser? That isn't normal in your line of work.", false, "c"], ["Why do you call yourself Ser?", false, "c"], ["How can you claim to uphold justice when you are willing to kill to take what they have?", false, "d"], ["I wish to swear fealty to your cause...", false, "e"]);
                                }
                                if (quests.manOfThePeopleQuest == true)
                                {
                                    player.dialogueOptions.unshift(["You are wanted dead for treason, murder, and banditry. I intend to collect your bounty...", false, "j"], ["Why didn't you turn yourself in when they threatened to burn your wife?", false, "k"]);
                                }
                                if (quests.manOfThePeopleCompletionStyle == "barracano")
                                {
                                    player.dialogueOptions.push(["Is it mealtime yet?", false, "f"]);
                                    var coinzHitz = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 50)
                                        {
                                            coinzHitz = i;
                                        }
                                    }
                                    if (coinzHitz > -1)
                                    {
                                        player.dialogueOptions.push(["Here is some coin I retrieved. [give 50 coins]", false, "g"]);
                                    }

                                    if (quests.manOfThePeopleTrusted >= 3 && quests.breakawaysQuest == false)
                                    {
                                        player.dialogueOptions.push(["Do you have anything important you need me to do?", false, "h"]);
                                    }

                                    if (uniqueChars.raldoLDS == false && quests.breakawaysQuest == true)
                                    {
                                        player.dialogueOptions.push(["I have brought Raldo the Long to justice...", false, "i"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                        else if (player.dialogueOptions[i][2] == "i")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0i";
                                        }
                                        else if (player.dialogueOptions[i][2] == "j")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0j";
                                        }
                                        else if (player.dialogueOptions[i][2] == "k")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0k";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("[laughs] You don't already know? I am Ser Barraco Kein and these men with me are those who have pledged themself to my cause. You see, the lords and dames of the land will call us bandits, brigands, or thieves. I say we are heros. The wealthy are the true brigands... they hoard wealth and power at the expense of the every man. What we do here should be called justice, not banditry.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.manOfThePeoplePresented = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("We keep between a third to a fifth of what we take from the rich for wages and equipment, and the rest we distribute to poor farmers and vagabonds.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("It is a fair question... I was once a knight to his lordship Basilio Altezor. I had taken an oath to uphold justice and to remain loyal to the crown... but with time I realized that I was betrayed, for a knight in the loyal service of his lordship would never be a true defender of justice. We were not defending justice, we were defending his lordship's treasury, his lordship's power, and his lordship's interests. I was made a liar by the contradictory oath I was decieved to take and thus, while some call my actions now treacherous, I assure you, I have only ever acted to uphold justice. Loyalty to a man is not honour, loyalty to goodness is.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Do you think yourself wise, trying to make me seem the hypocrit? [chuckles deeply], What is the imperial punishment for thievery? I'll answer that: It is torture in some cases, and burnings in others, in some they simply kill the family of the thief to teach them a lesson. Thievery is wrong and I agree that it is a crime punishable by death. However, unlike those still loyal to the empire I offer those that have stolen from the populous a chance to abandon the wealth that they have unfairly hoarded at the expense of the people. If they refuse to submit the stolen goods then killing them is just, as they have committed the crime of thievery. You see, the imperial monarchy has convinced everyone that stealing is when a poor person takes from a rich person. It is not. True thievery is when a greedy person deprives another person of their basic right to live with dignity.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("You would, would you? Tell me, do you wish to join because you truly wish to follow my cause or do you imagine that you will make yourself wealthy in my service, because I can assure you that you will have no more coin than anyone else. A living wage assuredly, but that is all. Fine, if you will join so be it. You are one of us now.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (quests.manOfThePeopleQuest == true)
                                {

                                    quests.completeQuests.push({name: "Man of the People", description: "You joined the very bandit chieftain whom you set out to kill."});
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 20;
                                    }
                                    else
                                    {
                                        player.experience += 40;
                                    }
                                    player.fame += 1;
                                }
                                quests.manOfThePeopleCompletionStyle = "barracano";
                                quests.manOfThePeopleQuest = "complete";

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "boarArmour")
                                    {
                                        coinzHit = i;
                                        break;
                                    }
                                }

                                if (coinzHit > -1)
                                {
                                    Inventory[coinzHit][1] += 1;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("boarArmour", false, false), 1])
                                }
                                player.nirwadenFaction -= 215;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            if (player.hunger < 35)
                            {
                                setMsg("Yes, here is your portion.");
                            }
                            else if (player.thirst < 16)
                            {
                                setMsg("No, but you look thirsty so here's a pint of water.");
                            }
                            else
                            {
                                setMsg("No, it is not.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.hunger < 35)
                                {
                                    var coinzHit = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "bearMeat")
                                        {
                                            coinzHit = i;
                                            break;
                                        }
                                    }

                                    if (coinzHit > -1)
                                    {
                                        Inventory[coinzHit][1] += 1;
                                    }
                                    else
                                    {
                                        Inventory.unshift([new Item("bearMeat", false, false), 1])
                                    }

                                    var coinzHit = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "harstAle")
                                        {
                                            coinzHit = i;
                                            break;
                                        }
                                    }

                                    if (coinzHit > -1)
                                    {
                                        Inventory[coinzHit][1] += 1;
                                    }
                                    else
                                    {
                                        Inventory.unshift([new Item("harstAle", false, false), 1])
                                    }
                                }
                                else if (player.thirst < 16)
                                {
                                    var coinzHit = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "waterPintGlass")
                                        {
                                            coinzHit = i;
                                            break;
                                        }
                                    }

                                    if (coinzHit > -1)
                                    {
                                        Inventory[coinzHit][1] += 1;
                                    }
                                    else
                                    {
                                        Inventory.unshift([new Item("waterPintGlass", false, false), 1])
                                    }
                                }
                                else
                                {
                                    setMsg("No, it is not.");
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("Good work! I will make sure to allocate this where it is needed.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHitz = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 50)
                                    {
                                        coinzHitz = i;
                                    }
                                }
                                if (coinzHitz > -1)
                                {
                                    if (Inventory[coinzHitz][1] == 50)
                                    {
                                        Inventory.splice(coinzHitz, 1);
                                    }
                                    else
                                    {
                                        Inventory[coinzHitz][1] -= 50;
                                    }
                                }

                                quests.manOfThePeopleTrusted += 1;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            setMsg("I believe I can entrust you with something, yes. There is a break away group that used to be pledged to me... they tired of justice and have resorted to raping and pillaging so as to make more personal gain. Kill the leader of this breakaway group who goes by the name of Raldo the Long. Trust me, he gave himself that name. When you have slain the outlaw report back to me.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.breakawaysQuest = true;
                                quests.activeQuests.push({name: "Breakaways", description: "Some former members of the Barracanos have branched off to loot and pillage... kill their leader Raldo the Long."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0i")
                        {
                            //text dialogue
                            setMsg("You have proven yourself to be a valuable member of this band, and so I hereby grant you this knightly blade.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.breakawaysCompletionStyle = true;
                                quests.breakawaysQuest = "complete";
                                quests.completeQuests.push({name: "Breakaways", description: "You disbanded the breakaway band of outlaws who were sullying the name of Ser Barraco Kein's cause with their vile actions."});
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 40;
                                }
                                else
                                {
                                    player.experience += 100;
                                }
                                player.fame += 1;

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "estoc")
                                    {
                                        coinzHit = i;
                                        break;
                                    }
                                }

                                if (coinzHit > -1)
                                {
                                    Inventory[coinzHit][1] += 1;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("estoc", false, false), 1])
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0j")
                        {
                            //text dialogue
                            if (player.gender == "Female" && player.level <= 5)
                            {
                                setMsg("[laughs] My sweet lady, I assure you that you will be collecting nothing here. Go on now, waddle back home to your husband and kids... end this fool's errand!");
                            }
                            else
                            {
                                setMsg("Very well... I would not dishonour you by siccing my men at you... when you came all this way to challenge me. I will fight you alone, but do not expect any mercy from me, this is a duel to the death. I can not have my cause challenged.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.gender != "Female" || player.level > 5)
                                {
                                    self.ID = "arena5";
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0k")
                        {
                            //text dialogue
                            setMsg("I lament the loss of my wife... but it is the very empire that my cause is meant to fight against that would have people killed for the actions of their relatives or loved ones. If I simply submitted to the empire's demands, that cause would die... And who could guarantee that the empire would have spared my wife if I had turned myself in? They likely would have killed her either way. At least this way I am alive to fight for justice so that her death will not be in vain.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Hidalgo Eduardo the Commissioner" || conversationID[0] == "Eduardo")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Eduardo";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello, Hidalgo.", false, "a"], ["Are there any active bounties?", false, "b"], ["When will the next matador show be?", false, "c"], ["I would like to test my brawn in the arena as a matador.", false, "d"]];
                                if (quests.manOfThePeopleQuest == true && uniqueChars.barracoLDS == true)
                                {
                                    player.dialogueOptions.unshift(["Where can I find this brigand you call Barraco Kein?", false, "e"]);
                                }
                                if (quests.manOfThePeopleQuest == true && uniqueChars.barracoLDS == false)
                                {
                                    player.dialogueOptions.unshift(["I have slain the infamous bandit chieftain Barraco Kein.", false, "f"]);
                                }
                                if (quests.manOfThePeopleQuest == true && quests.manOfThePeopleSlain >= 1)
                                {
                                    player.dialogueOptions.unshift(["I killed " + quests.manOfThePeopleSlain + " of Barraco Kein's men.", false, "g"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (quests.manOfThePeopleQuest == "complete" && quests.manOfThePeopleCompletionStyle == "killedKein")
                            {
                                setMsg("I am glad to see you. I can not thank you enough for killing that scum Barraco Kein... May my sister rest easier in eternity knowing that her vile monster of a husband is dead.");
                            }
                            else
                            {
                                setMsg("Be direct. Tell me what you need.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (quests.manOfThePeopleQuest == true)
                            {
                                setMsg("None other than the one you are already working on...");
                            }
                            else if (quests.manOfThePeopleQuest == "complete" || quests.manOfThePeopleQuest == false && uniqueChars.barraco == false)
                            {
                                setMsg("No, there are not.");
                            }
                            else
                            {
                                setMsg("Only one. A former knight named Barraco Kein turned against the crown and decided to start up a gang. He raids wealthy merchants and nobles as they travel north to Atalin... So, if you are going to hunt this one down I must warn you, the reason this bounty is still active is because Barraco slew the entire squadron of soldiers we sent to aprehend him. He is a beast, not a man... I have to admit I want him dead more than anyone else. I knew that fool before he betrayed the imperial crown. He was married to my sister... but now... now because of him she was burnt at the pyre... They would have spared her if that beast had turned himself in. As I see it... That brigand Barraco Kein killed her himself. So... if you take on this bounty... and live, I will pay you double. Half from my own expense.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (quests.manOfThePeopleQuest == true)
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else if (quests.manOfThePeopleQuest == "complete")
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (timeOfDay == "Day" || timeOfDay == "Dawn")
                            {
                                setMsg("There is one starting just now.");
                            }
                            else
                            {
                                setMsg("The next show will start on the morrow.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                dialogueReset(self);
                                msgReset();

                                if (timeOfDay == "Day" || timeOfDay == "Dawn")
                                {
                                    player.blinded = true;
                                    player.blindedStoreTime = new Date().getTime();
                                    player.blindedTime = 1;
                                    change = "matador";
                                    if (player.title == "Royalty" && player.raceName == "Nirwaden" || player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        X = -45048;
                                        Y = 2754;
                                    }
                                    else
                                    {
                                        X = -45210;
                                        Y = 2189;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (player.nirwadenFaction >= 225 || player.title == "Nobility" || player.title == "Highfolk" || player.title == "Royalty")
                            {
                                if (timeOfDay == "Day" || timeOfDay == "Dawn")
                                {
                                    setMsg("Of course! Enter, brave challenger!");
                                }
                                else
                                {
                                    setMsg("I'm afraid you can not, not until tommorrow that is.");
                                }
                            }
                            else
                            {
                                setMsg("Not just anyone is allowed to fight in the arena... You have to earn recognition in the Nirwaden Empire, and clearly you have not...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                dialogueReset(self);
                                msgReset();

                                if (player.nirwadenFaction >= 225 || player.title == "Nobility" || player.title == "Highfolk" || player.title == "Royalty")
                                {
                                    if (timeOfDay == "Day" || timeOfDay == "Dawn")
                                    {
                                        player.blinded = true;
                                        player.blindedStoreTime = new Date().getTime();
                                        player.blindedTime = 1;
                                        change = "matar";
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("The last I heard from scouts was that he and his men are camped south of here. Be careful, he is a ruthless one that Kein...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("You actually did it... you are a force to be reckoned with! Wow! I can't believe it... you have brought my sister's murderer to justice. As I promised here are the 300 coins from the bounty, the 10 coins owed for each of his men, and 300 more from my own savings. This is worth it. I hope to see you around.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        coinzHit = i;
                                        break;
                                    }
                                }

                                if (coinzHit > -1)
                                {
                                    Inventory[coinzHit][1] += 600 + 10 * quests.manOfThePeopleSlain;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), 600 + 10 * quests.manOfThePeopleSlain])
                                }
                                player.nirwadenFaction += quests.manOfThePeopleSlain;
                                quests.manOfThePeopleSlain = 0;

                                quests.manOfThePeopleCompletionStyle = "killedKein";
                                quests.manOfThePeopleQuest = "complete";
                                quests.completeQuests.push({name: "Man of the People", description: "You slayed Ser Barraco Kein, the knightly leader of a band of outlaws that stole from the rich and gave to the poor... more or less."});
                                player.nirwadenFaction += 40;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 150;
                                }
                                else
                                {
                                    player.experience += 225;
                                }
                                player.fame += 1;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("You killed, " + quests.manOfThePeopleSlain + " of Barraco Kein's men, and I will pay you the listed price at 10 coins a head, which makes " + (quests.manOfThePeopleSlain * 10) + " coins.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        coinzHit = i;
                                        break;
                                    }
                                }

                                if (coinzHit > -1)
                                {
                                    Inventory[coinzHit][1] += 10 * quests.manOfThePeopleSlain;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), 10 * quests.manOfThePeopleSlain])
                                }
                                player.nirwadenFaction += quests.manOfThePeopleSlain;
                                quests.manOfThePeopleSlain = 0;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["This bounty sounds too difficult...", false, "a"], ["I'll do it... [BOUNTY: Barraco Kein, 300 coins, wanted dead, will pay 10 coins for each of his men] (you will get 600 coins for killing Kein)", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("That's what I thought... No one in their right mind would choose to cross blades with that demon.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Remember, I will pay you double, that means you will get 600 coins if you can kill Barraco Kein. If you have anymore questions feel free to ask... Also, keep in mind, if you find Barraco too much trouble you can always just start by killing his men. I wish you the best of luck! May the spirit everlasting give you the strength to put this coward in the dirt once and for all.");
                            quests.manOfThePeopleQuest = true;
                            quests.activeQuests.push({name: "Man of the People", description: "You took a bounty out to kill a one Barraco Kein and his men. He is said to be extremely dangerous..."});

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Ebaro" || conversationID[0] == "Ebaro")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Ebaro";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hi there...", false, "a"], ["What are you up to?", false, "a"], ["Are you okay?", false, "a"]];
                                if (quests.aFairyInBoysClothingQuest == true)
                                {
                                    player.dialogueOptions.unshift(["Begone changeling! Leave this boy's corpse and return to the terrible void from which you came!!!", false, "a"]);
                                }
                                if (quests.aFairyInBoysClothingNatalia == true)
                                {
                                    player.dialogueOptions.push(["[inspect his head]", false, "b"])
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("[unintelligible muttering]");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("(You notice a large scar running across the back of his head)");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingEvid = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Natalia" || conversationID[0] == "Natalia")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Natalia";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"], ["What are you up to?", false, "b"]];

                                if (quests.aFairyInBoysClothingQuest == true)
                                {
                                    player.dialogueOptions.push(["I heard you were with Ebaro before he started to change, what happened?", false, "c"])
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Hi.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Nothing, just playing by myself... I haven't had anyone to play with since my friend Ebaro stopped coming out to play.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("We were running about, and playing as we normally would... but then Ebaro tripped on a rock and hit his head on the road really hard. I held his hand and helped him get home.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Tell me the truth, were you actually playing in the woods?", false, "a"], ["Did anybody else see Ebaro fall?", false, "c"], ["How do I know you are not lying to me?", false, "b"], ["You liar, tell me the truth!!", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("No, I swear we didn't go there...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("I'm not a liar... If you don't believe me, go ask my dad.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingNatalia = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("My dad was there, he saw it happen too.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingNatalia = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }

                    }

                    if (self.ID == "Giomardo" || conversationID[0] == "Giomardo")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Giomardo";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["Tell me about talin", false, "b"]];
                                if (quests.aFairyInBoysClothingNatalia == true && quests.aFairyInBoysClothingQuest == true)
                                {
                                    if (player.inquisitionRank != "none")
                                    {
                                        player.dialogueOptions.unshift(["I need to speak with you regarding your daughter, Natalia.", false, "c"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.unshift(["Your daughter told me that you saw her friend fall and hit his head, is this true?", false, "c"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Good day.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.raceName != "Nirwaden")
                            {
                                if (quests.atalinArmyEnhanced == true)
                                {
                                    setMsg("Your excellency, I am glad that you asked... you have done a perfect job solving the city's crime problem. Crime is like a thing of the past, now.");
                                }
                                else
                                {
                                    setMsg("talin is a wonder, so long as you stay out of the slums... You didn't hear it from me, but, Atalin is sort of a dangerous place to live if you don't have much in the way of coin. It is hard to raise a daughter here... I worry for her every day.");
                                }
                            }
                            else
                            {
                                setMsg("talin is a wonder, so long as you stay out of the slums... You didn't hear it from me, but, Atalin is sort of a dangerous place to live if you don't have much in the way of coin. It is hard to raise a daughter here... I worry for her every day.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (player.inquisitionRank == "none")
                            {
                                setMsg("Yeah, I saw him fall. I was bringing the kids something to drink when it happened. He got back up afterwards though so I thought he was probably okay.");
                            }
                            else
                            {
                                setMsg("She's not in trouble is she, Inquisitor?");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.inquisitionRank == "none")
                                {
                                    quests.aFairyInBoysClothingFall = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["No, she is not. Now, tell me, did you see your daughter's friend fall and hit his head when they were playing some time ago?", false, "a"], ["Your daughter claims that, you saw her friend fall and hit his head when they were playing. Is this the truth?", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("Yes, I was there at the time. They were close to home and I went out to get them some water to drink when I saw the boy tripped - The children were running about carelessly, you see - It looked like it hurt; his head was bleeding a little bit... but boys have to be able to tough things out if they want to be strong men when they grow up.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingFall = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Elma" || conversationID[0] == "Elma")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Elma";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.aFairyInBoysClothingRude == false)
                                {
                                    player.dialogueOptions = [["Hello.", false, "a"]];
                                    if (quests.aFairyInBoysClothingPayed == true && uniqueChars.ebaroLDS == false)
                                    {
                                        player.dialogueOptions.push(["The changling is dealt with, that will be 20 coins.", false, "b"]);
                                    }
                                    else if (quests.aFairyInBoysClothingPayed == false && uniqueChars.ebaroLDS == false)
                                    {
                                        player.dialogueOptions.push(["The changling that stole your son's corpse is dead now, I killed it...", false, "c"]);
                                    }

                                    if (quests.aFairyInBoysClothingFall == true && uniqueChars.ebaroLDS == true || uniqueChars.ebaroLDS == true && quests.aFairyInBoysClothingEvid == true && quests.aFairyInBoysClothingNatalia == true)
                                    {
                                        player.dialogueOptions.push(["Your son is not a changeling...", false, "d"]);
                                    }
                                    if (quests.aFairyInBoysClothingFall == true && uniqueChars.ebaroLDS == false && quests.aFairyInBoysClothingPayed == true)
                                    {
                                        player.dialogueOptions.push(["Your son wasn't a changeling, he just fell and hit his head. But you hired me to kill him, so I did. Now give me the coin you promised and I will be on my way...", false, "e"]);
                                    }
                                    if (quests.aFairyInBoysClothingFall == true && uniqueChars.ebaroLDS == false && quests.aFairyInBoysClothingPayed == false)
                                    {
                                        player.dialogueOptions.push(["Your son wasn't a changeling, he just fell and hit his head. But you asked me to kill him, so I did.", false, "f"]);
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions = [["Hello.", false, "a"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (quests.aFairyInBoysClothingQuest == "complete" || quests.aFairyInBoysClothingQuest == true || quests.aFairyInBoysClothingRude == true)
                            {
                                if (quests.aFairyInBoysClothingRude == true)
                                {
                                    setMsg("Don't speak to me!");
                                }
                                else if (quests.aFairyInBoysClothingQuest == true && uniqueChars.ebaroLDS == true)
                                {
                                    setMsg("I can count on you, right?");
                                }
                                else
                                {
                                    setMsg("My poor boy... my poor poor boy... [crying]");
                                }
                            }
                            else if (uniqueChars.ebaroLDS == true)
                            {
                                if (quests.imaginaryFriendCompletionStyle == "savedChild")
                                {
                                    setMsg("Hey, you're the one who saved the baker's girl from a demon! Can you help me with something, I really need your help, please!!");
                                }
                                else if (player.inquisitionRank != "none")
                                {
                                    setMsg("You're of the order of the inquisition aren't you... I have a matter that you will find urgent, help me please!");
                                }
                                else if (player.fame >= 9)
                                {
                                    setMsg("I think I've heard of you before... You're good at getting hard jobs done...    I need someone like you to help me! please! I beg of you, help me!");
                                }
                                else
                                {
                                    setMsg("...Hello, I... It's... eerr... sorry, I've not slept for a while... It's hard to interact properly with people when you are this tired.");
                                }
                            }
                            else
                            {
                                setMsg("...go away!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                if (quests.aFairyInBoysClothingQuest == "complete" || quests.aFairyInBoysClothingQuest == true || quests.aFairyInBoysClothingRude == true)
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else if (quests.imaginaryFriendCompletionStyle == "savedChild" || player.inquisitionRank != "none" || player.fame >= 9)
                                {
                                    if (uniqueChars.ebaroLDS == true)
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 1;
                                        self.SC();
                                    }
                                    else
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.inquisitionRank != "none")
                            {
                                setMsg("yours is a noble profession, Inquisitor, here is your pay. Thank you... I don't know if I could've stood to live with that beast's wretched muttering any longer.");
                            }
                            else
                            {
                                setMsg("Here is the coin I promised you... Thank you for your work. If not for you I don't no if I would have retained my sanity living with that fowl creature.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        coinzHit = i;
                                        break;
                                    }
                                }

                                if (coinzHit > -1)
                                {
                                    Inventory[coinzHit][1] += 20;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), 20])
                                }

                                quests.aFairyInBoysClothingQuest = "complete";
                                if (quests.aFairyInBoysClothingFall || quests.aFairyInBoysClothingEvid == true && quests.aFairyInBoysClothingNatalia == true)
                                {
                                    quests.aFairyInBoysClothingCompletionStyle = "skepticalKillPay";
                                }
                                else
                                {
                                    quests.aFairyInBoysClothingCompletionStyle = "killPay";
                                }

                                if (quests.duendeInfestationCompletionStyle == "skepticalKillPay")
                                {
                                    quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You killed the boy for pay, despite learning that the boy had had a head injury... Better not to risk leaving a changeling alive?"});
                                }
                                else
                                {
                                    quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You killed the changeling... for a fee, of course."});
                                }
                                player.nirwadenFaction += 18;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 9;
                                }
                                else
                                {
                                    //player.magicalExperience += 0;
                                    player.experience += 85;
                                }
                                player.fame += 1;
                                if (player.inquisitionRank != "none")
                                {
                                    quests.theOrderOfTheInquisition += 1; //the inquisition guild cares about this quest and will recognize its members for completing it.
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("[cries] Bless you... you are a brave and noble soul. [sobs] ...thank you!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingQuest = "complete";
                                if (quests.aFairyInBoysClothingFall || quests.aFairyInBoysClothingEvid == true && quests.aFairyInBoysClothingNatalia == true)
                                {
                                    quests.aFairyInBoysClothingCompletionStyle = "skepticalKill";
                                }
                                else
                                {
                                    quests.aFairyInBoysClothingCompletionStyle = "kill";
                                }

                                if (quests.duendeInfestationCompletionStyle == "skepticalKillPay")
                                {
                                    quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You killed the boy, despite learning that the boy had had a head injury... Better not to risk leaving a changeling alive?"});
                                }
                                else
                                {
                                    quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You killed the changeling."});
                                }
                                player.nirwadenFaction += 22;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 20;
                                }
                                else
                                {
                                    player.magicalExperience += 1;
                                    player.experience += 100;
                                }
                                player.fame += 1;
                                if (player.inquisitionRank != "none")
                                {
                                    quests.theOrderOfTheInquisition += 1; //the inquisition guild cares about this quest and will recognize its members for completing it.
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("That creature is a changling, how else do you explain his unhuman behavior!?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("I would thank you for your services, but it is clear to me that you are demented. I know what I saw. That wasn't my son, it was a changeling. Take your your pay and never come back!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        coinzHit = i;
                                        break;
                                    }
                                }

                                if (coinzHit > -1)
                                {
                                    Inventory[coinzHit][1] += 20;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), 20])
                                }

                                quests.aFairyInBoysClothingRude = true;
                                quests.aFairyInBoysClothingQuest = "complete";
                                quests.aFairyInBoysClothingCompletionStyle = "dementedPay";
                                quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You killed the boy, despite learning that the boy's behavior was caused by a head injury, and not supernatural forces."});

                                player.nirwadenFaction -= 5;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 8;
                                }
                                else
                                {
                                    //player.magicalExperience += 0;
                                    player.experience += 70;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("I would thank you for your help, but it is clear to me that you are demented. I know what I saw. That wasn't my son, it was a changeling. Leave here and never come back!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingRude = true;
                                quests.aFairyInBoysClothingQuest = "complete";
                                quests.aFairyInBoysClothingCompletionStyle = "demented";
                                quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You killed the boy, despite learning that the boy's behavior was caused by a head injury, and not supernatural forces."});

                                player.nirwadenFaction -= 8;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 10;
                                }
                                else
                                {
                                    //player.magicalExperience += 0;
                                    player.experience += 75;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What is the matter?", false, "a"], ["I'm sorry, but I can't.", false, "b"], ["Not at the moment, I am busy.", false, "b"], ["Me, help you!? Don't be preposterous.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("My son has been snatched by a changeling... that thing... that beast... he ate my boy, my poor boy... I just can't take it anymore!  I know that's not my boy. Ebaro's been acting strange for a while now, just a bit ago he was cradling himself before the wood stove rocking back and forth whispering cryptic gibberish to himself. Plus i've had nothing but bad sleep and bad dreams ever since he started acting like this... I can't bring myself to kill it, it looks too much like my poor little Ebaro. If you would be so noble as to slay it, I would be ever grateful.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingQuest = true;
                                quests.activeQuests.push({name: "A Fairy in Boy's Clothing", description: "A distressed mother claims that her son has been devoured and replaced by a changeling."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("I... for a moment I had hope that I could escape this wretched curse...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            if (player.title != "Royalty" && player.title != "Nobility" && player.title != "Highfolk")
                            {
                                setMsg("You are no greater than I am you arrogant fool! Get out!");
                            }
                            else
                            {
                                if (player.title == "Royalty")
                                {
                                    setMsg("I apologize, I've not slept well, forgive me, your excellency.");
                                }
                                else if (player.title == "Nobility")
                                {
                                    if (player.gender == "Male")
                                    {
                                        setMsg("I apologize, I've not slept well, forgive me, my lord.");
                                    }
                                    else
                                    {
                                        setMsg("I apologize, I've not slept well, forgive me, my dame.");
                                    }
                                }
                                else if (player.raceName == "Niraden")
                                {
                                    setMsg("I apologize, I've not slept well, forgive me, your hidalgoship.");
                                }
                                else
                                {
                                    if (player.gender == "Female")
                                    {
                                        setMsg("I apologize, I've not slept well, forgive me, miss.");
                                    }
                                    else
                                    {
                                        setMsg("I apologize, I've not slept well, forgive me, sir.");
                                    }
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.title != "Royalty" && player.title != "Nobility" && player.title != "Highfolk")
                                {
                                    quests.aFairyInBoysClothingRude = true;
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Why have you been losing sleep?", false, "a"], ["If I might inquire, why is it that you have been losing sleep?", false, "a"], ["Go to sleep, then.", false, "b"], ["I don't have time to talk.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("I've been having bad dreams ever since my son was snatched by that changeling... that thing... that beast... it ate my boy, my poor boy... I just can't take it anymore! Ebaro's been acting strange for a while now, just a bit ago he was cradling himself before the wood stove rocking back and forth whispering cryptic gibberish to himself. I know what you're going to say, why don't you just kill it and be done with it... but, I just can't bring myself to kill him, it looks too much like my poor little Ebaro. I know it's a lot to ask, but if you could kill the changeling living in my son's skin I would be ever grateful.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingQuest = true;
                                quests.activeQuests.push({name: "A Fairy in Boy's Clothing", description: "A distressed mother claims that her son has been devoured and replaced by a changeling."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            setMsg("The bad dreams keep me up...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            //text dialogue
                            setMsg("I'm sorry... look at me, wasting a total stranger's time with my problems...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["You are brave to seek help to rid your household of this changeling. I imagine it must be difficult for you to ask me to do this.", false, "a"], ["Slow down, tell me more. When did you first start to notice these changes?", false, "c"], ["I will kill the changling for 20 coins.", false, "f"], ["I would never harm a child.", false, "d"], ["Tell me, were you there when your son was 'eaten' as you say?", false, "e"], ["I'll look into it", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            setMsg("It is, but it must be done. This monster killed my boy... kill it, please.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            //text dialogue
                            setMsg("Thank You!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3c")
                        {
                            //text dialogue
                            setMsg("Ebaro was playing with his friend, Natalia, who lives down the road, and when he came back home he was different. I told him not to play in the woods, but the stubborn boy never did listen.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3d")
                        {
                            //text dialogue
                            setMsg("I understand your reservations, I too felt that way at first, but now I see it for what it is, it is a monster and it ate my son.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3e")
                        {
                            //text dialogue
                            setMsg("Are you accusing me of making this up!? I wish I were wrong about this... I really do, but I know a changeling when I see one. My boy probably was eaten when he was out playing with his friend, Natalia, that poor little rascal would always go out farther than he was allowed. I suspect they both got replaced by changelings while playing in the woods. I caught my boy playing in the woods before, so I know that they go out there... Natalia was such a bad influence on him. She will lie to you if you ask her... I already asked her about where they were playing... Changelings speak with a demon's tongue and they breath lies... Their entire purpose is to decieve.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3f")
                        {
                            //text dialogue
                            setMsg("Fine, I'll pay you... just kill it. Please!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingPayed = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I repeat, I will never harm a child.", false, "a"], ["When you put it that way, I guess...", false, "b"], ["I refuse to harm a child.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                        if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            //text dialogue
                            setMsg("You stubborn oaf, don't you have eyes!? Can't you see, that isn't a child! It's a beast!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingQuest = "complete";
                                quests.aFairyInBoysClothingCompletionStyle = "refusal";
                                quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You refused to even consider the possibility that the boy was actually a changeling, a fairy that kidnaps then takes the form of a child."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4b")
                        {
                            //text dialogue
                            setMsg("...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                if (quests.aFairyInBoysClothingEvid == true)
                                {
                                    player.dialogueOptions.push(["There is a scar on your son's head that matches the type of injury Natalia claimed he got from falling.", false, "b"]);
                                }
                                if (quests.aFairyInBoysClothingFall == true)
                                {
                                    player.dialogueOptions.unshift(["Your son fell and hit his head when he was playing with his friend in the street. Natalia's father told me he saw your boy fall and hit his head.", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            //text dialogue
                            setMsg("If Giomardo attests that he saw this happen I believe it... Giomardo is a good man. My poor boy, he's not a changling after all. I almost... I asked you to kill him... and you... you saved my boy. You saved my boy's life! Take this, its not much but its all I have to spare.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            //text dialogue
                            setMsg("First of all Natalia is probably a changeling herself and thus lying, and second of all it is common knowledge that changelings often have strange deformities... Your findings could just as easily prove that he is a changeling. [bothered] Are you going to quit wasting my time with false tales of hope, or are you going to help me!?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 6)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[take 27 coins] Of course!", false, "a"], ["Keep your money, I'm just glad I could help.", false, "b"], ["[take 27 coins] I'm just doing my job...", false, "a"], ["[take 27 coins] I'm happy to help.", false, "a"], ["[take 27 coins] I'm just here to help... of course, I'll be taking the coins still.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "6a")
                        {
                            //text dialogue
                            setMsg("...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        coinzHit = i;
                                        break;
                                    }
                                }

                                if (coinzHit > -1)
                                {
                                    Inventory[coinzHit][1] += 27;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), 27])
                                }

                                quests.aFairyInBoysClothingQuest = "complete";
                                quests.aFairyInBoysClothingCompletionStyle = "subGrace";
                                quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You discovered that the boy's strange behavior was due to a head injury and convinced his mother that that was the case."});
                                player.nirwadenFaction += 26;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 45;
                                }
                                else
                                {
                                    //player.magicalExperience += 0;
                                    player.experience += 97;
                                }
                                player.fame += 1;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6b")
                        {
                            //text dialogue
                            setMsg("May the spirit everlasting bless your kind heart!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFairyInBoysClothingQuest = "complete";
                                quests.aFairyInBoysClothingCompletionStyle = "grace";
                                quests.completeQuests.push({name: "A Fairy in Boy's Clothing", description: "You discovered that the boy's strange behavior was due to a head injury and convinced his mother that that was the case."});
                                player.nirwadenFaction += 29;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 50;
                                }
                                else
                                {
                                    //player.magicalExperience += 0;
                                    player.experience += 100;
                                }
                                player.fame += 1;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Vela the Baker" || conversationID[0] == "Vela")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Vela";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.imaginaryFriendCompletionStyle == "childBurnt")
                                {
                                    player.dialogueOptions = [["Hello.", false, "a"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["Greetings.", false, "a"], ["Mmmm the bread smells great!", false, "e"], ["How are you doing?", false, "b"], ["How's business?", false, "d"]];

                                    if (quests.imaginaryFriendQuest == true && uniqueChars.lelailaLDS == true)
                                    {
                                        player.dialogueOptions.push(["Have you noticed anything unusual going on around here?", false, "c"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (quests.imaginaryFriendCompletionStyle == "childBurnt")
                            {
                                setMsg("Leave my shop this instant!!!! I don't care who you are; you killed my daughter!!!!");
                            }
                            else
                            {
                                if (player.title == "Royalty")
                                {
                                    setMsg("Your excellency, what a pleasant surprise to see you here today!");
                                }
                                else if (player.title == "Nobility")
                                {
                                    if (player.gender == "Female" && player.raceName == "Nirwaden")
                                    {
                                        setMsg("My dame, what a profound honour it is to have you here in my bakery!");
                                    }
                                    if (player.gender == "Male" && player.raceName == "Nirwaden")
                                    {
                                        setMsg("My lord, what a delight it is to have you grace my bakery with your presence!");
                                    }
                                    else if (player.gender == "Female")
                                    {
                                        setMsg("Hello, your ladyship.");
                                    }
                                    else
                                    {
                                        setMsg("Hello, your lordship.");
                                    }
                                }
                                else if (player.inquisitionRank != "none" && player.inquisitionRank != "Initiate")
                                {
                                    setMsg("Hello, Inquisitor... is there something you need?");
                                }
                                else if (player.title == "Highfolk")
                                {
                                    setMsg("Hello, hidalgo, can I get you something, bread perhaps?");
                                }
                                else
                                {
                                    setMsg("Welcome to my bakery!");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (uniqueChars.lelailaLDS == true)
                            {
                                if (quests.imaginaryFriendQuest != "complete")
                                {
                                    setMsg("Not too well, the strangest things have been going on... I've misplaced my pastry knife and it's been several times that I've had to throw away good dough because I found it trampled on the floor. Also If I don't keep an eye on the bread even for the slightest moment while it is in the stove it will be burnt black when I turn back around. What's going on here is not natural I tell you...");
                                }
                                else
                                {
                                    setMsg("I'm doing great, my daughter's well, and nothing weird is going on around here anymore, thanks to you!");
                                }
                            }
                            else
                            {
                                setMsg("Not well at all, I feel so lost... Why should I live when my sweet poor innocent daughter is dead!? [tears well in her eyes but she quickly wipes them away]");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Have I ever! YES!!! I can't stand it. Things are strewn about the bakery and bread gets burnt in a matter of seconds if I don't watch it... I've been cleaning up messes almost nonstop so that the bakery would look as good as it does right now. Also when I come in to bake late at night I sometimes hear bustling as if something is in the bakery with me. To make matters worse my daughter has been acting frightening, she says horrid and frightening things that make me shudder. Little Lelaila could be behind some of the messes, but some of this stuff... sometimes I feel like my bakery is haunted or something.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (uniqueChars.lelailaLDS == true)
                            {
                                if (quests.imaginaryFriendQuest != "complete")
                                {
                                    setMsg("I'm actually losing money some days... so in other words horrible, when almost half of the dough you make is ruined almost everyday... well it is hard to make any money... I suspect my daughter is behind it. She hasn't been herself recently.");
                                }
                                else
                                {
                                    setMsg("Very well!");
                                }
                            }
                            else
                            {
                                setMsg("To tell you the truth... I've been depressed and I just haven't been baking as much as I used to. It is so hard for me here, without my daughter.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (quests.imaginaryFriendCompletionStyle == "savedChild" && uniqueChars.lelailaLDS == true && new Date().getTime() - quests.imaginaryFriendBreadTime > 1000 * 60 * 24)
                            {
                                if (quests.imaginaryFriendBreadTime == 0)
                                {
                                    setMsg("Here, please take a free loaf... it is the least I can do to repay you for ridding my bakery of that horrible demon!");
                                }
                                else
                                {
                                    setMsg("Here, please let me gift you another loaf of bread. I am ever so grateful that you saved my daughter from that terrible demon's corruption.");
                                }
                            }
                            else
                            {
                                setMsg("Thank you, I bake my bread fresh everyday!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                if (quests.imaginaryFriendCompletionStyle == "savedChild" && new Date().getTime() - quests.imaginaryFriendBreadTime > 1000 * 60 * 24)
                                {
                                    quests.imaginaryFriendBreadTime = new Date().getTime();
                                    var freeLunch = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i].type == "santhBread")
                                        {
                                            freeLunch = i;
                                            break;
                                        }
                                    }

                                    if (freeLunch > -1)
                                    {
                                        Inventory[freeLunch][1] += 1;
                                    }
                                    else
                                    {
                                        Inventory.push([new Item("santhBread", false, false), 1]);
                                    }
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Lelaila" || conversationID[0] == "Lelaila")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Lelaila";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hi there.", false, "a"], ["Hello", false, "a"], ["What do you do here?", false, "b"], ["How are you doing little one?", false, "d"]];

                                if (quests.imaginaryFriendAdopted == true)
                                {
                                    player.dialogueOptions.unshift(["Hi there sweetheart!", false, "a"])
                                }

                                if (quests.imaginaryFriendMentioned == true && uniqueChars.boggartLezarLDS == true)
                                {
                                    player.dialogueOptions.push(["Tell me more about this imaginary friend of yours...", false, "c"]);
                                }
                                if (quests.imaginaryFriendQuest == true)
                                {
                                    if (player.inquisitionRank != "none")
                                    {
                                        if (uniqueChars.boggartLezarLDS == true)
                                        {
                                            player.dialogueOptions.push(["You have given yourself unto evil and madness and will thus be cleansed at the pyre before the light of the Spirit Everlasting.", false, "e"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.push(["For consorting with demons and even stooping so low as to adopt one, you shall be burnt at the pyre. Only the Eternal Spirit can save you from the corruption in your heart.", false, "f"]);
                                        }
                                    }

                                    if (uniqueChars.boggartLezarLDS == false)
                                    {
                                        player.dialogueOptions.push(["Lezar won't be around to corrupt you any longer...", false, "g"]);
                                    }
                                }
                                else if (quests.imaginaryFriendQuest == "complete")
                                {
                                    if (uniqueChars.velaLDS == false)
                                    {
                                        if (player.raceName == "Nirwaden" && player.title == "Nobility" || quests.atalinHomeOwned == true)
                                        {
                                            if (quests.imaginaryFriendAdopted == false)
                                            {
                                                player.dialogueOptions.push(["Come live with me. I will take care of you now.", false, "h"]);
                                            }
                                        }
                                    }
                                }
                                if (quests.imaginaryFriendAdopted == true)
                                {
                                    var treatsy = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i].type == "iemaTart" || Inventory[i].type == "chonaTart" || Inventory[i].type == "polyapaTart")
                                        {
                                            treatsy = i;
                                        }
                                    }
                                    if (treatsy > -1)
                                    {
                                        player.dialogueOptions.unshift(["I brought you a treat! [give fruit tart]", false, "i"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                        else if (player.dialogueOptions[i][2] == "i")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0i";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Hi.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            var mentionz = false;
                            if (uniqueChars.boggartLezarLDS == true)
                            {
                                if (uniqueChars.velaLDS == false)
                                {
                                    setMsg("My mom's dead so I don't have to do my chores anymore... I am glad she is dead, chores suck. Lezar told me that moms are a waste of flesh and blood and that I should rely on nobody but myself. I think he's right, if my mom ever really cared about me she would just go and die. She would keep living. Lezar is the only one I can really count on.");
                                }
                                else
                                {
                                    setMsg("I help my mom with the baking and play with my friend Lezar who has four arms, he asked me to give him a name so I called him Lezar...");
                                    mentionz = true;
                                }
                            }
                            else
                            {
                                if (uniqueChars.velaLDS == false)
                                {
                                    if (quests.imaginaryFriendAdopted == true)
                                    {
                                        if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                        {
                                            if (uniqueChars.liboLDS)
                                            {
                                                setMsg("I do chores and sometimes play make believe with Libo.");
                                            }
                                            else
                                            {
                                                setMsg("I do chores mostly, but sometimes I walk around the courtyard and sing to myself.");
                                            }
                                        }
                                        else
                                        {
                                            if (quests.duendeInfestationKillCount < 9)
                                            {
                                                setMsg("I mostly play with the duendes, people say they're dangerous, but they are scared to death of me... so... I just chase them around and stuff.");
                                            }
                                            else
                                            {
                                                setMsg("I mostly just stay inside and sing songs to myself... Sometimes I open and close the drawers for fun. I don't touch your things though, it's just fun to open and close them is all.");
                                            }
                                        }
                                    }
                                    else
                                    {
                                        setMsg("I don't do anything anymore now that mom is dead and Lezar is gone...");
                                    }
                                }
                                else
                                {
                                    setMsg("I help my mom with the baking... I don't play with Lezar anymore, he's gone.");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (mentionz == true)
                                {
                                    quests.imaginaryFriendMentioned = true;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Oh, you mean Lezar? Lezar is not imaginary, he is just my friend... he tells me secrets that the grown ups don't like to talk about to kids. If I get mad at someone who is mean, Lezar says that I can cut them up and put them into the bread. I told him that he was just being silly though... Lezar likes to joke a lot. Oooh one time he told me to climb into the oven... I didn't do it though because he was just trying to play a prank on me.            I don't fall for pranks...");


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                change = "imaginaryFriend";
                                quests.imaginaryFriendQuest = true;
                                quests.activeQuests.push({name: "Imaginary Friend", description: "A little girl named Lelaila has an imaginary friend that sounds completely evil."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            if (uniqueChars.boggartLezarLDS == true)
                            {
                                setMsg("You won't think I'm so little when I chop off your legs, we'll see who's little then... [she mutters under her breath]             ...I'm good. [she says more audibly]");
                            }
                            else
                            {
                                if (uniqueChars.velaLDS == false)
                                {
                                    if (quests.imaginaryFriendAdopted == true)
                                    {
                                        if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                        {
                                            if (uniqueChars.liboLDS)
                                            {
                                                setMsg("Thanks to you and am well fed, living in a castle, and have a new friend that doesn't tell me to do evil things or try to lock me in an oven... I'm doing good...");
                                            }
                                            else
                                            {
                                                setMsg("Thanks to you and am well fed, and I'm living in a castle... I'm doing alright, I guess.");
                                            }
                                        }
                                        else
                                        {
                                            if (quests.duendeInfestationKillCount < 9)
                                            {
                                                setMsg("I'm doing alright, I guess... at least my new duende friends don't try to trick me into the oven. They're too scared of me to do that...");
                                            }
                                            else
                                            {
                                                setMsg("I feel sort of lonely here... There is no one to play with. But, I guess its better to play with nobody at all than to play with an evil boggart...");
                                            }
                                        }
                                    }
                                    else
                                    {
                                        setMsg("I miss my mom... I can't believe that Lezar made me think that I didn't need her.");
                                    }
                                }
                                else
                                {
                                    setMsg("I finally feel free now, Lezar made me feel so hateful...");
                                }
                            }
                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (player.gender == "Male")
                            {
                                setMsg("Lezar!!! Help me! Help me!!! This ugly flesh bag is trying to take me away... kill him!!!");
                            }
                            else
                            {
                                setMsg("Lezar!!! Help me! Help me!!! This ugly flesh bag is trying to take me away... kill her!!!");
                            }
                            for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                            {
                                if (ArtificialIntelligenceAccess[i].type == "Boggart" && ArtificialIntelligenceAccess[i].ID == "Lezar")
                                {
                                    ArtificialIntelligenceAccess[i].X = X;
                                    ArtificialIntelligenceAccess[i].Y = Y;
                                    ArtificialIntelligenceAccess[i].disturbed = true;
                                    ArtificialIntelligenceAccess[i].disturbedTime = new Date().getTime();
                                }
                            }


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("Please, no!! I dont want to die! I didn't mean it, I didn't mean any of it!!! It was Lezar all along, you have to believe me!!!");


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);

                                change = "pireGathering";
                                quests.doPire = true;
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                X = -46299;
                                Y = 34;
                                quests.pireVictim = "Lelaila";

                                quests.imaginaryFriendCompletionStyle = "burntChild";
                                quests.imaginaryFriendQuest = "complete";
                                quests.completeQuests.push({name: "Imaginary Friend", description: "You slayed the Boggart and cleansed the little girl who befriended it."});
                                player.nirwadenFaction += 15;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 85;
                                }
                                else
                                {
                                    player.magicalExperience += 21;
                                    player.experience += 135;
                                }
                                player.fame += 1;
                                if (player.inquisitionRank != "none")
                                {
                                    quests.theOrderOfTheInquisition += 1; //the inquisition guild cares about this quest and will recognize its members for completing it.
                                }

                                for (var i = ArtificialIntelligenceAccess.length - 1; i >= 0; i--)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Lelaila")
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("You saved me!! Thank you! I feel free again, Lezar was always watching me... always watching, he would whisper things to me... he made me think thoughts that weren't mine, and say things that he wanted to say, that I would never say. He made me hate everyone... but now that Lezar is gone I can finally be me again!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.imaginaryFriendCompletionStyle = "savedChild";
                                quests.imaginaryFriendQuest = "complete";
                                quests.completeQuests.push({name: "Imaginary Friend", description: "You slayed the bakery Boggart and in doing so saved a little girl from its corrupting influence."});
                                player.nirwadenFaction += 25;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 75;
                                }
                                else
                                {
                                    player.magicalExperience += 16;
                                    player.experience += 120;
                                }
                                player.fame += 1;
                                if (player.inquisitionRank != "none")
                                {
                                    quests.theOrderOfTheInquisition += 1; //the inquisition guild cares about this quest and will recognize its members for completing it.
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            setMsg("Okay, I guess I'll live with you... Thank you.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.imaginaryFriendAdopted = true;
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                for (var i = ArtificialIntelligenceAccess.length - 1; i >= 0; i--)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Lelaila")
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0i")
                        {
                            //text dialogue
                            setMsg("Yay, I love pastry tarts!!! Thank you so much! ");


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var treatsy = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i].type == "iemaTart" || Inventory[i].type == "chonaTart" || Inventory[i].type == "polyapaTart")
                                    {
                                        treatsy = i;
                                    }
                                }
                                if (treatsy > -1)
                                {
                                    if (Inventory[treatsy][1] > 1)
                                    {
                                        Inventory[treatsy][1] -= 1;
                                    }
                                    else
                                    {
                                        Inventory.splice(treatsy, 1);
                                    }
                                }

                                quests.imaginaryFriendAdopted = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Hidalgo Lucelius" || conversationID[0] == "Lucelius")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Lucelius";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["What does your title Hidalgo mean?", false, "b"]];

                                if (quests.duendeInfestationQuest == false)
                                {
                                    if (timeOfDay == "Night" || timeOfDay == "Dusk")
                                    {
                                        player.dialogueOptions.push(["What brings you out drinking this night?", false, "c"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.push(["What brings you out drinking today?", false, "c"]);
                                    }
                                }
                                if (quests.duendeInfestationQuest == false || quests.duendeInfestationQuest == "complete")
                                {
                                    if (quests.atalinHomeOwned == false && quests.duendeInfestationKillCount >= 9)
                                    {
                                        player.dialogueOptions.push(["Can I buy the house you put up for sale?", false, "d"]);
                                    }
                                }
                                if (quests.duendeInfestationKillCount >= 9 && quests.atalinHomeOwned == false && quests.duendeInfestationQuest == true)
                                {
                                    player.dialogueOptions.push(["I have slain the duendes that were infesting your house...", false, "e"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (quests.duendeInfestationQuest == false)
                            {
                                setMsg("Not for me it's not.");
                            }
                            else
                            {
                                setMsg("It is, a wonderful day I might add!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                if (quests.duendeInfestationQuest == false)
                                {
                                    conversationID[1] = 1;
                                }
                                else
                                {
                                    conversationID[1] = 0;
                                }
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("It is a rank of nobility in the Nirwaden Empire... I am more important than an ordinary person, but less important than a lord. And I definitely don't compare in stature whatsoever to a high lord or the Empress.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I shouldn't waste your time with my troubles.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Why of course you can. I will part with it for 18000 coins, which is not a negotiable price... Mine is one of the best homes in the city. Besides Altezor Castle, that is.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (quests.duendeInfestationPay > 0)
                            {
                                setMsg("Good work, here is the coin we agreed upon.");
                            }
                            else
                            {
                                setMsg("That is excellent news! Thank you so much!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (quests.duendeInfestationPay > 0)
                                {
                                    var coinzHit = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins")
                                        {
                                            coinzHit = i;
                                            break;
                                        }
                                    }

                                    if (coinzHit > -1)
                                    {
                                        Inventory[coinzHit][1] += quests.duendeInfestationPay;
                                    }
                                    else
                                    {
                                        Inventory.unshift([new Item("coins", false, false), quests.duendeInfestationPay])
                                    }
                                    quests.duendeInfestationCompletionStyle = "payed";
                                }
                                else
                                {
                                    quests.duendeInfestationCompletionStyle = "free";
                                }

                                quests.duendeInfestationQuest = "complete";
                                if (quests.duendeInfestationCompletionStyle == "payed")
                                {
                                    quests.completeQuests.push({name: "Duende Infestation", description: "You killed the duendes that were infesting the hidalgo's home as a contracted job paid in coin of gold."});
                                }
                                else
                                {
                                    quests.completeQuests.push({name: "Duende Infestation", description: "You killed the duendes that were infesting the hidalgo's home out of the sheer goodness of your heart."});
                                }
                                player.nirwadenFaction += 30;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 120;
                                }
                                else
                                {
                                    player.magicalExperience += 30;
                                    player.experience += 170;
                                }
                                player.fame += 1;
                                if (player.inquisitionRank != "none")
                                {
                                    quests.theOrderOfTheInquisition += 1; //the inquisition guild cares about this quest and will recognize its members for completing it.
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What's wrong?", false, "a"]];
                                var hasBeer = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "santhAle")
                                    {
                                        hasBeer = i;
                                    }
                                }
                                if (hasBeer != -1)
                                {
                                    player.dialogueOptions.push(["I know what will cheer you up! An ice cold glass of Santh Ale... [give 1 santh ale]", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("I shouldn't waste your time with my troubles.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Wow, thanks! It's not everyday a total stranger buys you beer. However, my troubles are economic in nature and what is at stake for me is much more than the cost of a beer. I've been trying to sell my house, but royal policy requires that I tell all potential buyers that my house is infested with duendes, they usually turn tail after hearing that.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var hasBeer = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "santhAle")
                                    {
                                        hasBeer = i;
                                    }
                                }
                                if (hasBeer != -1)
                                {
                                    if (Inventory[hasBeer][1] > 1)
                                    {
                                        Inventory[hasBeer][1] -= 1;
                                    }
                                    else
                                    {
                                        Inventory.splice(hasBeer, 1);
                                    }
                                    quests.duendeInfestationKindness = true;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good man!", false, "a"], ["You're right, I wasn't actually that interested in hearing about other people's problems.", false, "a"], ["I want to know...", false, "b"], ["I'm here for you, tell me what's on your mind.", false, "b"], ["Tell me, my interest is peaked.", false, "b"], ["You make a good point! Drinking is for drowning out our problems, not dumping them on strangers...", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("[...]");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            setMsg("I've been trying to sell my house, but royal policy requires that I tell all potential buyers that my house is infested with duendes, they usually turn tail after hearing that.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Wow, that's too bad.", false, "b"], ["What are duendes?", false, "a"], ["I will buy the house off you, for a discount price of course...", false, "e"]];

                                if (player.raceName == "Nirwaden" && player.title == "Nobility" || player.raceName == "Nirwaden" && player.title == "Royalty")
                                {
                                    player.dialogueOptions.unshift(["I could send some of the city guard to clear out the house for you.", false, "c"]);
                                    if (player.title == "Royalty")
                                    {
                                        player.dialogueOptions.push(["I could grant you an exception this once good sir: I hearby grant you permission to sell your house without telling the buyer about the duende infestation.", false, "f"]);
                                    }
                                }
                                player.dialogueOptions.push(["Perhaps I could kill the duendes for you.", false, "d"]);
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            setMsg("They are a fowl type of fairy that infests people's homes. They are violent and rather dangerous as well, you see, it is genuinely unsafe for the buyer to purchase the estate.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            //text dialogue
                            setMsg("It really is... The house is worth 18000 coins and I can neither live in it nor sell it. I am ruined...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3c")
                        {
                            //text dialogue
                            if (player.title == "Royalty")
                            {
                                setMsg("You are too kind, your majesty. Thank you so much!");
                            }
                            else
                            {
                                if (player.gender == "Male")
                                {
                                    setMsg("You are too kind, my lord. Thank you so much!");
                                }
                                else
                                {
                                    setMsg("You are too kind, my dame. Thank you so much!");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                quests.duendeInfestationCompletionStyle = "guards";
                                quests.duendeInfestationQuest = "complete";
                                quests.duendeInfestationKillCount = 9;

                                quests.completeQuests.push({name: "Duende Infestation", description: "You ordered some soldiers to deal with a duende infestation in the home of a local Hidalgo."});

                                player.nirwadenFaction += 20;
                                if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                {
                                    player.magicalExperience += 10;
                                    player.experience += 25;
                                }
                                else
                                {
                                    player.experience += 50;
                                }

                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3d")
                        {
                            //text dialogue
                            setMsg("Are you serious, you would really do that for me?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3e")
                        {
                            //text dialogue
                            setMsg("You will!? You would risk your life for a discount?! Alright then, how does 14000 coins sound to you? I would normally be selling it for 18000 so I would say that that's a pretty good deal.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 7;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3f")
                        {
                            //text dialogue
                            setMsg("Thank you, your majesty, I am in your debt!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.duendeInfestationCompletionStyle = "royalException";
                                quests.duendeInfestationQuest = "complete";
                                quests.completeQuests.push({name: "Duende Infestation", description: "You gave the hidalgo whose home was infested, permission to sell it anyway."});
                                quests.atalinHomeOwned = "aiPurchased";
                                player.nirwadenFaction += 5;
                                player.experience += 10;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Provided that you pay me, yes.", false, "a"], ["Of course, just tell me where your house is...", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            //text dialogue
                            setMsg("Oh, eh, how does 110 coins sound to you?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4b")
                        {
                            //text dialogue
                            setMsg("Its just southwest of here. It is the only house for sale right now so it shouldn't be too hard for you to find.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.duendeInfestationQuest = true;
                                quests.activeQuests.push({name: "Duende Infestation", description: "A Hidalgo's home in talin City has been infested by duendes, you offered to help clear them out."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Sounds good to me.", false, "a"]];

                                if (player.inquisitionRank != "none")
                                {
                                    player.dialogueOptions.push(["I am of the order of the inquisition, do not insult me with such a pathetic offer, I will work for no less than 250 coins.", false, "b"]);
                                }

                                if (player.getCharisma() >= 20)
                                {
                                    player.dialogueOptions.push(["Your house will make a you a fat bag of gold when you sell it, pay me 300 coins and I'll make that posssible.", false, "d"]);
                                }
                                else if (quests.duendeInfestationKindness || player.getCharisma() >= 10)
                                {
                                    player.dialogueOptions.push(["make it 170 and you got yourself a deal", false, "c"]);
                                }

                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            //text dialogue
                            setMsg("Then we have a deal!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.duendeInfestationPay = 110;
                                quests.duendeInfestationQuest = true;
                                quests.activeQuests.push({name: "Duende Infestation", description: "A Hidalgo's home in talin City has been infested by duendes, you offered to clear them out for a fee."});


                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            //text dialogue
                            setMsg("I didn't mean to offend... Of course that sounds reasonable!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.duendeInfestationPay = 250;
                                quests.duendeInfestationQuest = true;
                                quests.activeQuests.push({name: "Duende Infestation", description: "A Hidalgo's home in talin City has been infested by duendes, you offered to clear them out for a fee."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5c")
                        {
                            //text dialogue
                            setMsg("Its a deal.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.duendeInfestationPay = 170;
                                quests.duendeInfestationQuest = true;
                                quests.activeQuests.push({name: "Duende Infestation", description: "A Hidalgo's home in talin City has been infested by duendes, you offered to clear them out for a fee."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5d")
                        {
                            //text dialogue
                            setMsg("Fine, I'll pay you 300.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.duendeInfestationPay = 300;
                                quests.duendeInfestationQuest = true;
                                quests.activeQuests.push({name: "Duende Infestation", description: "A Hidalgo's home in talin City has been infested by duendes, you offered to clear them out for a fee."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 6)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Nevermind.", false, "b"]];

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 18000)
                                    {
                                        coinzHit = i;
                                    }
                                }
                                if (coinzHit > -1)
                                {
                                    player.dialogueOptions.unshift(["I'll take it!", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.unshift(["I can't afford that right now, maybe later.", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "6a")
                        {
                            //text dialogue
                            setMsg("Excellent!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 18000)
                                    {
                                        coinzHit = i;
                                    }
                                }
                                if (coinzHit > -1)
                                {
                                    if (Inventory[coinzHit][1] == 18000)
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    else
                                    {
                                        Inventory[coinzHit][1] -= 18000;
                                    }
                                    quests.atalinHomeOwned = true;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6b")
                        {
                            //text dialogue
                            setMsg("I'll be here...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 7)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Nevermind", false, "c"]];

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 13000)
                                    {
                                        coinzHit = i;
                                    }
                                }
                                if (coinzHit > -1)
                                {
                                    if (player.getCharisma() >= 25)
                                    {

                                    }
                                    else if ((player.getCharisma() >= 5))
                                    {
                                        player.dialogueOptions.unshift(["As you said, I am risking in purchasing your house, so you ought to sell me it for 13000 coins.", false, "d"]);
                                    }
                                }

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 11000)
                                    {
                                        coinzHit = i;
                                    }
                                }
                                if (coinzHit > -1)
                                {
                                    if (player.getCharisma() >= 25)
                                    {
                                        player.dialogueOptions.unshift(["As you said, I am risking my life making the generous gesture of buying your house, so how about you sell me it for 11000 coins.", false, "b"]);
                                    }
                                    else if ((player.getCharisma() >= 5))
                                    {

                                    }
                                }

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 14000)
                                    {
                                        coinzHit = i;
                                    }
                                }
                                if (coinzHit > -1)
                                {
                                    player.dialogueOptions.unshift(["I'll take it!", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.unshift(["I can't afford that right now, maybe later.", false, "c"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "7a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "7b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "7c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "7d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "7a")
                        {
                            //text dialogue
                            setMsg("A pleasure doing business with you!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 14000)
                                    {
                                        coinzHit = i;
                                    }
                                }
                                if (coinzHit > -1)
                                {
                                    if (Inventory[coinzHit][1] == 14000)
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    else
                                    {
                                        Inventory[coinzHit][1] -= 14000;
                                    }
                                    quests.atalinHomeOwned = true;

                                    quests.duendeInfestationCompletionStyle = "purchasedHouse";
                                    quests.duendeInfestationQuest = "complete";
                                    quests.completeQuests.push({name: "Duende Infestation", description: "You purchased the duende infested house at a discount price. Now it's your problem."});

                                    player.nirwadenFaction += 10;
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 20;
                                    }
                                    else
                                    {
                                        player.experience += 60;
                                    }
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "7b")
                        {
                            //text dialogue
                            setMsg("A pleasure doing business with you!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 11000)
                                    {
                                        coinzHit = i;
                                    }
                                }
                                if (coinzHit > -1)
                                {
                                    if (Inventory[coinzHit][1] == 11000)
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    else
                                    {
                                        Inventory[coinzHit][1] -= 11000;
                                    }
                                    quests.atalinHomeOwned = true;

                                    quests.duendeInfestationCompletionStyle = "purchasedHouse";
                                    quests.duendeInfestationQuest = "complete";
                                    quests.completeQuests.push({name: "Duende Infestation", description: "You purchased the duende infested house at a discount price. Now it's your problem."});

                                    player.nirwadenFaction += 10;
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 20;
                                    }
                                    else
                                    {
                                        player.experience += 60;
                                    }
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "7c")
                        {
                            //text dialogue
                            setMsg("I'll be here...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "7d")
                        {
                            //text dialogue
                            setMsg("A pleasure doing business with you!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 13000)
                                    {
                                        coinzHit = i;
                                    }
                                }
                                if (coinzHit > -1)
                                {
                                    if (Inventory[coinzHit][1] == 13000)
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    else
                                    {
                                        Inventory[coinzHit][1] -= 13000;
                                    }
                                    quests.atalinHomeOwned = true;

                                    quests.duendeInfestationCompletionStyle = "purchasedHouse";
                                    quests.duendeInfestationQuest = "complete";
                                    quests.completeQuests.push({name: "Duende Infestation", description: "You purchased the duende infested house at a discount price. Now it's your problem."});

                                    player.nirwadenFaction += 10;
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 20;
                                    }
                                    else
                                    {
                                        player.experience += 60;
                                    }
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "High Dame Emylia Altezor" || conversationID[0] == "Emylia")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Emylia";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.aFeastForFewerQuest == true)
                                {
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        player.dialogueOptions = [["What happened?!", false, "a"], ["Are you okay, mom!?", false, "b"], ["Are you okay, mother!?", false, "b"], ["Do you know of anybody who would have wanted to harm father?", false, "c"], ["I'm glad that you are safe...", false, "d"]];
                                    }
                                    else
                                    {
                                        if (player.title == "Royalty")
                                        {
                                            player.dialogueOptions = [["What happened here?", false, "a"], ["Do you know of anybody who would have wanted to hurt your husband?", false, "c"]];
                                        }
                                        else
                                        {
                                            player.dialogueOptions = [["What happened here, your highness?", false, "a"], ["Do you know of anybody who would have wanted to hurt your husband, your highness?", false, "c"]];
                                        }
                                    }
                                }
                                else
                                {
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        player.dialogueOptions = [["Hello.", false, "a"], ["I love you!", false, "b"], ["How are you?", false, "c"], ["Do you miss your father's family, mother?", false, "d"], ["Do you miss your father's family, mom?", false, "d"]];
                                    }
                                    else
                                    {
                                        if (player.title == "Royalty")
                                        {
                                            player.dialogueOptions = [["Greetings.", false, "a"], ["I wish you a bountiful harvest and joy all year round!", false, "b"], ["Your dress looks absolutely dashing.", false, "c"], ["You look as lovely as a rare flower, your highness.", false, "c"], ["Fair thee well.", false, "d"]];
                                        }
                                        else
                                        {
                                            if (quests.emyliaOffended != true)
                                            {
                                                player.dialogueOptions = [["Hello, your highness.", false, "a"], ["Is there anything you can do about the bandit problem in the countryside or the rampant crime in Atalin, your highness?", false, "b"], ["Thank you for ruling Atalin so justly, your highness.", false, "c"], ["Fair well, your highness.", false, "d"], ["Perhaps if you spent as much money dealing with Atalin's crime problem as you do on your appearance, this city would be a decent place to live... with respect, your highness.", false, "b"]];
                                            }
                                            else
                                            {
                                                player.dialogueOptions = [["Hello, your highness.", false, "a"]];
                                            }
                                        }
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {

                            //text dialogue
                            if (quests.aFeastForFewerQuest == true)
                            {
                                if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    setMsg("Oh my sweet child, it's terrible!!! Your father has been poisoned! He collapsed in a violent fit of illness. It is so hard to be faithful during such trying times... but this is when we must rely on our faith the most.");
                                }
                                else
                                {
                                    if (player.title == "Royalty")
                                    {
                                        setMsg("My husband was poisoned, your grace! He's been murdered!! [she weeps dramatically]");
                                    }
                                    else
                                    {
                                        setMsg("What does it look like you imbecil!? My husband has been poisoned!!! [she weeps dramatically]");
                                    }
                                }
                            }
                            else
                            {
                                if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    if (player.gender == "Female")
                                    {
                                        setMsg("Hello, my sweet daughter.");
                                    }
                                    else
                                    {
                                        setMsg("Hello, my sweet boy.");
                                    }
                                }
                                else
                                {
                                    if (player.title == "Royalty")
                                    {
                                        setMsg("Why Hello, your excellency.");
                                    }
                                    else
                                    {
                                        if (quests.emyliaOffended != true)
                                        {
                                            setMsg("Hello there, what brings you to conference with me... do tell.");
                                        }
                                        else
                                        {
                                            setMsg("Leave this castle you brute; you are lucky to leave with your head!!! Raging fool! [she huffs angrily]");
                                        }
                                    }
                                }
                            }


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (quests.aFeastForFewerQuest == true)
                            {
                                if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    setMsg("Do I look okay!? [she puts her hand to her face in a show of dismay to emphasize her sadness]");
                                }
                            }
                            else
                            {
                                if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    if (player.gender == "Male")
                                    {
                                        setMsg("You know I love you too, my handsome little darling.");
                                    }
                                    else
                                    {
                                        setMsg("You know I love you too, my pretty little darling.");
                                    }
                                }
                                else
                                {
                                    if (player.title == "Royalty")
                                    {
                                        setMsg("You are too kind!");
                                    }
                                    else
                                    {
                                        setMsg("You are a brutish fool to suggest that this lovely city or the bountiful countryside surrounding it is anything less than perfect. Leave here at once!");
                                        quests.emyliaOffended = true;
                                    }
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (quests.aFeastForFewerQuest == true)
                            {
                                if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    setMsg("Your father had as many enemies as there were cruel people in the world. Your father was a great man, and cruel people resent great men.");
                                }
                                else
                                {
                                    if (player.title == "Royalty")
                                    {
                                        setMsg("Perhaps the cook, your grace. She is always so ungrateful.");
                                    }
                                    else
                                    {
                                        setMsg("Perhaps the cook... She is always so ungrateful.");
                                    }
                                }
                            }
                            else
                            {
                                if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    setMsg("By the light of the Spirit Everlasting I am aging well and am in good health.");
                                }
                                else
                                {
                                    if (player.title == "Royalty")
                                    {
                                        setMsg("I'm flattered!");
                                    }
                                    else
                                    {
                                        if (quests.emyliaOffended != true)
                                        {
                                            if (uniqueChars.basilioAltezorLDS == true)
                                            {
                                                setMsg("Well, I don't really rule anything. But I do occasionally whisper some good ideas to my husband.");
                                            }
                                            else
                                            {
                                                setMsg("Yes, it is not as easy as I make it look. It takes patience and wisdom.");
                                            }
                                        }
                                    }
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (quests.aFeastForFewerQuest == true)
                            {
                                if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    setMsg("I'm glad that you dallied, who knows if you were meant to be poisoned too... That wretched cook!!");
                                }
                            }
                            else
                            {
                                if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    setMsg("No, it is my responsibility to rid myself of vane oversensitive feelings, leaving my family to marry your father was my duty. I do not regret doing my duty, that would be absurd!!");
                                }
                                else
                                {
                                    if (player.title == "Royalty")
                                    {
                                        setMsg("Until we meet again, your grace.");
                                    }
                                    else
                                    {
                                        if (quests.emyliaOffended != true)
                                        {
                                            setMsg("Ta ta... now go waste some other person's time. [in a hushed voice but loud enough to hear]");
                                        }
                                    }
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Lailiona" || conversationID[0] == "Lailiona")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Lailiona";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.aFeastForFewerQuest == true)
                                {
                                    message = "[Lailiona is sobbing uncontrollably]";
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        player.dialogueOptions.unshift(["Are you okay, Lailiona?!", false, "a"]);
                                        player.dialogueOptions.unshift(["I will get justice for father, I promise.", false, "a"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.unshift(["I will avenge your father's death, I promise!", false, "a"]);
                                    }
                                }
                                else
                                {
                                    if (quests.atalinTeshirAnnexed == true && quests.atalinSisterJarl == true)
                                    {
                                        if (player.gender == "Female")
                                        {
                                            player.dialogueOptions.unshift(["Tell me about your experience as the Dame of Teshir, Lailiona.", false, "g"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.unshift(["How is governing going for you, or is mother doing most everything for you still?", false, "g"]);
                                        }
                                        if (player.gender == "Female")
                                        {
                                            player.dialogueOptions.unshift(["Let us pray for Teshir, Lailiona, for prosperity, happiness, and bountiful faith in the Everlasting Spirit.", false, "e"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.unshift(["Let's pray that these northmen know how to farm and trade as well as they can brew mead... otherwise this purchase will have been for not.", false, "e"]);
                                        }
                                    }
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        if (player.gender == "Female")
                                        {
                                            player.dialogueOptions.unshift(["Hello there, sister!", false, "h"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.unshift(["Hello, my beautiful little sister.", false, "h"]);
                                        }
                                        if (player.gender == "Female")
                                        {
                                            player.dialogueOptions.unshift(["Are you enjoying yourself, Lailiona?", false, "f"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.unshift(["How are you fairing, my lovely little sister?", false, "f"]);
                                        }

                                        if (player.gender == "Female")
                                        {
                                            player.dialogueOptions.unshift(["Have you had any fun today, Lailiona?", false, "d"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.unshift(["Have you said your prayers yet, sister?", false, "d"]);
                                        }

                                        if (player.gender == "Female")
                                        {
                                            player.dialogueOptions.unshift(["I love you, sister!", false, "c"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.unshift(["Try not to slouch so much, you'll not find a husband if you act with such poor manners.", false, "c"]);
                                        }

                                        if (quests.atalinTeshirAnnexed == true && quests.atalinSisterJarl == false)
                                        {
                                            if (player.gender == "Female")
                                            {
                                                player.dialogueOptions.push(["Lailiona, I want you to be the Dame of Teshir. You'll get your very own longhouse and be in charge of all of those queer northern folk over there... It will be fun! And mama will even go with you!", false, "b"]);
                                            }
                                            else
                                            {
                                                player.dialogueOptions.push(["Lailiona, I need you to be the Dame of Teshir, now that it is under our house's control. Mother will go with you to watch over you and help you govern the stubborn northern folk.", false, "b"]);
                                            }
                                        }
                                    }
                                    else
                                    {
                                        player.dialogueOptions.unshift(["Hi there.", false, "h"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("[she looks up at you with a tear streaked face and continues to sob uncontrollably]");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue

                            if (player.gender == "Female")
                            {
                                setMsg("Okay, sister, I will go. I love you so much!! I will miss you!");
                            }
                            else
                            {
                                setMsg("I will go... [begins to cry quietly]");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();

                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                change = "departure";
                                quests.atalinSisterJarl = true;

                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                setMsg("I love you too! You're so beautiful, sister, I wish I were just like you...");
                            }
                            else
                            {
                                setMsg("Okay, I won't, brother...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                if (quests.atalinSisterJarl == true)
                                {
                                    setMsg("I've been too busy to play much, but I did run around the pretty flower in the garden a little bit.");
                                }
                                else
                                {
                                    setMsg("Yeah, I was playing in the courtyard, and there was a big dragon! It said mean words and I told it no... just no.");
                                }
                            }
                            else
                            {
                                if (quests.atalinSisterJarl == true)
                                {
                                    setMsg("Yes, I say my prayers everyday. The Eternal Spirit keeps me safe from the heretics...");
                                }
                                else
                                {
                                    setMsg("No, not yet... I was playing make believe.");
                                }
                            }


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                setMsg("[in unison] May the Eternal Spirit bless this city with prosperous times, happiness, and unyielding faith.");
                            }
                            else
                            {
                                setMsg("Not all of the Freydic people are bad, brother. Only the Heritics, and I pray everyday that they join us in the light of the Everlasting Spirit.");
                            }


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            if (player.gender == "Female")
                            {
                                player.dialogueOptions.unshift(["Are you enjoying yourself, Lailiona?", false, "f"]);
                            }
                            else
                            {
                                player.dialogueOptions.unshift(["How are you fairing, my lovely little sister?", false, "f"]);
                            }
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                if (quests.atalinSisterJarl == true)
                                {
                                    if (uniqueChars.emyliaLDS == true)
                                    {
                                        setMsg("I like it here a lot, sister... but I do really miss being at home with you.");
                                    }
                                    else
                                    {
                                        setMsg("I'm lonely, I want to go back home, sister. [cries softly]");
                                    }
                                }
                                else
                                {
                                    setMsg("Yeah, the tart I just ate was very tasty!");
                                }
                            }
                            else
                            {
                                if (quests.atalinSisterJarl == true)
                                {
                                    setMsg("Well... [a soft and forlorn sigh follows her faint voiced lie]");
                                }
                                else
                                {
                                    setMsg("I am well, brother.");
                                }
                            }


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {

                            if (player.gender == "Female")
                            {
                                player.dialogueOptions.unshift(["Tell me about your experience as the Dame of Teshir, Lailiona.", false, "g"]);
                            }
                            else
                            {
                                player.dialogueOptions.unshift(["How is governing going for you, or is mother doing most everything for you still?", false, "g"]);
                            }
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                setMsg("I wave to the people when they come and ask for stuff. I sometimes get sort of shy though...");
                            }
                            else
                            {
                                setMsg("...I, um, I wave to people and say hello to the supplicants, but mom does do most of it for me...");
                            }


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            setMsg("Hello.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Mechelo the Steward" || conversationID[0] == "Mechelo")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Mechelo";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.aFeastForFewerQuest == true)
                                {
                                    player.dialogueOptions = [["What do you know about this?", false, "f"]];
                                }
                                else
                                {
                                    if (uniqueChars.basilioAltezorLDS == false && player.title == "Nobility" && player.raceName == "Nirwaden")
                                    {
                                        player.dialogueOptions = [["I would like to host a Tournament.", false, "b"]];

                                        if (quests.teshirConverted == false)
                                        {
                                            player.dialogueOptions.push(["I would like to promote the church to send missionaries to Teshir to spread the faith of the Everlasting Spirit.", false, "d"]);
                                        }

                                        if (quests.atalinTeshirAnnexed == false)
                                        {
                                            if (uniqueChars.OrjovTorLDS == true)
                                            {
                                                player.dialogueOptions.push(["I would like the jarl of Teshir to die in a hunting accident so that the city will be without a noble heir.", false, "e"]);
                                            }
                                            player.dialogueOptions.push(["I would like to send an envoy to the kingdom of Freynor to inquire into purchasing their southern most city of Teshir.", false, "a"]);

                                        }
                                        else
                                        {
                                            player.dialogueOptions.push(["I would like to send some soldiers to Teshir to collect the taxes I am owed from their jarl.", false, "c"]);
                                        }
                                    }
                                    else
                                    {
                                        player.dialogueOptions = [["What do you do?", false, "f"]];
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            var buyYes = false;
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 400000)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I'm sorry, my dame, but you cannot afford to to make a viable offer it should cost you 400,000 coins.");
                                }
                                else
                                {
                                    setMsg("I'm sorry, my Lord, but you cannot afford to to make a viable offer it should cost you 400,000 coins.");
                                }
                            }
                            else
                            {
                                if (uniqueChars.OrjovTorLDS == true || player.freynorFaction <= -50)
                                {
                                    if (uniqueChars.OrjovTorLDS == true)
                                    {
                                        setMsg("The king of Teshir has responded! He finds it... mmmhhmm... errr his words, not mine... he finds it 'barbaric' to assume that he would sell a holding that he has entrusted to a Jarl.");
                                    }
                                    else
                                    {
                                        setMsg("The king of Teshir has responded! He says that... eeerr well he says that you are a... oh just read it for yourself: ... you are a despicable person... I would not even sell you a an axe to hunt with...");
                                    }
                                }
                                else
                                {
                                    if (quests.teshirConverted != true)
                                    {
                                        if (Math.random() > 0.66)
                                        {
                                            setMsg("The king of Teshir has responded! He will sell you Teshir.");
                                            buyYes = true;
                                        }
                                        else
                                        {
                                            setMsg("The king of Teshir has responded! Unfortunately, he will not part with Teshir because he fears that its inhabitants would be unhappy living under a different faith. Bloody Heretical oaf of a king they have...");
                                        }
                                    }
                                    else
                                    {
                                        setMsg("The king of Teshir has responded! He will happily sell you Teshir, he has been hoping to find a way to keep Teshir's new religion away from the rest of his holdings.");
                                        buyYes = true;
                                    }
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (buyYes == true)
                                {
                                    if (coinzHit != -1)
                                    {
                                        if (Inventory[coinzHit][1] > 400000)
                                        {
                                            Inventory[coinzHit][1] -= 400000;
                                        }
                                        else
                                        {
                                            Inventory.splice(coinzHit, 1);
                                        }
                                        quests.atalinTeshirAnnexed = true;
                                    }
                                }
                                sleeperTime += (60 * 60 * 24 * 180);
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 25000)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I'm sorry, my dame, but you cannot afford to host a tournament.");
                                }
                                else
                                {
                                    setMsg("I'm sorry, my Lord, but you cannot afford to host a tournament.");
                                }
                            }
                            else
                            {
                                setMsg("Oooh I can't wait till the tournament happens, it is going to be great for our finances because people are going to come from all around the empire to compete!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (coinzHit != -1)
                                {
                                    if (Inventory[coinzHit][1] > 25000)
                                    {
                                        Inventory[coinzHit][1] -= 25000;
                                    }
                                    else
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    quests.atalinTourny += 1;
                                    player.nirwadenFaction += 25;
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("The soldiers came back with " + quests.teshirTaxes + " coins that they merged with the taxes from Atalin. You can pick up the taxes from the tax officiated as always.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                quests.atalinTaxes += quests.teshirTaxes;
                                quests.teshirTaxes = 0;
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 18000)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I'm sorry, my dame, but you cannot afford to fund the missionary movement.");
                                }
                                else
                                {
                                    setMsg("I'm sorry, my Lord, but you cannot afford to fund the missionary movement.");
                                }
                            }
                            else
                            {
                                setMsg("It is wonderful that you are such a big supporter of the faith!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (coinzHit != -1)
                                {
                                    if (Inventory[coinzHit][1] > 18000)
                                    {
                                        Inventory[coinzHit][1] -= 18000;
                                    }
                                    else
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    quests.teshirConverted = true;
                                    player.nirwadenFaction += 200;
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 3000)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I'm sorry, my dame, but you cannot afford it right now.");
                                }
                                else
                                {
                                    setMsg("I'm sorry, my Lord, but you cannot afford it right now.");
                                }
                            }
                            else
                            {
                                setMsg("You are ambitious... I think that can be arranged, I'll ask around. Just a warning, whoever we hire isn't necessarily going to succeed. Let us ask the Eternal Spirit for luck.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (coinzHit != -1)
                                {
                                    if (Inventory[coinzHit][1] > 3000)
                                    {
                                        Inventory[coinzHit][1] -= 3000;
                                    }
                                    else
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    if (Math.random() > 0.3)
                                    {
                                        alert("A report came in that the Jarl of Teshir went hunting up north and supposedly froze to death.");
                                        uniqueChars.OrjovTorLDS = false;
                                    }
                                    else
                                    {
                                        if (Math.random() > 0.78)
                                        {
                                            alert("The assassin you sent to kill the Jarl of Teshir was caught and ratted you out as his employer. This doesn't bode well for you at all...");
                                            player.freynorFaction -= 600;
                                            player.nirwadenFaction -= 300;
                                            player.fame += 3;
                                            quests.retaliation = true;
                                        }
                                        else
                                        {
                                            alert("You hear news that an assassin was killed when he ambushed the Jarl of Teshir during a hunt.");
                                        }
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            if (quests.aFeastForFewerQuest == true)
                            {
                                //text dialogue
                                setMsg("I, I... I can't believe he's dead!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("I am the steward, I help the regent manage their political and economic affairs.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Belgos the Disgraced" || self.ID == "Belgos" || conversationID[0] == "Belgos" && quests.aFeastForFewerBelgos == "disgraced" || conversationID[0] == "Belgos" && quests.aFeastForFewerBelgos == "forgiven")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Belgos";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        if (conversationID[1] == "0k")
                        {
                            conversationID[1] = 0;
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Tell me what you have learnt in your pennance.", false, "b"], ["How can I cleave to the Eternal Spirit?", false, "c"], ["I forgive you, I hope you find an honourable path in your worship of the most divine and eternal spirit", false, "d"]];

                                if (quests.aFeastForFewerBelgos == "disgraced")
                                {
                                    player.dialogueOptions.unshift(["You became a priest...", false, "a"]);
                                    if (player.title == "Nobility" && player.raceName == "Nirwaden")
                                    {
                                        player.dialogueOptions.push(["I forgive you, I hope you find an honourable path in your worship of the most divine and eternal spirit", false, "d"], ["I forgive you for the incompetence that led to your dismissal, will you rejoin me in my noble court?", false, "e"]);
                                    }
                                    else if (player.title == "Royalty" && player.raceName == "Nirwaden")
                                    {
                                        player.dialogueOptions.push(["I forgive you, I hope you find an honourable path in your worship of the most divine and eternal spirit", false, "d"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Yes, I will not be forgiven for my grand incompetence without giving myself fully to the eternal spirit.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Trust is a dangerous value when it is placed on humanity, one cannot expect truth to sprout from that which is not divine, after all. The only one we can all truly trust is the Eternal Spirit. And its holy messengers, of course...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Everytime you are confronted with a decision, think this: am I doing this for myself, or am I serving divinity and light? If what you do is always to serve divinity you will find the Eternal Spirit within yourself. If you focus your attentions only on yourself, you will find not but the void.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("You are noble to tell me such words, I am certain that the Eternal Spirit will bring us all honour and divine peace.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFeastForFewerBelgos = "forgiven";
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Belgos the Disgraced")
                                    {
                                        ArtificialIntelligenceAccess[i].ID = "Belgos";
                                    }
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (quests.aFeastForFewerQuest != "complete")
                            {
                                setMsg("You are noble to make such an offer. Unfortunately I must refuse it, the only one who can truly bring me forgiveness is the Everlasting Spirit.");
                            }
                            else
                            {
                                setMsg("I am overjoyed that you have found it in yourself to forgive my incompetence and bring me back into your court to be with those whom I know and love and whom I would protect with my life!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                if (quests.aFeastForFewerQuest == "complete")
                                {
                                    quests.aFeastForFewerBelgos = true;
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Belgos the Disgraced")
                                        {
                                            ArtificialIntelligenceAccess[i].ID = "Belgos of Atalin";
                                        }
                                    }
                                }
                                else
                                {
                                    quests.aFeastForFewerBelgos = "forgiven";
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Belgos the Disgraced")
                                        {
                                            ArtificialIntelligenceAccess[i].ID = "Belgos";
                                        }
                                    }
                                }

                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Ser Belgos of Atalin" || conversationID[0] == "Belgos" && quests.aFeastForFewerBelgos != "disgraced" && quests.aFeastForFewerBelgos != "forgiven")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Belgos";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.aFeastForFewerQuest == true)
                                {
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        player.dialogueOptions = [["What happened!?", false, "e"], ["What will happen now?", false, "g"]]; //["Have the cook who poisoned my father burnt at the pyre!", false, "h"]
                                        if (quests.aFeastForFewerBelgos == true)
                                        {
                                            player.dialogueOptions.unshift(["You recruited the man who is likely behind the poisoning. What do you have to say for yourself.", false, "h"]);
                                        }
                                        else if (quests.aFeastForFewerBelgos == "evidence")
                                        {
                                            player.dialogueOptions.unshift(["You must have used your power as master of arms to convince your newly recruited soldier to commit treason!", false, "j"], ["Ser Belgos of Atalin, Master of Arms and once honourable knight, I hereby indict you for high treason against the Nirwaden Empire, surrender your arms.", false, "i"], ["You have demonstrated incompetence by letting a murderer join the ranks. Thusly you will be removed from your post and stripped of your title.", false, "k"], ["You recruited the man who is likely behind the poisoning. What do you have to say for yourself.", false, "h"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.push(["Who is behind this treason!?", false, "f"]);
                                        }
                                    }
                                    else if (player.raceName == "Nirwaden" && player.title == "Royalty")
                                    {
                                        player.dialogueOptions = [["Tell me what happened here!", false, "e"], ["Who will rule in High Lord Altezor's Stead?", false, "g"]]; //["Have the cook who poisoned the high lord burnt at the pyre!", false, "h"]
                                        if (quests.aFeastForFewerBelgos == true)
                                        {
                                            player.dialogueOptions.unshift(["You recruited the man who is likely behind the poisoning. What do you have to say for yourself.", false, "h"]);
                                        }
                                        else if (quests.aFeastForFewerBelgos == "evidence")
                                        {
                                            player.dialogueOptions.unshift(["You must have used your power as master of arms to convince your newly recruited soldier to commit treason!", false, "j"], ["Ser Belgos of Atalin, Master of Arms and once honourable knight, I hereby indict you for high treason against the Nirwaden Empire, surrender your armaments.", false, "i"], ["You have demonstrated incompetence by letting a murderer join the ranks. Thusly you will be removed from your post and stripped of your title.", false, "k"], ["You recruited the man who is likely behind the poisoning. What do you have to say for yourself.", false, "h"]);
                                        }
                                        else
                                        {
                                            player.dialogueOptions.push(["Who is behind this treason!?", false, "f"]);
                                        }
                                    }
                                    else
                                    {
                                        player.dialogueOptions = [["What happened here?", false, "e"], ["What happened here? Is that... the lord of Atalin?", false, "e"], ["What will happen now that the lord is dead?", false, "g"]];
                                        if (quests.aFeastForFewerBelgos == true)
                                        {
                                            player.dialogueOptions.unshift(["You recruited the man who is likely behind the poisoning. What do you have to say for yourself.", false, "h"]);
                                        }
                                        else if (quests.aFeastForFewerBelgos == "evidence")
                                        {
                                            if (player.inquisitionRank != "none" && player.inquisitionRank != "Initiate")
                                            {
                                                player.dialogueOptions.unshift(["You recruited the man who is likely behind the poisoning. What do you have to say for yourself.", false, "h"], ["You must have used your power as master of arms to convince your newly recruited soldier to commit treason!", false, "j"], ["Ser Belgos of Atalin, Master of Arms and once honourable knight, I hereby indict you for high treason against the Nirwaden Empire, surrender your armaments.", false, "i"])
                                            }
                                            else
                                            {
                                                player.dialogueOptions.unshift(["You recruited the man who is likely behind the poisoning. What do you have to say for yourself.", false, "h"], ["You must have used your power as master of arms to convince your newly recruited soldier to commit treason!", false, "j"], ["I plan to recommend that you be brought to justice for conspiring to murder the high lord by using new recruits as pawns to carry out your treachery...", false, "l"]);
                                            }
                                        }
                                        else
                                        {
                                            player.dialogueOptions.push(["Do you know who is behind this?", false, "f"]);
                                        }
                                    }
                                }
                                else
                                {
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        if (uniqueChars.basilioAltezorLDS == true)
                                        {
                                            player.dialogueOptions = [["Good day.", false, "a"], ["Tell me about yourself.", false, "b"], ["So my father knighted you...", false, "m"]];
                                        }
                                        else
                                        {
                                            player.dialogueOptions = [["Good day.", false, "a"], ["Tell me about yourself.", false, "b"], ["I would like to discuss my troops.", false, "c"], ["Can you offer me council...", false, "d"]];
                                        }
                                    }
                                    else if (player.raceName == "Nirwaden" && player.title == "Royalty")
                                    {
                                        player.dialogueOptions = [["Good day.", false, "a"], ["Tell me about yourself.", false, "b"]];
                                    }
                                    else
                                    {
                                        player.dialogueOptions = [["Good day, Sir.", false, "a"], ["What do you do around here?", false, "b"], ["Who are you exactly?", false, "b"]];
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                        else if (player.dialogueOptions[i][2] == "i")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0i";
                                        }
                                        else if (player.dialogueOptions[i][2] == "j")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0j";
                                        }
                                        else if (player.dialogueOptions[i][2] == "k")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0k";
                                        }
                                        else if (player.dialogueOptions[i][2] == "l")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0l";
                                        }
                                        else if (player.dialogueOptions[i][2] == "m")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0m";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                if (player.gender == "Male")
                                {
                                    setMsg("And good day to you, my lord.");
                                }
                                else
                                {
                                    setMsg("And good day to you, my dame.");
                                }
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Royalty")
                            {
                                setMsg("It's a lovely day indeed, your highness!");
                            }
                            else if (player.inquisitionRank != "none" && player.inquisitionRank != "Initiate")
                            {
                                setMsg("Good day, " + player.inquisitionRank+ ".");
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Highfolk")
                            {
                                setMsg("Good day, hidalgo.");
                            }
                            else if (player.title == "Royalty" || player.title == "Nobility")
                            {
                                setMsg("Good day, your grace.");
                            }
                            else
                            {
                                setMsg("Good day.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                setMsg("I am a knight of Atalin, knighted by your father, and I am the Master of Arms as well. My duties involve recruiting soldiers, and managing large troop movements so that you and your family can worry about everyday politics rather than the minutia of military upkeep. I also guard you and your family to keep you safe from danger.");
                            }
                            else
                            {
                                setMsg("I am a knight of Atalin, and the Master of Arms for the house of Altezor. My duties involve recruiting soldiers, and managing large troop movements... I also guard the Noble family of house Altezor to keep them safe from danger.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Of course, what would you like me to do?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Ask what is on your mind...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                setMsg("His excellency your father was poisoned. It came on so suddenly nobody knew what could be done. One moment he was fine and the next he began to choke, his face went pale and he began to spew blood and bile from his mouth. I wish I could have done domething, anything, to save your father from such a wretched demise.");
                            }
                            else
                            {
                                setMsg("His excellency the high lord of Atalin was poisoned. It came on so suddenly nobody knew what could be done. One moment he was fine and the next he began to choke, his face went pale and he began to spew blood and bile from his mouth. If only there were something I could have done to save his lordship from such a wretched demise.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                setMsg("I suspect the cook is behind it, as she often complains and sometimes has a temper. She is the only one with a reason to do something like this, within these castle walls that is, and she is the only one with access to your father's food.");
                            }
                            else
                            {
                                setMsg("I suspect the cook is behind it, as she often complains and sometimes has a temper. She is the only one with a reason to do something like this, within these castle walls that is, and she is the only one with access to his lordship's food.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                setMsg("I know this is an utter tragedy and it is a lot to take in, but you are your father's heir, so now that he is dead the burden of Ruling talin and the lands surrounding her falls upon you.");
                            }
                            else
                            {
                                if (uniqueChars.emyliaLDS == true && uniqueChars.lailionaLDS == true)
                                {
                                    setMsg("The High Dame Emylia will rule Atalin until his lordship's daughter Lailiona comes of age.");
                                }
                                else if (uniqueChars.emyliaLDS == true && uniqueChars.lailionaLDS == false)
                                {
                                    setMsg("The High Dame Emylia will rule Atalin until his lordship's daughter Lailiona comes of age.");
                                }
                                else if (uniqueChars.emyliaLDS == false && uniqueChars.lailionaLDS == true)
                                {
                                    if (uniqueChars.emmanuelLDS)
                                    {
                                        setMsg("His lordship's daughter, Lailiona, the new High Dame of Atalin will rule despite her young age, but with my direct oversight and council, and with the occasional council and moral teachings of the local Bishop, Emmanuel.");
                                    }
                                    else
                                    {
                                        setMsg("His lordship's daughter, Lailiona, the new High Dame of Atalin will rule despite her young age, but with my direct oversight and council. Unfortunately the local Bishop has died and will not be able to provide the spiritual council she will require, so I will make sure to put out an inquiry to the church that our city will need a new Bishop.");
                                    }
                                }
                                else
                                {
                                    setMsg("As the High Lord Altezor and his entire family are passed away, I will act as regent until the Empress has made her intentions for Atalin clear.");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("My dame, I am shocked to hear that the culprit was a soldier I hired in your father's name... I feel most ashamed for such a drastic failure to screen the recruits I hire. Punish me for my incompetence if you will, but I assure you, " + player.name + ", that I had no part in this nefarious plot.");
                                }
                                else
                                {
                                    setMsg("My lord, I am shocked to hear that the culprit was a soldier I hired in your father's name... I feel most ashamed for such a drastic failure to screen the recruits I hire. Punish me for my incompetence if you will, but I assure you, " + player.name + ", that I had no part in this nefarious plot.");
                                }
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Royalty" || player.inquisitionRank != "none" && player.inquisitionRank != "Initiate")
                            {
                                setMsg("I am shocked to hear that the culprit was a soldier I hired in the Altezor name... I feel most ashamed for such a drastic failure to screen the recruits I hire. Punish me for my incompetence if you will, but I assure you that I had no part in this nefarious plot.");
                            }
                            else
                            {
                                setMsg("I am shocked to hear that the culprit was a soldier I hired in the Altezor name... I feel most ashamed for such a drastic failure to screen the recruits I hire. I will accept the punishment I am owed with grace and honour, but I must be clear with you that I had no part in this nefarious plot.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFeastForFewerBelgos = "evidence";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0i")
                        {
                            //text dialogue
                            setMsg("You know not the horrific injustice you commit by sentencing me. I am innocent of this crime. I am innocent!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);

                                change = "pireGathering";
                                quests.doPire = true;
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                X = -46299;
                                Y = 34;
                                quests.pireVictim = "Belgos";
                                quests.aFeastForFewerBelgos = true;
                                for (var i = ArtificialIntelligenceAccess.length - 1; i >= 0; i--)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Ser Belgos of Atalin")
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0j")
                        {
                            //text dialogue
                            setMsg("It is true that I hired the man who committed the crime, but your suggestion of a plot or a conspiracy to arrange a poisoning for some malevolent means is simply not. My only sin is that of trusting a man in my charge not to commit a foul crime, I loved High Lord Altezor and would never wish him harm!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0k")
                        {
                            //text dialogue
                            setMsg("I deserve this punishment, I am so ashamed and sorry that I have failed you to this extent...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                quests.aFeastForFewerBelgos = "disgraced";
                                dialogueReset(self);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();

                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Ser Belgos of Atalin")
                                    {
                                        ArtificialIntelligenceAccess[i].ID = "Belgos the Disgraced One";
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0l")
                        {
                            //text dialogue
                            if (player.title == "Royalty" && player.nirwadenFaction >= 0 || player.title == "Nobility" && player.nirwadenFaction >= 0 || player.getCharisma >= 30 && player.nirwadenFaction >= 0)
                            {
                                setMsg("You know not the injustice you commit against me, so I forgive you and will willingly submit to any higher authorities that wish to see me punished for a crime I have not committed. I will not let human ignorance deprive me of my honour... only life.");
                            }
                            else
                            {
                                setMsg("First of all the accusation you level against me is untrue, and second, nobody would take your word over mine on this matter because I have not given a soul a reason to doubt my integrity and honour.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                if (player.title == "Royalty" && player.nirwadenFaction >= 0 || player.title == "Nobility" && player.nirwadenFaction >= 0 || player.getCharisma >= 30 && player.nirwadenFaction >= 0)
                                {
                                    dialogueReset(self);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                    player.blinded = true;
                                    player.blindedStoreTime = new Date().getTime();
                                    player.blindedTime = 1;
                                    uniqueChars.belgosLDS = false;
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Ser Belgos of Atalin")
                                        {
                                            ArtificialIntelligenceAccess[i].X = 999999999999;
                                            ArtificialIntelligenceAccess[i].Y = 999999999999;
                                        }
                                    }
                                    quests.aFeastForFewerCompletionStyle = "knightFramed";
                                    quests.aFeastForFewerQuest = "complete";
                                    quests.completeQuests.push({name: "A Feast for Fewer", description: "You convinced those remaining in power that the Knight and Master of Arms Ser Belgos was ultimately behind the assassination of the High Lord of Atalin."});
                                    player.nirwadenFaction += 60;
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 65;
                                    }
                                    else
                                    {
                                        player.experience += 220;
                                    }
                                    player.fame += 2;
                                }
                                else
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0m")
                        {
                            //text dialogue
                            setMsg("Yes. Your father knighted me. I was raised the son of one of the lords under your father and served as a squire for many years fighting the Aldrekii hordes. Unfortunately the knight I served with was struck in the thigh with an arrow. The injury was lethal, so I was forced to carry on without him towards the great southern city Salaza. I fought alongside your father's own forces and together we took the city. After the feasting your father sent for me and Knighted me right then and there. I owe your father for everything I am today.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I would like to expand my army in Atalin.", false, "a"], ["I would like to more thoroughly protect the countryside.", false, "b"], ["That is all for now.", false, "f"]];
                                if (quests.atalinEmpressWarPermission == true)
                                {
                                    if (quests.atalinTownShip == false)
                                    {
                                        player.dialogueOptions.push(["Send troops westward to establish a township in the Kellish Planes.", false, "c"]);
                                    }
                                    if (quests.atalinCalcuttConquered == false && quests.atalinRaidingParty == true || quests.atalinCalcuttConquered == "failure" && quests.atalinRaidingParty == true)
                                    {
                                        player.dialogueOptions.push(["Send troops to conquer Calcutt village, burn their primitive huts and replace them with real homes.", false, "d"]);
                                    }
                                    if (quests.atalinRaidingParty == false)
                                    {
                                        player.dialogueOptions.push(["I want to develop an army meant for raiding and warring.", false, "e"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            if (Math.random >= 0.8)
                                            {
                                                quests.atalinRaidingParty = false;
                                            }
                                            conversationID[1] = "1d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 35000)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I'm sorry, my dame, but you cannot afford to do that.");
                                }
                                else
                                {
                                    setMsg("I'm sorry, my Lord, but you cannot afford to do that.");
                                }
                            }
                            else
                            {
                                setMsg("Now crime will have no place in Atalin, your new soldier's will make sure of that.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (coinzHit != -1)
                                {
                                    if (Inventory[coinzHit][1] > 35000)
                                    {
                                        Inventory[coinzHit][1] -= 35000;
                                    }
                                    else
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    quests.atalinArmyEnhanced = true;
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 40000)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I'm sorry, my dame, but you cannot afford to do that.");
                                }
                                else
                                {
                                    setMsg("I'm sorry, my Lord, but you cannot afford to do that.");
                                }
                            }
                            else
                            {
                                setMsg("Now crime will have no place in the northern countryside, your new soldier's will make sure of that.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (coinzHit != -1)
                                {
                                    if (Inventory[coinzHit][1] > 40000)
                                    {
                                        Inventory[coinzHit][1] -= 40000;
                                    }
                                    else
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    quests.atalinCampoProtected = true;
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 100000)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I'm sorry, my dame, but you cannot afford to do that.");
                                }
                                else
                                {
                                    setMsg("I'm sorry, my Lord, but you cannot afford to do that.");
                                }
                            }
                            else
                            {
                                setMsg("We finally have the opportunity to expand our economy and our faith! This is going to be wonderful!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (coinzHit != -1)
                                {
                                    if (Inventory[coinzHit][1] > 100000)
                                    {
                                        Inventory[coinzHit][1] -= 100000;
                                    }
                                    else
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    quests.atalinTownShip = true;
                                    quests.atalinTownShipName = prompt("What will this new Nirwaden controlled town to the west be called?");
                                    sleeperTime += (60 * 60 * 24 * 300);
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1d")
                        {
                            //text dialogue
                            if (quests.atalinRaidingParty == false)
                            {
                                if (player.gender == "Male")
                                {
                                    setMsg("My lord, a courier from the west has reported that the Echlin tribe were able to pull together aid from surrounding kellish tribes and defeat our forces.");
                                }
                                else
                                {
                                    setMsg("My dame, a courier from the west has reported that the Echlin tribe were able to pull together aid from surrounding kellish tribes and defeat our forces.");
                                }
                            }
                            else
                            {
                                if (player.gender == "Male")
                                {
                                    setMsg("My lord, a courier from the west has reported that our forces have defeated the echlin tribe's forces at Calcutt, Calcutt is yours.");
                                }
                                else
                                {
                                    setMsg("My dame, a courier from the west has reported that our forces have defeated the echlin tribe's forces at Calcutt, Calcutt is yours.");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                if (quests.atalinRaidingParty == false)
                                {
                                    quests.atalinCalcuttConquered = "failure";
                                }
                                else
                                {
                                    quests.atalinCalcuttConquered = true;
                                }
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                sleeperTime += (60 * 60 * 24 * 14);
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1e")
                        {
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 15000)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I'm sorry, my dame, but you cannot afford to do that.");
                                }
                                else
                                {
                                    setMsg("I'm sorry, my Lord, but you cannot afford to do that.");
                                }
                            }
                            else
                            {
                                setMsg("With this new army talin's glory and faith can expand westward!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (coinzHit != -1)
                                {
                                    if (Inventory[coinzHit][1] > 15000)
                                    {
                                        Inventory[coinzHit][1] -= 15000;
                                    }
                                    else
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    quests.atalinRaidingParty = true;
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1f")
                        {
                            setMsg("Serving you has been my pleasure!");


                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["How do I get the money I need to rule my lands?", false, "a"], ["What do you believe is the most important thing I should focus on.", false, "b"], ["How often should I host tournaments?", false, "c"], ["How do I promote the economy?", false, "d"], ["That should be all for now.", false, "e"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("The tax officiator is in charge of the tax collectors if you speak with them you can ask for the taxes, as the money is owed to your family.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            if (quests.atalinArmyEnhanced == false)
                            {
                                setMsg("I reccommend that you focus your political efforts on keeping crime away from the wealthy districts that support the regional economy. Ideally you would stop crime in all of the districts, but I more than anyone understands how busy your soldiers are with the duties they already have.");
                            }
                            else if (quests.atalinEmpressWarPermission == false)
                            {
                                setMsg("Since you seem to have a good stance against crime with your enhanced army, I reccomend considering the possibility of expanding your territory into the kellish plains. This would of course involve convincing the empress that Nirwaden would be best suited by expanding westward. I can have a courier ask her if you like...");
                            }
                            else
                            {
                                setMsg("Now that you have built up your power, I recommend that you focus on yourself, that is, go to church, be seen, do things that will endear you to your people even more...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                if (quests.atalinArmyEnhanced != false && quests.atalinEmpressWarPermission == false)
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                                else
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            //text dialogue
                            setMsg("If you want your coffers to stay at a healthy amount, I recommend perhaps holding only one a year. Tournaments are fun and they bring you attention and commerce in the long run. But you will lose money if you have them too often. Trust me, I spoke with the treasurer about it once.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2d")
                        {
                            //text dialogue
                            setMsg("The best way to support the economy is to avoid trying to control it. That was your father's policy and it worked wonders!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2e")
                        {
                            //text dialogue
                            setMsg("I wish you the best.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["No, thank you.", false, "a"], ["Yes, do.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            setMsg("Alright, I just thought I would ask.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            //text dialogue
                            setMsg("Excellent... [2 moons later] The courier I sent out for has returned! The answer is yes!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                sleeperTime += (60 * 60 * 24 * 60);
                                quests.atalinEmpressWarPermission = true;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Suspected Regicide" || conversationID[0] == "SuspectedRegicide")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "SuspectedRegicide";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Who hired you?", false, "c"], ["Your features match the description that the servant boy mentioned, you are thus guilty of high treason and will be burnt at the pyre.", false, "b"], ["I believe you are not guilty but you shall die for your part in this murder, be it indirect as it is.", false, "d"]];
                                if (player.raceName == "Nirwaden" && player.title == "Nobility" || player.raceName == "Nirwaden" && player.title == "Royalty" || player.inquisitionRank != "none" && player.inquisitionRank != "Initiate" && player.inquisitionRank != "Inquisitor")
                                {
                                    player.dialogueOptions.push(["I know you are behind the poisoning, but I also know that you are just a pawn... Tell me the real culprit and your life shall be spared.", false, "e"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["If you tell me who put you up to this, your life may be spared by those in charge around here...", false, "f"]);
                                }
                                if (player.estolRank != "none" && player.estolRank != "Hooker" && player.estolRank != "Courtesan")
                                {
                                    player.dialogueOptions.unshift(["Tell me true, is the Estol Gang behind this poisoning? If so, I can help you frame somebody...", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.unshift(["Have you been consorting with the servants?", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.title == "Highfolk" || player.title == "Nobility" || player.title == "Royalty" || player.inquisitionRank != "none")
                            {
                                setMsg("No, of course not. I have been on patrol and then on my break. I would never share words with the servants, they are not worth my time.");
                            }
                            else if (player.estolRank != "none" && player.estolRank != "Hooker" && player.estolRank != "Courtesan")
                            {
                                setMsg("Yeah, this is part of a distraction for the boss to implement his master plan. The cook will be the easiest to frame, she is the likeliest suspect since she can have a temper and is in charge of the food.");
                            }
                            else
                            {
                                setMsg("No, of course not. I have been on patrol and then on my break. I would never share words with the servants, they are not worth my time. Come to think of it, neither are you...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("You're making a big mistake, I'm a loyal servant of the house of Altezor!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);

                                if (quests.aFeastForFewerQuest == true)
                                {
                                    quests.aFeastForFewerCompletionStyle = "proper";
                                    quests.aFeastForFewerQuest = "complete";
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        quests.completeQuests.push({name: "A Feast for Fewer", description: "You sentenced a rogue soldier to burn at the pyre for the poisoning of your father."});
                                    }
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility" || player.raceName == "Nirwaden" && player.title == "Highfolk")
                                    {
                                        quests.completeQuests.push({name: "A Feast for Fewer", description: "You sentenced a rogue soldier to burn at the pyre for the poisoning of High Lord Altezor."});
                                    }
                                    else
                                    {
                                        quests.completeQuests.push({name: "A Feast for Fewer", description: "You reported a rogue soldier to the proper authorities who executed her for poisoning the high lord."});
                                    }
                                    player.nirwadenFaction += 55;
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 60;
                                    }
                                    else
                                    {
                                        player.experience += 190;
                                    }
                                }

                                change = "pireGathering";
                                quests.doPire = true;
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                X = -46299;
                                Y = 34;
                                quests.pireVictim = "Suspected Regicide";
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Suspected Regicide")
                                    {
                                        worldItems.push([new Item("estolPoisoningOrders", ArtificialIntelligenceAccess[i].X, ArtificialIntelligenceAccess[i].Y), 1]);
                                        ArtificialIntelligenceAccess[i].muzzle = true;
                                        ArtificialIntelligenceAccess[i].revived = true;
                                        break;
                                    }
                                }
                                for (var i = ArtificialIntelligenceAccess.length - 1; i >= 0; i--)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == quests.pireVictim)
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }

                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I believe it was Ser Belgos of Atalin, he is in charge of hiring all of the new soldiers who guard the castle.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.aFeastForFewerBelgos = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("You fiend!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                uniqueChars.altezorInfiltratorLDS = false;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Suspected Regicide")
                                    {
                                        worldItems.push([new Item("estolPoisoningOrders", ArtificialIntelligenceAccess[i].X, ArtificialIntelligenceAccess[i].Y), 1]);
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("Fine, was it that obvious that I have no motive to poison a high lord of my own volition? I work for the Estol Gang, I was sent to poison the high lord as a distraction so that my boss could implement some sort of plan or something... Here just read my orders for yourself, I need to get as far away from here as possible so that the gang doesn't kill me for ratting them out.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                uniqueChars.altezorInfiltratorLDS = false;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Suspected Regicide")
                                    {
                                        worldItems.push([new Item("estolPoisoningOrders", ArtificialIntelligenceAccess[i].X, ArtificialIntelligenceAccess[i].Y), 1]);
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("Somehow I don't believe that they will show me the mercy you speak of... and... I'm not going to die a traitor! I will fight you till my last breath!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();

                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Suspected Regicide")
                                    {
                                        ArtificialIntelligenceAccess[i].disturbedTime = new Date().getTime() + 99999999;
                                        ArtificialIntelligenceAccess[i].disturbed = true;
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Libo the Servant Boy" || conversationID[0] == "Libo")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Libo";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.aFeastForFewerQuest == true)
                                {
                                    player.dialogueOptions.push(["Did you see the cook put anything strange into the food?", false, "a"], ["Tell me what you have been up to!", false, "c"], ["Tell me everything you saw!", false, "d"]);
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        player.dialogueOptions.push(["Has the cook ever said anything distasteful about my father or me?", false, "b"]);
                                    }
                                    else if (player.title == "Highfolk" || player.title == "Nobility" || player.title == "Royalty" || player.inquisitionRank != "none" && player.inquisitionRank != "Initiate")
                                    {
                                        player.dialogueOptions.push(["Has the cook ever said anything distasteful about the high lord?", false, "b"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.push(["Has the cook ever said anything bad about the high lord?", false, "b"]);
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions.push(["Hello there!", false, "e"], ["What are you up to?", false, "f"], ["How are you doing?", false, "g"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Yeah, she put garlic and tialo fronds in the food, yuck I hate both of them! Ewy ewy ewy!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Sometimes she um, she gets mad that the horses get to eat the leftovers before we get to eat any of them...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I was helping cook food and I um, nothing...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("I saw the cook, and I saw the food, um, I saw a friendly soldier man who gave me some money [jingles a surpisingly full pocket of coins].");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                if (player.gender == "Male")
                                {
                                    setMsg("Hello, me lord.");
                                }
                                else
                                {
                                    setMsg("Hello, me dame.");
                                }
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Highfolk")
                            {
                                setMsg("Hello, Hidalgo.");
                            }
                            else if (player.title == "Nobility" || player.title == "Royalty")
                            {
                                setMsg("Hello, your grace.");
                            }
                            else
                            {
                                setMsg("Hi.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("I'm just doing my daily chores. I already made the beds, and now I am helping make some food.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                if (player.gender == "Male")
                                {
                                    setMsg("I'm happy for all your family has given me, I would be an orphan if not for your family's kindness, me lord.");
                                }
                                else
                                {
                                    setMsg("I'm happy for all your family has given me, I would be an orphan if not for your family's kindness, me dame.");
                                }
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Highfolk")
                            {
                                setMsg("All's well, Hidalgo.");
                            }
                            else if (player.title == "Nobility" || player.title == "Royalty")
                            {
                                setMsg("Very good, your grace.");
                            }
                            else
                            {
                                setMsg("I am sooo bored, I just want to play with other children...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.aFeastForFewerQuest == true)
                                {
                                    player.dialogueOptions.push(["What did the man tell you to do when he gave you the money?", false, "a"], ["What did the soldier man look like?", false, "b"]);
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        player.dialogueOptions.push(["I find you to be a guilty party to my father's poisoning and thusly you shall be burnt at the pyre, regardless of your age.", false, "c"]);
                                    }
                                    else if (player.raceName == "Nirwaden" && player.title == "Royalty" || player.raceName == "Nirwaden" && player.title == "Highfolk" || player.inquisitionRank != "none" && player.inquisitionRank != "Initiate")
                                    {
                                        player.dialogueOptions.push(["I find you to be a guilty party to murdering the high lord and thusly you shall be burnt at the pyre, regardless of your age.", false, "c"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.push(["It's your fault that the high lord died! [report him to the authorities to be executed]", false, "c"], ["I have determined that it is your fault that the high lord died, your age will not save you from justice... [report him to the authorities to be executed]", false, "c"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }

                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("He gave me lots of shiny coins and asked me to put some special flavour water onto the salmon. I put the rest of the flavour water on the counter if you want to try some...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("He, ummmm, he was, umm, skinny, and had a beard, and um a poiny nose sort of...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (quests.aFeastForFewerInfiltrator == false)
                                {
                                    quests.aFeastForFewerInfiltrator = true;
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Off Duty Altezor Soldier")
                                        {
                                            ArtificialIntelligenceAccess.splice(i, 1);
                                            break;
                                        }
                                    }
                                    change = "altezorinfiltrator";
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("I'm sorry, I'm sorry, I'm sorry!! I won't do anything bad ever again okay?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                uniqueChars.liboLDS = false;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Libo the Servant Boy")
                                    {
                                        ArtificialIntelligenceAccess[i].X = 999999999999;
                                        ArtificialIntelligenceAccess[i].Y = 999999999999;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }

                    }

                    if (self.ID == "Marta the Cook" || conversationID[0] == "Marta")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Marta";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                if (quests.aFeastForFewerQuest != true)
                                {
                                    player.dialogueOptions.push(["Good day.", false, "b"], ["What is that you're working on?", false, "a"], ["The food smells good!", false, "c"], ["Fair well!", false, "d"], ["Bye!", false, "d"]);
                                }
                                else
                                {

                                    if (player.title == "Nobility" && player.raceName == "Nirwaden")
                                    {
                                        player.dialogueOptions.push(["Tell me what you were up to before my father was poisoned!", false, "e"], ["Who else had access to our food?", false, "h"], ["You will burn for what you have done to my father you vile scum!!", false, "f"], ["I'll have you know that I take no pleasure in this... you are to burn at the pyre for the premeditated murder of my father, the high lord of these lands.", false, "f"], ["Though I do not believe it was your intention to kill my father, your incompetence is worthy of death...", false, "g"]);
                                    }
                                    else if (player.title == "Royalty" && player.raceName == "Nirwaden" || player.title == "Highfolk" && player.raceName == "Nirwaden" || player.inquisitionRank != "none" && player.inquisitionRank != "Initiate")
                                    {
                                        player.dialogueOptions.push(["Tell me the events that took place before the High Lord Altezor was poisoned. Be thorough.", false, "e"], ["Who else had access to the high lord's food?", false, "h"], ["You are guilty of high treason for the murder of a high lord by poisoning and will be burnt at the pyre.", false, "f"], ["As the cook who served High Lord Altezor the meal that ended his life, you will be held fully accountable for his death.", false, "f"], ["Though I do not believe you are behind this murder, you will face death for your role in this misfortune.", false, "g"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.push(["Tell me everything you did leading up to the moment you served his lordship the poisoned food.", false, "e"], ["Was anyone other than you around the food?", false, "h"], ["As the cook who served his blessed lordship the meal that ended his life, it's your fault he's dead. [turn in to the authorities]", false, "f"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("I am preparing you and your family a decadent feast, me dame.");
                                }
                                else
                                {
                                    setMsg("I am fixing up a wonderful feast for you and your family, me lord.");
                                }
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Royalty")
                            {
                                setMsg("I am preparing a feast for me masters of the house of Altezor, and for yourself, your highness.");
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Highfolk")
                            {
                                setMsg("I am putting together a grand feast for the house of Altezor. I'm afraid you won't be invited... don't be offended though. I just mean that not many people are invited at all. I'm not even allowed to taste what I cook!");
                            }
                            else if (player.title == "Nobility" || player.title == "Royalty")
                            {
                                setMsg("I am making a great feast for me masters of the house of Altezor.");
                            }
                            else
                            {
                                setMsg("Cooking a big feast for ... I do this almost every day, it's exhausting! Can you believe that they send their leftovers to the horses, to the bloody horses. Us servants get the scraps only after the horses have had their fill!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.raceName == "Nirwaden" && player.title == "Nobility")
                            {
                                if (player.gender == "Female")
                                {
                                    setMsg("Good day, me dame.");
                                }
                                else
                                {
                                    setMsg("Good day, me lord.");
                                }
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Royalty")
                            {
                                setMsg("And you a wonderful one, your excellency!");
                            }
                            else if (player.raceName == "Nirwaden" && player.title == "Highfolk")
                            {
                                setMsg("Good day, me Hidalgo, sir.");
                            }
                            else if (player.title == "Nobility" || player.title == "Royalty")
                            {
                                setMsg("Good day, your grace.");
                            }
                            else
                            {
                                setMsg("Good day.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                        if (player.title == "Nobility" || player.title == "Royalty" || player.title == "Highfolk")
                        {
                            setMsg("Why thank you!");
                        }
                        else
                        {
                            setMsg("Of course it does... Enjoy that smell! that's all you're gonna get...");
                        }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Fair well.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("I woke up and started right off on the cooking, like I always do. I started with the large bits of meat that need to cook for a long time, I baked the pastries, cooked the fish, and cooked up the vegetables and made sure to set out fresh wine...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("I didn't do it, I swear! It wasn't me, I would never do such a thing, never! never! It wasn't me!, Please, no, no, no please no! I don't want to die!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);

                                if (quests.aFeastForFewerQuest == true)
                                {
                                    quests.aFeastForFewerCompletionStyle = "easywayout";
                                    quests.aFeastForFewerQuest = "complete";
                                    if (player.raceName == "Nirwaden" && player.title == "Nobility")
                                    {
                                        quests.completeQuests.push({name: "A Feast for Fewer", description: "You sentenced the cook to burn at the pyre for the poisoning of your father."});
                                        player.nirwadenFaction += 25;
                                    }
                                    else if (player.raceName == "Nirwaden" && player.title == "Royalty" || player.raceName == "Nirwaden" && player.title == "Highfolk")
                                    {
                                        quests.completeQuests.push({name: "A Feast for Fewer", description: "You sentenced the cook to burn at the pyre for the poisoning of High Lord Altezor."});
                                        player.nirwadenFaction += 20;
                                    }
                                    else
                                    {
                                        quests.completeQuests.push({name: "A Feast for Fewer", description: "You reported the cook to the proper authorities who executed her for poisoning the high lord."});
                                        player.nirwadenFaction += 15;
                                    }
                                    if (player.class == "Mage" || player.class == "Priest" || player.class == "Shaman")
                                    {
                                        player.magicalExperience += 20;
                                    }
                                    else
                                    {
                                        player.experience += 75;
                                    }
                                }
                                change = "pireGathering";
                                quests.doPire = true;
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                X = -46299;
                                Y = 34;
                                quests.pireVictim = "Marta the Cook";
                                for (var i = ArtificialIntelligenceAccess.length - 1; i >= 0; i--)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == quests.pireVictim)
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("Please, I beg of you, grant me mercy your excellency!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                uniqueChars.martaLDS = false;
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Marta the Cook")
                                    {
                                        ArtificialIntelligenceAccess[i].X += 999999999999;
                                        ArtificialIntelligenceAccess[i].Y += 999999999999;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            setMsg("Besides me... well, little Libo helps me in the kitchen, but besides him nobody else has been in here. I have not left the kitchen except to deliver the high lord's food to him.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Cristobal the Innkeeper" || conversationID[0] == "Cristobal")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Cristobal";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"], ["How much for a room?", false, "b"], ["Have you heard any interesting rumors?", false, "c"], ["Do you know where I might find work?", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Can I get you anything? A drink perhaps?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("A room will be 25 coins for the night.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            if (quests.duendeInfestationKillCount < 9)
                            {
                                setMsg("Oh, yes, I heard that the big house for sale is infested with Duendes... Ha! Bad luck for whoever the owner is. They're never going to be able to sell it, it's illegal to sell a Duende infested home.");
                            }
                            else if (quests.imaginaryFriendQuest == false)
                            {
                                setMsg("You bet I have! I heard that the baker's daughter is crazy as they come... she thinks that some sort of imaginary six armed being follows her around or something, she told me so when I went over to stock up on bread. She says that it's her friend. He he he, yeah right, that girl's just gone mad.");
                            }
                            else if (quests.torturedSpiritQuest == false)
                            {
                                setMsg("I heard that the graveyard is haunted... I know, that sounds obvious but... a customer told me he saw him an apparition of sorts.");
                            }
                            else
                            {
                                setMsg("Lean in a little closer, this one's a secret... I hear that the Eastover Inn is has the best swill in town.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Arcus Co. has a mine south of here that could use some new hands I hear... I guess those fishermen on the riverfront make an aright living if you're in to that... Starting your own shop is always an option in this economy, but hey don't bother trying to compete in the Inn business, mine is the best in town by a longshot.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'll take it.", false, "a"], ["Nevermind.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            var coinzHit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 25)
                                {
                                    coinzHit = i;
                                    break;
                                }
                            }
                            if (coinzHit == -1)
                            {
                                setMsg("Not until you get more money you won't, I'm not a charity.");
                            }
                            else
                            {
                                setMsg("Enjoy your stay!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                if (coinzHit != -1)
                                {
                                    if (Inventory[coinzHit][1] > 25)
                                    {
                                        Inventory[coinzHit][1] -= 25;
                                    }
                                    else
                                    {
                                        Inventory.splice(coinzHit, 1);
                                    }
                                    X = -47059;
                                    Y = -1228;
                                    lowBar = "information";
                                    sleep();
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Your loss really, our beds are extremely comfortable, and the rooms are spacious and relaxing...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Atalin Tax Officiator" || conversationID[0] == "atalinTO")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "atalinTO";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"]];
                                if (uniqueChars.basilioAltezorLDS == false && player.raceName == "Nirwaden" && player.title == "Nobility")
                                {
                                    if (player.gender == "Male")
                                    {
                                        player.dialogueOptions.push(["I am here to collect the taxes I am owed as Lord of Atalin and the surrounding hamlets.", false, "b"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.push(["I am here to collect the taxes I am owed as the Lady of Atalin and the surrounding hamlets.", false, "b"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Good day to you.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Here is everything the tax collectors have brought in up to this point...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHitz = -1;
                                var taxColl = Math.floor(quests.atalinTaxes);

                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        coinzHitz = i;
                                    }
                                }
                                if (coinzHitz > -1)
                                {
                                    Inventory[coinzHitz][1] += taxColl;
                                    quests.atalinTaxes -= taxColl;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), taxColl]);
                                    quests.atalinTaxes -= taxColl;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Tirbutin the Tax Officiator" || conversationID[0] == "Tirbutin")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Tirbutin";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Mmmm, 2578, 2579, 2580... oh sorry, yes of course, good day to you... what is it that you need?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                if (player.title == "Nobility")
                                {
                                    if (uniqueChars.basilioAltezorLDS == true)
                                    {
                                        player.dialogueOptions.push(["How go the taxes?", false, "a"]);
                                    }
                                    else
                                    {
                                        if (player.gender == "Female")
                                        {
                                            if (quests.atalinTaxManReformed == true)
                                            {
                                                player.dialogueOptions.push(["I am here to collect the taxes I am owed as the Lady of Atalin and the surrounding hamlets.", false, "b"]);
                                            }
                                            else
                                            {
                                                player.dialogueOptions.push(["I am here to collect the taxes I am owed as the Lady of Atalin and the surrounding hamlets.", false, "c"]);
                                            }
                                        }
                                        else
                                        {
                                            player.dialogueOptions.push(["I am here to collect the taxes I am owed as Lord of Atalin and the surrounding hamlets.", false, "b"]);
                                        }
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions.push(["Tell me about your work as the tax officiator.", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("This work is not easy, but I have a particular talent with numbers so I make do.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            if (player.gender == "Female")
                            {
                                setMsg("Here are the taxes that the tax collectors have brought to me so far, your most merciful excellency... I am but your humble servant.");
                            }
                            else
                            {
                                setMsg("Of course my lord, here are the taxes that the tax collectors have brought me thus far.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzHitz = -1;
                                var taxColl = Math.floor(quests.atalinTaxes);

                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        coinzHitz = i;
                                    }
                                }
                                if (coinzHitz > -1)
                                {
                                    Inventory[coinzHitz][1] += taxColl;
                                    quests.atalinTaxes -= taxColl;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), taxColl]);
                                    quests.atalinTaxes -= taxColl;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            if (quests.atalinTaxManReformed == false)
                            {
                                setMsg("My lady, here are the taxes that I have prepared for you.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    var coinzHitz = -1;
                                    var taxColl = Math.floor(quests.atalinTaxes * 4/5);

                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins")
                                        {
                                            coinzHitz = i;
                                        }
                                    }
                                    if (coinzHitz > -1)
                                    {
                                        Inventory[coinzHitz][1] += taxColl;
                                        quests.atalinTaxes = 0;
                                    }
                                    else
                                    {
                                        Inventory.unshift([new Item("coins", false, false), taxColl]);
                                        quests.atalinTaxes = 0;
                                    }

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    if (player.getIntelligence() >= 3)
                                    {
                                        conversationID[1] = 2;
                                    }
                                    else
                                    {
                                        conversationID[1] = 1;
                                    }
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                setMsg("My lady, here I present to you the entire sum of your taxes, I assure you that is all of it...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    var coinzHitz = -1;
                                    var taxColl = Math.floor(quests.atalinTaxes * 5/6);

                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins")
                                        {
                                            coinzHitz = i;
                                        }
                                    }
                                    if (coinzHitz > -1)
                                    {
                                        Inventory[coinzHitz][1] += taxColl;
                                        quests.atalinTaxes = 0;
                                    }
                                    else
                                    {
                                        Inventory.unshift([new Item("coins", false, false), taxColl]);
                                        quests.atalinTaxes = 0;
                                    }

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    if (player.getIntelligence() >= 6)
                                    {
                                        conversationID[1] = 2;
                                    }
                                    else
                                    {
                                        conversationID[1] = 1;
                                    }
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I see that you are skimming from the taxes. Your evils will be burnt away at the pyre... [EXECUTE]", false, "a"], ["Stealing from your ruler is punishable by death... If you ever skim from my taxes again I will have your corruption burnt away at the pyre! [SCARE]", false, "b"], ["Thank you for your loyal service... [IGNORE]", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("Have mercy, have mercy, please, my lady, please show mercy! I will never decieve you again, please!!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                dialogueReset(self);

                                change = "pireGathering";
                                quests.doPire = true;
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                X = -46299;
                                Y = 34;
                                quests.pireVictim = "Tirbutin the Tax Officiator";
                                for (var i = ArtificialIntelligenceAccess.length - 1; i >= 0; i--)
                                {
                                    console.log(ArtificialIntelligenceAccess[i]);
                                    if (ArtificialIntelligenceAccess[i].ID == quests.pireVictim)
                                    {
                                        ArtificialIntelligenceAccess.splice(i, 1);
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            //text dialogue
                            setMsg("Thank you my lady, thank the everlasting spirit for this wonderful act of mercy, I will never decieve you again... ");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (quests.atalinTaxManReformed == false)
                                {
                                    if (Math.random() >= 0.4)
                                    {
                                        quests.atalinTaxManReformed = true;
                                    }
                                    else
                                    {
                                        quests.atalinTaxManReformed = "failed";
                                    }
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            //text dialogue
                            setMsg("This work is not easy, but I have a particular talent with numbers so I make do.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Inquisition Torturer" && map == "atalinTortureChamber" || conversationID[0] == "InquTort")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "InquTort";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Why hello there.", false, "a"], ["What did these people do?", false, "b"], ["What did you do to these people?", false, "c"], ["Goodbye.", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Lovely to see somebody other than my bloody friends down here...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Let's see... adultery for the older one, and for the little girl it was thievery.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I castrated the adulterer, and I gouged the eyes out of the thief... They are free to live out the rest of their lives in exile if they survive, now that they have been properly punished, of course.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Until next time...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Silver Keep Banker" || conversationID[0] == "SilverKeep")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "SilverKeep";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Tell me my account balance.", false, "e"], ["I would like to make a deposit.", false, "a"], ["I would like to make a withdrawal.", false, "b"], ["I would like to take out a loan.", false, "c"], ["I would like to repay a loan.", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            skDeposit();
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "0b")
                        {
                            skWithdraw();
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "0c")
                        {
                            skLoan();
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "0d")
                        {
                            skRepay();
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("Your account balance is (" + Math.floor(player.silverKeep) + ")");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Guild Master Manolo" || conversationID[0] == "Manolo")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Manolo";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                if (player.title == "Nobility" && player.raceName == "Nirwaden")
                                {
                                    player.dialogueOptions.push(["Good day, Sir, I would like to discuss the transportation taxes and tarrifs that my family has negociated with your guild.", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["Tell me about the merchants guild.", false, "a"]);
                                }

                                if (quests.atalinShopOwned != true)
                                {
                                    var coinzHitz = -1;

                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 19000)
                                        {
                                            coinzHitz = i;
                                        }
                                    }
                                    if (coinzHitz > -1)
                                    {
                                        player.dialogueOptions.push(["[buy 'The Atalin Supply' for 19000 coins]", false, "b"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.raceName != "Nirwaden" || player.title != "Nobility")
                            {
                                setMsg("We at the merchants guild ensure that the economy remains stable by negociating with the house of Altezor. If not for us the lord might charge merchants exorbitant fees and tarrifs and smother the flame of our region's economic prosperity.");
                            }
                            else
                            {
                                if (player.gender == "Male")
                                {
                                    setMsg("Ah, Lord Altezor, it is good to see you... If this inquiry is intended to alter the agreement we have come to regarding the regional tax rates for the trading and transporting of goods, I remind you that to charge any higher rates will harm the economic prosperity that this region has maintained for so long.");
                                }
                                else
                                {
                                    setMsg("Ah, Lady Altezor, you are looking gorgeous as ever... If this inquiry is intended to alter the agreement we have come to regarding the regional tax rates for the trading and transporting of goods, I will let you know that to charge any higher rates will harm the economic prosperity that this region has maintained for so long.");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            var coinHitz = -1;
                            var servicesPaid = false;

                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 19000)
                                {
                                    coinHitz = i;
                                }
                            }

                            if (coinHitz > -1)
                            {
                                if (Inventory[coinHitz][1] == 19000)
                                {
                                    Inventory.splice(coinHitz, 1);
                                }
                                else
                                {
                                    Inventory[coinHitz][1] -= 19000;
                                }

                                servicesPaid = true;
                            }

                            if (servicesPaid)
                            {
                                quests.atalinShopOwned = true;
                                change = "shopPurchased";
                            }

                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Arcus Co Representative" || conversationID[0] == "ArcusCoRep")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "ArcusCoRep";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Good day, welcome to the headquarters of the Arcus Mineral Company! How can I help you?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Can you tell me about Arcus?", false, "a"], ["I would like to work for this company.", false, "b"], ["I would like to invest in this company.", false, "c"], ["That is all.", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("The Arcus Mineral Company is responsible for ensuring that the Nirwaden Empire and her allies are supplied with the highest quality minerals.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Arcus Mineral Co. would be delighted to employ you as a miner! If you are interested in a mining job you must speak with the task manager at our mine just South East of here.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("If you wish to invest in our company you should speak with the owner of the company, Hidalgo Ergoku.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1d")
                        {
                            //text dialogue
                            setMsg("Have a nice day!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Ernesto the Engineer" || conversationID[0] == "Ernesto")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Ernesto";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        var plannns = -1;
                        var planns = -1
                        for (var i = 0; i < Inventory.length; i++)
                        {
                            if (Inventory[i][0].type == "inventionPlans")
                            {
                                planns = i;
                            }
                            else if (Inventory[i][0].type == "falseInventionPlans")
                            {
                                plannns = i;
                            }
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What is that you're working on?", false, "e"]];
                                if (quests.inventorsFeudQuest == false)
                                {
                                    player.dialogueOptions.unshift(["How goes the day?", false, "a"]);
                                }
                                else if (quests.inventorsFeudQuest == true)
                                {
                                    if (quests.inventorsFeudStage == "hugoStart")
                                    {
                                        player.dialogueOptions.unshift(["Do you have any work for me?", false, "b"]);
                                    }
                                    else if (quests.inventorsFeudStage == "angry")
                                    {
                                        player.dialogueOptions.unshift(["You liar! How dare you manipulate me into sabotaging your competition!", false, "f"]);
                                    }
                                    else if (quests.inventorsFeudStage == "angry2")
                                    {
                                        player.dialogueOptions.unshift(["You're a fraud!", false, "g"]);
                                    }
                                    else if (planns > -1)
                                    {
                                        player.dialogueOptions.unshift(["Here are the plans that were stolen from you...", false, "d"]);
                                    }
                                    else if (plannns > -1)
                                    {
                                        player.dialogueOptions.unshift(["Here are the plans that were stolen from you...", false, "c"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            setMsg("Not so well, my prized invention has been stolen from me by my rival, Hugo. Would you by chance be looking for work? I would be willing to pay you to get me my plans back from Hugo.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("Yes, as a matter of fact I do. My rival, Hugo has stolen my plans from me. I need you to get them back. I will pay you upon their safe return to me.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();
                                quests.inventorsFeudStage = "hugoMid";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Wonderful, with this invention we will soar through the heavens, the sky is no longer the limit, we will surpass it through sheer human ingenuity! Oh right, your payment: Here are 50 coins for your efforts.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                worldItems.push([new Item("coins", X, Y), 50]);
                                Inventory.splice(plannns, 1);
                                if (quests.inventorsFeudStage == "falsePlans")
                                {
                                    quests.inventorsFeudStage = "done";
                                    quests.inventorsFeudCompletionStyle = "wrongPlans";
                                    quests.inventorsFeudQuest = "complete";
                                    quests.completeQuests.push({name: "Inventor's Feud", description: "You delivered the stolen plans back to Ernesto the Engineer."});
                                    player.nirwadenFaction += 1;
                                    player.experience += 45;
                                }
                                else
                                {
                                    quests.inventorsFeudStage = "hugoDone";
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Brilliant! With this new technology I will be credited for having revolutionized the lumber industry! Oh right, your payment: Here are 50 coins for your efforts.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                worldItems.push([new Item("coins", X, Y), 50]);
                                Inventory.splice(planns, 1);
                                quests.inventorsFeudCompletionStyle = "rightPlans";
                                quests.inventorsFeudQuest = "complete";
                                quests.completeQuests.push({name: "Inventor's Feud", description: "You procured chainsaw schematics for Ernesto the Engineer."});
                                player.nirwadenFaction += 1;
                                player.experience += 45;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("I am working on an invention, and for that I need to focus, if you would be so kind as to leave I might resume my work.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("I am sorry, I, I just needed to be successful for once. All of my inventions have been failing. I hope you understand, I, I had no other choice...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.inventorsFeudStage = "angry2";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("I'm sorry, I'm really sorry...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.inventorsFeudCompletionStyle = "fraud";
                                quests.inventorsFeudQuest = "complete";
                                quests.completeQuests.push({name: "Inventor's Feud", description: "You discovered that Ernest had tried to manipulate you into sabotaging his competition."});
                                player.nirwadenFaction += 6;
                                player.experience += 25;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'll do it.", false, "a"], ["I'd rather not.", false, "b"]];

                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("Excellent! Bring them back to me when your done and I will pay you.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.inventorsFeudStage = "ernestoStart";
                                quests.activeQuests.push({name: "Inventor's Feud", description: "The plans for Ernesto's invention were stolen by Hugo the Inventor, get them back."});
                                quests.inventorsFeudQuest = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Oh well, perhaps you aren't the best person for this job anyway...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Hugo the Inventor" || conversationID[0] == "Hugo")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Hugo";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.inventorsFeudStage != "realPlans")
                                {
                                    player.dialogueOptions = [["Good day.", false, "a"], ["What are you up to?", false, "b"]];
                                    if (quests.inventorsFeudQuest == false)
                                    {
                                        player.dialogueOptions.push(["Do you have any work for me?", false, "c"]);
                                    }
                                    else if (quests.inventorsFeudQuest == true)
                                    {
                                        if (quests.inventorsFeudStage == "ernestoStart")
                                        {
                                            player.dialogueOptions.push(["Give me the invention plans that you stole from ernesto or you will regret it!", false, "d"]);
                                            player.dialogueOptions.push(["Where are the plans you stole from Ernesto!?", false, "d"]);
                                        }
                                        else if (quests.inventorsFeudStage == "falsePlans" && quests.inventorsFeudStage != "realPlans")
                                        {
                                            if (player.getIntelligence() >= 20)
                                            {
                                                player.dialogueOptions.push(["These plans are fake! Give me the real plans!", false, "h"]);
                                            }
                                        }
                                        else if (quests.inventorsFeudStage != false && quests.inventorsFeudStage != "hugoMid" && quests.inventorsFeudStage != "hugoLast" && quests.inventorsFeudStage != "hugoStart" && quests.inventorsFeudStage != "hugoDone" && quests.inventorsFeudStage != "angry" && quests.inventorsFeudStage != "angry2" && quests.inventorsFeudStage != "tablesTurned")
                                        {
                                            player.dialogueOptions.push(["I don't believe you; hand over the plans!", false, "e"]);
                                            player.dialogueOptions.push(["I don't care whose plans they are, hand them over!", false, "e"]);
                                            player.dialogueOptions.push(["I'm going to pay Ernesto a visit, nobody lies to me and gets away with it.", false, "f"]);
                                            player.dialogueOptions.push(["So, ernesto was lying to me...", false, "g"]);
                                        }
                                        else if (quests.inventorsFeudStage == "hugoMid")
                                        {
                                            player.dialogueOptions.push(["Alright, give me the false plans.", false, "i"]);
                                        }
                                        else if (quests.inventorsFeudStage == "hugoDone")
                                        {
                                            player.dialogueOptions.push(["I gave Ernesto the fake plans, lets discuss my payment.", false, "j"]);
                                        }
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions = [];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                        else if (player.dialogueOptions[i][2] == "i")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0i";
                                        }
                                        else if (player.dialogueOptions[i][2] == "j")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0j";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("Yes, yes, it is. Now go away!");
                            }
                            else
                            {
                                setMsg("Oh, em, yes, it is.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("I am constructing a new device that will change the world. So if you don't mind, I need to focus.");
                            }
                            else
                            {
                                setMsg("I am constructing a new device that will change the world, your excellency.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Yes, I suspect that my rival, Ernesto, is plotting to steal the schematics for my most recent invention so that he can claim the credit for it. I will pay you to pretend to offer your services to him as a sabateur. I will give you false plans to give to him, that way he will be satisfied until I have officially patented my invention.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'll do it.", false, "a"], ["No thanks.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("Calm down! I didn't steal anything from Ernesto! The invention that he claims that I stole is one that he is trying to steal from me through you.");
                            }
                            else
                            {
                                setMsg("Your excellency, whatever Ernesto has told you is a lie, for the plans you seek on his behalf are my own.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                quests.inventorsFeudStage = "ernestoLies";
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                if (player.getStrength >= 4 || player.getCharisma >= 6)
                                {
                                    setMsg("You vile cretin, I am the rightful owner of these plans, you are robbing me of years of effort!");
                                }
                                else
                                {
                                    setMsg("I'm not giving up my invention without a fight!");
                                }

                            }
                            else
                            {
                                setMsg("Your excellency, this is most unjust, you are depriving me of the fruit of years of my own labour!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.title == "Nobility" || player.title == "Royalty" || player.title == "Highfolk" || player.getStrength >= 4 || player.getCharisma >= 6)
                                {
                                    Inventory.push([new Item("falseInventionPlans", false, false), 1]);
                                    quests.inventorsFeudStage = "falsePlans";
                                }
                                else
                                {
                                    for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                    {
                                        if (ArtificialIntelligenceAccess[i].ID == "Hugo the Inventor")
                                        {
                                            ArtificialIntelligenceAccess[i].healthMAX = 10;
                                            ArtificialIntelligenceAccess[i].health = 10;
                                            ArtificialIntelligenceAccess[i].baseTeam = "arena3";
                                            ArtificialIntelligenceAccess[i].ultra.personality = "violent";
                                            ArtificialIntelligenceAccess[i].disturbed = true;
                                        }
                                    }
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("Do what you will...");
                            }
                            else
                            {
                                setMsg("Yes, em, lying is wrong and he must be punished as your excellent sees fit...");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.inventorsFeudStage = "angry";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("Yes, Ernesto has been trying to steal my inventions for a long time. I suspect if he were actually successful in any of his own inventions he would be less motivated to steal from me... But that lying fool deserves payback. Take him the plans for this failed invention of mine from a few years ago.");
                            }
                            else
                            {
                                setMsg("Yes, Ernesto has been trying to steal my inventions for a long time. I suspect if he were actually successful in any of his own inventions he would be less motivated to steal from me... But that lying fool deserves payback. Take him the plans for this failed invention of mine from a few years ago... if you will, your excellency.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                Inventory.push([new Item("falseInventionPlans", false, false), 1]);
                                quests.inventorsFeudStage = "tablesTurned";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("How did you know that the icharus wings wouldn't work!? Fine here are my real plans, you dirty thief!");
                            }
                            else
                            {
                                setMsg("Oh... you meant you wanted the plans that work, here you are then, your excellency. Know that justice has been uprooted on this day.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.inventorsFeudStage = "realPlans";
                                Inventory.push([new Item("inventionPlans", false, false), 1]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0i")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("Here you are; that fool Ernesto, will have no idea that these plans are bogus...");
                            }
                            else
                            {
                                setMsg("Here are the false plans, your excellency.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                Inventory.push([new Item("falseInventionPlans", false, false), 1]);
                                quests.inventorsFeudStage = "hugoLast";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0j")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("How would you like to be the very first to own my latest invention, a coal powered saw. Don't answer that, of course you want one, they are a revolutionary new technology that I invented.");
                            }
                            else
                            {
                                setMsg("Your excellence, can have a copy of my revolutionary invention, the one that your excellence helped me safeguard.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                Inventory.push([new Item("chainsaw", false, false), 1]);
                                quests.inventorsFeudStage = "done";
                                quests.inventorsFeudCompletionStyle = "falsePlans";
                                quests.inventorsFeudQuest = "complete";
                                quests.completeQuests.push({name: "Inventor's Feud", description: "You safeguarded Hugo's invention by giving Ernesto the wrong scematics."});
                                player.nirwadenFaction += 3;
                                player.experience += 45;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("Great, I'm glad that we're in business!");
                            }
                            else
                            {
                                setMsg("Oh, how wonderful that you would help me with this, your excellency!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.activeQuests.push({name: "Inventor's Feud", description: "Hugo the Inventor has asked you to pretend to work for his rival in order to foil a plot to steal the plans for his latest invention."});
                                quests.inventorsFeudQuest = true;
                                quests.inventorsFeudStage = "hugoStart";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            if (player.title != "Nobility" && player.title != "Royalty" && player.title != "Highfolk")
                            {
                                setMsg("Oh, okay then...");
                            }
                            else
                            {
                                setMsg("Of course, your excellency, I understand completely. This sort of work is much below you.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Jimena the Tailor" || conversationID[0] == "Jimena")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Jimena";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["What's the word around town?", false, "b"], ["How's Business?", false, "c"], ["Do you like your job?", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.gender == "Male")
                            {
                                if (player.title == "Royalty" || player.title == "Nobility" || player.title == "Highfolk")
                                {
                                    setMsg("Good day, me lord.");
                                }
                                else
                                {
                                    setMsg("Good day, mister.");
                                }
                            }
                            else
                            {
                                if (player.title == "Royalty" || player.title == "Nobility" || player.title == "Highfolk")
                                {
                                    setMsg("Good day, me dame.");
                                }
                                else
                                {
                                    setMsg("Good day, miss.");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.title == "Royalty" || player.title == "Nobility" || player.title == "Highfolk" || player.getCharisma() < 6)
                            {
                                setMsg("I don't gossip...");
                            }
                            else
                            {
                                if (uniqueChars.matildaLDS == true)
                                {
                                    setMsg("I heard that Old Lady Matilda is a witch, I always knew there was something odd about her.");
                                }
                                else
                                {

                                    setMsg("I heard that a thief stole some fruit from the orchard... They caught him and purified him, though. I would have gone to the burning, but I was too busy sewing...");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Business is good, thanks for asking.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Does it matter? Work is work, best not complain about it.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Matilda" || conversationID[0] == "Matilda")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Matilda";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                if (quests.atalinWitchHuntQuest == false && player.raceName != "Nirwaden" || quests.atalinWitchHuntQuest == false && player.title == "Royalty")
                                {
                                    player.dialogueOptions.push(["How are you?", false, "a"]);
                                    for (var ii = 0; ii < Inventory.length; ii++)
                                    {
                                        if (Inventory[ii][0].type == "coins" && Inventory[ii][1] >= 3)
                                        {
                                            player.dialogueOptions.push(["Tell me my future... (3 coins)", false, "b"]);
                                            break;
                                        }
                                    }
                                    if (quests.atalinWitchHuntWaysTaught == false && player.intelligence >= 4)
                                    {
                                        player.dialogueOptions.push(["*hushed* Can you teach me your ways?", false, "c"]);
                                    }
                                }
                                else if (quests.atalinWitchHuntQuest == true)
                                {
                                    if (player.inquisitionRank != "none")
                                    {
                                        player.dialogueOptions.push(["By the order of the Inquisition you are to be purified at the pire... If you resist I will kill you where you stand.", false, "e"]);
                                    }
                                }

                                if (player.raceName == "Nirwaden")
                                {
                                    player.dialogueOptions.push(["Foul hag!", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            //text dialogue
                            if (player.gender == "Male")
                            {
                                if (player.title == "Royalty" || player.title == "Nobility" || player.title == "Highfolk")
                                {
                                    setMsg("I am fine, your grace.");
                                }
                                else
                                {
                                    setMsg("Not well, I sense that any day now the inquisition will be knocking on my door...");
                                }
                            }
                            else
                            {
                                if (player.title == "Royalty" || player.title == "Nobility" || player.title == "Highfolk")
                                {
                                    setMsg("I am fine, your highness.");
                                }
                                else
                                {
                                    setMsg("Not well, I sense that any day now the inquisition will be knocking on my door...");
                                }
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            if (player.inquisitionRank != "none")
                            {
                                setMsg("...I see an old lady's blood on your hands. You will travel blindly into the dark haze of your future imagining that you walk the path of the light, but you will leave suffering in your wake.");
                            }
                            else if (player.raceName == "Freynor")
                            {
                                setMsg("A life long frozen over will soon thaw, you will do great things. Riches and glory will be in your future...");
                            }
                            else if (player.raceName == "Nirwaden")
                            {
                                setMsg("Your future will be full of riches and power... but you will die before your time...");
                            }
                            else if (player.raceName == "Vardan")
                            {
                                setMsg("You have traveled a long way to where you are now, and you will travel fartherer still, but it will be all for not. You will be camping one night and en your sleep you will be devoured by a pack of ravenous friches... I'm sorry...");
                            }
                            else if (player.raceName == "Aldrek")
                            {
                                setMsg("Your people are cursed... you are cursed... you will die in battle, soon.");
                            }
                            else if (player.raceName == "Orgell")
                            {
                                setMsg("You're going to have some difficulties in your future, but they will be worth the reward of your perseverence, for you will be a proud parent and people will tell tales of your glorious exploits...");
                            }
                            else if (player.raceName == "Kel")
                            {
                                setMsg("Your lands will all be conquered and your people will live as slaves swallowed by east and west alike. You will be an outcast where ever you go, but you will find passion worth fighting for...");
                            }
                            else if (player.raceName == "Cephrite")
                            {
                                setMsg("You will grow strong and powerful and engulf the world... You will do great things, vile things, and in the end you will no longer recognize yourself...");
                            }
                            else if (player.raceName == "Thengar")
                            {
                                setMsg("You will grow strong and dominate the weak. That is your destiny...");
                            }
                            else
                            {
                                setMsg("You will wander... you will feel lost and without purpose... but then love will find you and you will understand why you do what you do.");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzPos = -1;
                                var coinzExcd = false;
                                for (var ii = 0; ii < Inventory.length; ii++)
                                {
                                    if (Inventory[ii][0].type == "coins" && Inventory[ii][1] <= 3)
                                    {
                                        coinzPos = ii;
                                        break;
                                    }
                                    else if (Inventory[ii][0].type == "coins" && Inventory[ii][1] > 3)
                                    {
                                        coinzPos = ii;
                                        coinzExcd = true;
                                        break;
                                    }
                                }
                                if (coinzExcd)
                                {
                                    Inventory[coinzPos][1] -= 3;
                                }
                                else
                                {
                                    Inventory.splice(coinzPos, 1);
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("In order to access your true self you must calm your mind and open your soul. The Everlasting Spirit is in everyone, more so than the church would have you believe... you must meditate and tap into your inner potential...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                player.magicalExperience += 15;
                                quests.atalinWitchHuntWaysTaught = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("Leave me alone!! Get away!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("I will not submit!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                self.disturbed = true;
                                self.ultra.faction = "hiubdsaghlkbfdiusadbkjlsbas";
                                self.baseTeam = JSON.stringify(Math.random());
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Agustin the Doctor" || conversationID[0] == "Agustin")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Agustin";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello doctor.", false, "a"], ["Tell me about yourself.", false, "b"]];
                                if (player.raceName != "Nirwaden" || player.title != "Royalty")
                                {
                                    player.dialogueOptions.push(["Your accent sounds different.", false, "c"]);
                                }
                                if (player.gutWorms)
                                {
                                    player.dialogueOptions.push(["Cure me [gut worms]", false, "d"]);
                                }
                                player.dialogueOptions.push(["Goodbye.", false, "e"]);
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.title != "Highfolk" && player.title != "Nobility" && player.title != "Royalty" && player.title != "Tradefolk" && player.getCharisma() < 19 && player.fame < 19)
                            {
                                //text dialogue
                                setMsg("I doubt that you can afford my thervices...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (player.title != "Nobility" && player.title != "Royalty")
                            {
                                //text dialogue
                                setMsg("Have you need of thomething?");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                if (player.gender == "Female")
                                {
                                    //text dialogue
                                    setMsg("What ails you my lady?");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    //text dialogue
                                    setMsg("What ails you my lord?");

                                    //on ended text dialogue
                                    if (tellMessage == "reset")
                                    {
                                        msgReset();

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                    else
                                    {
                                        self.SC();
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            //text dialogue
                            setMsg("I was born in Nirin... I studied at the academy where I obtained my training in the field of the medical thiences.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("Were you born yesterday, fool? The Nirinese accent is the most prestigious in the nirwaden empire.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            if (player.title == "Nobility" || player.title == "Royalty" || player.title == "Highfolk")
                            {
                                //text dialogue
                                setMsg("I will require 300 coins.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("What in torment have you been eating!? Fine, but this will cost you 300 coins.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("Fair well.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                var hasEnuf = false;
                                for (var ii = 0; ii < Inventory.length; ii++)
                                {
                                    if (Inventory[ii][0].type == "coins" && Inventory[ii][1] >= 300)
                                    {
                                        hasEnuf = true;
                                        break;
                                    }
                                }
                                if (hasEnuf)
                                {
                                    player.dialogueOptions.push(["[Pay 300 coins]", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["I can't afford this at the moment.", false, "b"]);
                                }
                                player.dialogueOptions.push(["Actually I change my mind...", false, "b"]);
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("This is not going to be comfortable...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinzPos = -1;
                                var coinzExcd = false;
                                for (var ii = 0; ii < Inventory.length; ii++)
                                {
                                    if (Inventory[ii][0].type == "coins" && Inventory[ii][1] <= 300)
                                    {
                                        coinzPos = ii;
                                        break;
                                    }
                                    else if (Inventory[ii][0].type == "coins" && Inventory[ii][1] > 300)
                                    {
                                        coinzPos = ii;
                                        coinzExcd = true;
                                        break;
                                    }
                                }
                                if (coinzExcd)
                                {
                                    Inventory[coinzPos][1] -= 300;
                                }
                                else
                                {
                                    Inventory.splice(coinzPos, 1);
                                }
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 4;
                                player.gutWorms = false;
                                player.hunger = player.hungerMAX;
                                player.thirst = player.thirstMAX;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Please try not to waste my time...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Leon the Toll Master" || conversationID[0] == "Leon")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Leon";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.atalinToll == false)
                                {
                                    player.dialogueOptions.push(["...", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.gender == "Female" && player.title == "Highfolk" && player.raceName == "Nirwaden" || player.gender == "Female" && player.title == "Nobility" || player.gender == "Female" && player.title == "Royalty")
                            {
                                //text dialogue
                                setMsg("Welcome, my dame.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (player.title == "Highfolk" && player.raceName == "Nirwaden" || player.title == "Nobility" || player.title == "Royalty")
                            {
                                //text dialogue
                                setMsg("Welcome, my liege.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Halt! You must pay a ten coin toll if you wish to cross!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'll find another way to cross...", false, "b"], ["I don't have enough money.", false, "b"], ["Then I will not cross!", false, "b"]];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 10)
                                    {
                                        player.dialogueOptions.unshift(["(pay toll of 10 coins)", false, "a"])
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("Thanks, have a good day...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        Inventory[i][1] -= 10;
                                        if (Inventory[i][1] <= 0)
                                        {
                                            Inventory.splice(i, 1);
                                        }
                                        break;
                                    }
                                }
                                quests.atalinToll = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("If you don't pay, you don't cross.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Joaquin the Barkeep" || conversationID[0] == "Joaquin")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Joaquin";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"], ["Hey...", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.gender == "Female" && player.charisma >= 4 && player.gamemode != "protagonist" && player.title != "Highfolk" && player.title != "Nobility" && player.title != "Royalty" && player.matureContentFilter == false)
                            {
                                joaquinPrettyThing.play();
                                joaquinPrettyThing.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                            else if (player.gender == "Male" || player.gamemode == "protagonist" || player.title == "Nobility" || player.title == "Royalty" || player.title == "Highfolk")
                            {
                                joaquinDrink.play();
                                joaquinDrink.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                joaquinUgly.play();
                                joaquinUgly.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'm listening...", false, "a"], ["What sort of work?", false, "a"], ["I'm not.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                                joaquinHappy.play();
                                joaquinHappy.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            joaquinYourself.play();
                            joaquinYourself.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Sure, I'll try it, I guess...", false, "a"], ["Sure, count me down.", false, "a"], ["I'll take it.", false, "a"], ["Vile! I would never stoop to such depravity!", false, "b"], ["No thanks, that just doesn't sound like me.", false, "b"], ["No!", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            joaquinToWork.play();
                            joaquinToWork.onended = function()
                            {
                                player.estolRank = "Hooker";
                                player.estolgangFaction += 10;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            joaquinYourself.play();
                            joaquinYourself.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hey, Joaquin...", false, "a"], ["Hi there, Joaquin...", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            if (quests.estolHookup < 10)
                            {
                                joaquinNot.play();
                                joaquinNot.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                            }
                            else if (quests.estolHookup < 104)
                            {
                                joaquinKeepUp.play();
                                joaquinKeepUp.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                            }
                            else if (player.charisma >= 14)
                            {
                                joaquinGoodbye.play();
                                joaquinGoodbye.onended = function()
                                {
                                    if (player.estolRank == "Hooker")
                                    {
                                        player.estolgangFaction += 10;
                                    }
                                    player.estolRank = "Courtesan";
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Hooker" || conversationID[0] == "Hooker")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Hooker";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (player.gender != "Female")
                                {
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 15)
                                        {
                                            player.dialogueOptions.push(["(proposition 15 coins)", false, "a"]);
                                        }
                                    }
                                    if (player.getStrength() >= 10)
                                    {
                                        player.dialogueOptions.push(["(impose yourself)", false, "b"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            saxomoan.play();
                            player.blinded = true;
                            player.blindedStoreTime = new Date().getTime();
                            player.blindedTime = 3;
                            saxomoan.onended = function()
                            {
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        Inventory[i][1] -= 15;
                                        if (Inventory[i][1] <= 0)
                                        {
                                            Inventory.splice(i, 1);
                                        }
                                        break;
                                    }
                                }
                                player.energy += 1;
                                player.experience += 4;
                                player.strTime = new Date().getTime() + 300000;
                                player.strengthI = true;
                                player.sleep += 3;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            saxosob.play();
                            player.blinded = true;
                            player.blindedStoreTime = new Date().getTime();
                            player.blindedTime = 22;
                            saxosob.onended = function()
                            {
                                player.experience += 6;
                                player.strTime = new Date().getTime() + 315000;
                                player.strengthI = true;
                                player.sleep += 2;
                                player.estolgangFaction -= 10;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "John" || conversationID[0] == "John")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "John";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (player.gender == "Female" && player.energy >= 11)
                                {
                                    if (player.estolRank == "Hooker" || player.estolRank == "Courtesan")
                                    {
                                        player.dialogueOptions.push(["(Entertain him for 15 coins) [you get to keep 6 coins]", false, "a"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            saxomoan.play();
                            player.blinded = true;
                            player.blindedStoreTime = new Date().getTime();
                            player.blindedTime = 6;
                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                            saxomoan.onended = function()
                            {
                                playersTurnToSpeak = true;

                                var gaveCoins = false;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        Inventory[i][1] += 6;
                                        gaveCoins = true;
                                        break;
                                    }
                                }

                                if (gaveCoins == false)
                                {
                                    Inventory.unshift([new Item("coins", false, false), 6]);
                                }

                                player.energy = -11;
                                player.experience = Math.max(0, player.experience - 50);

                                //abuse
                                if (Math.random() > 0.65)
                                {
                                    alert("The John was rough with you...");
                                    if (Math.random() > 0.65)
                                    {
                                        player.health -= 2;
                                    }
                                    else
                                    {
                                        if (Math.random() > 0.65)
                                        {
                                            player.health -= 1;
                                        }
                                        else
                                        {
                                            if (Math.random() > 0.65)
                                            {
                                                player.health -= 11;
                                            }
                                            else
                                            {
                                                player.health -= 6;
                                            }
                                        }
                                    }
                                }

                                quests.estolHookup += 1;
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["How was I...", false, "a"], ["That was so good...", false, "a"], ["Oh, have you finished yet...", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                            dialogueReset(self);
                            ArtificialIntelligenceAccess = [];
                            change = "hookup";
                        }
                    }

                    if (self.ID == "Feniglio" || conversationID[0] == "Feniglio")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Feniglio";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                var haveEnuf = false;
                                if (quests.atalinStoragePurchased != true)
                                {
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 1200)
                                        {
                                            haveEnuf = true;
                                            player.dialogueOptions.push(["(buy storage space 1200 coins)", false, "a"]);
                                            break;
                                        }
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins")
                                {
                                    if (Inventory[i][1] - 1200 > 0)
                                    {
                                        Inventory[i][1] -= 1200;
                                        quests.atalinStoragePurchased = true;
                                    }
                                    else
                                    {
                                        Inventory.splice(i, 1);
                                        quests.atalinStoragePurchased = true;
                                    }
                                    break;
                                }
                            }
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Aarni the Stablemaster" || conversationID[0] == "Aarni")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Aarni";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 400)
                                    {
                                        player.dialogueOptions.push(["[buy naaprid for 400 coins]", false, "a"]);
                                        break;
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            var hunz = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 400)
                                {
                                    hunz = i;
                                    break;
                                }
                            }

                            if (hunz > -1)
                            {
                                //pay
                                Inventory[hunz][1] -= 400;
                                if (Inventory[hunz][1] < 1)
                                {
                                    Inventory.splice(hunz, 1);
                                }
                                //receive
                                ArtificialIntelligenceAccess.push(new Unit(596, 2003, "Naaprid", true, "player"));
                            }
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Jarl Rannuk Stambjord" || conversationID[0] == "Rannuk")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Rannuk";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.matrimonyTorStambjordQuest == true) // && player.gender == "Female" && player.raceName == "Freynor" && player.title == "Nobility"
                                {
                                    player.dialogueOptions = [["I address thee, Jarl Rannuk Stambjord, my betrothed.", false, "b"]];
                                }
                                else if (quests.matrimonyTorStambjordQuest == "complete")
                                {
                                    if (quests.matrimonyTorStambjordCompletionStyle == "marriage")
                                    {
                                        player.dialogueOptions = [["My Husband...", false, "c"]];
                                    }
                                    else //he hates you if you ran from the wedding or rejected him during it.
                                    {
                                        player.dialogueOptions = [["I wish to speak with you if you have a moment, Jarl Stambjord...", false, "d"]];
                                    }
                                }
                                else
                                {
                                    if (quests.rannukThreatened == false)
                                    {
                                        if (player.title != "Royalty" && player.title != "Nobility" && player.title != "Highfolk")
                                        {
                                            player.dialogueOptions = [["I wish to address thee, Jarl Stambjord of Venning...", false, "a"]];
                                        }
                                        else
                                        {
                                            player.dialogueOptions = [["I wish to speak with you if you have a moment, Jarl Stambjord...", false, "a"]];
                                        }
                                    }
                                    else
                                    {
                                        if (player.title != "Royalty" && player.title != "Nobility" && player.title != "Highfolk")
                                        {
                                            player.dialogueOptions = [["I wish to address thee, Jarl Stambjord of Venning...", false, "d"]];
                                        }
                                        else
                                        {
                                            player.dialogueOptions = [["I wish to speak with you if you have a moment, Jarl Stambjord...", false, "d"]];
                                        }
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.title != "Royalty" && player.title != "Nobility" && player.title != "Highfolk")
                            {
                                rannukPeasant.play();
                                rannukPeasant.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                            else
                            {
                                rannukQuery.play();
                                rannukQuery.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            rannukUnited.play();
                            rannukUnited.onended = function()
                            {
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                X = -20393;
                                Y = 41975;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Jarl Rannuk Stambjord")
                                    {
                                        ArtificialIntelligenceAccess[i].X = -20387;
                                        ArtificialIntelligenceAccess[i].Y = 41943;
                                        ArtificialIntelligenceAccess[i].newRotation = -1/2 * Math.PI;
                                    }
                                }
                                quests.matrimonyTorStambjordQuest = "coldfeet";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            rannukYesDelicateFlower.play();
                            rannukYesDelicateFlower.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            if (quests.matrimonyTorStambjordQuest == "complete" && quests.matrimonyTorStambjordCompletionStyle != "marriage")
                            {
                                rannukWoman.play();
                                rannukWoman.onended = function ()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                rannukNoWords.play();
                                rannukNoWords.onended = function ()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                    player.dialogueOptions = [["I am simply here to thank you for the excellent work you do as Jarl.", false, "b"], ["Nevermind, it wasn't important.", false, "c"]];

                                    if (quests.venningHomeOwned == false)
                                    {
                                        player.dialogueOptions.unshift(["I would like to purchase the property you have put up for sale.", false, "a"]);
                                    }
                                    if (quests.aNobleConspiracyQuest == true)
                                    {
                                        player.dialogueOptions.push(["I have found evidence that suggests you are involved in supporting the piratry that has been taking place in the northern sea.", false, "d"])
                                    }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            rannukYours.play();
                            rannukYours.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            rannukSpear.play();
                            rannukSpear.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1d")
                        {
                            if (player.title == "Nobility" || player.title == "Royalty")
                            {
                                rannukBribe.play();
                                rannukBribe.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 6;
                                    self.SC();
                                }
                            }
                            else
                            {
                                if (player.gender == "Male")
                                {
                                    rannukKillHim.play();
                                    rannukKillHim.onended = function()
                                    {
                                        quests.rannukThreatened = true;
                                        for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                        {
                                            if (ArtificialIntelligenceAccess[i].ID == "Stambjord Soldier" || ArtificialIntelligenceAccess[i].ID == "Stambjord Huskarl" || ArtificialIntelligenceAccess[i].ID == "Stambjord Captain")
                                            {
                                                ArtificialIntelligenceAccess[i].disturbedTime = new Date().getTime() + 10000000;
                                            }
                                        }
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    rannukKillHer.play();
                                    rannukKillHer.onended = function()
                                    {
                                        quests.rannukThreatened = true;
                                        for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                        {
                                            if (ArtificialIntelligenceAccess[i].ID == "Stambjord Soldier" || ArtificialIntelligenceAccess[i].ID == "Stambjord Huskarl" || ArtificialIntelligenceAccess[i].ID == "Stambjord Captain")
                                            {
                                                ArtificialIntelligenceAccess[i].disturbedTime = new Date().getTime() + 10000000;
                                            }
                                        }
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[Commense with the vows]", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            rannukVows.play();
                            rannukVows.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I do.", false, "a"], ["No.", false, "b"], ["Yes, of course!", false, "a"], ["How could I? I'm in love with someone else!", false, "b"], ["Yes, yes, yes, yes!", false, "a"], ["No, I would never marry such a debased and immoral person!", false, "b"], ["Ah hell no!", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            rannukBinding.play();
                            rannukBinding.onended = function()
                            {
                                quests.matrimonyTorStambjordQuest = "complete";
                                quests.matrimonyTorStambjordCompletionStyle = "marriage";
                                quests.completeQuests.push({name: "Matrimony: Tor/Stambjord", description: "You married Jarl Rannuk Stambjord of Venning! In doing so you have cemented your family's relation with Venning and you have a rich husband to care for you."});
                                player.freynorFaction += 400;
                                player.name = prompt("You Have Married into Another Noble House: (If your character's name includes a family name, please take this time to rename your character to reflect the Freydic cultural norm of adopting the husband's family name. The name your character is supposed to take on in this case is 'Stambjord'", player.name + " Stambjord");
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                change = "weddingOver";
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 6;
                                X = -18976;
                                Y = 44644;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Jarl Rannuk Stambjord")
                                    {
                                        ArtificialIntelligenceAccess[i].X = -18930;
                                        ArtificialIntelligenceAccess[i].Y = 44712;
                                        ArtificialIntelligenceAccess[i].newRotation = 0;
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            rannukNoUnion.play();
                            rannukNoUnion.onended = function()
                            {
                                quests.matrimonyTorStambjordQuest = "complete";
                                quests.matrimonyTorStambjordCompletionStyle = "rejection";
                                quests.completeQuests.push({name: "Matrimony: Tor/Stambjord", description: "You declined to marry the Jarl of Venning during the wedding ceremony and in doing so ended your father's planned marriage-alliance with house Stambjord. Scandalous!"});
                                player.freynorFaction -= 200;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                change = "weddingOver";
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;
                                for (var i = 0; i < ArtificialIntelligenceAccess.length; i++)
                                {
                                    if (ArtificialIntelligenceAccess[i].ID == "Jarl Rannuk Stambjord")
                                    {
                                        ArtificialIntelligenceAccess[i].X = -18930;
                                        ArtificialIntelligenceAccess[i].Y = 44712;
                                        ArtificialIntelligenceAccess[i].newRotation = 0;
                                    }
                                }

                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I love you.", false, "a"], ["Let me take you to bed, my love.", false, "b"], ["May I suggest a policy?", false, "c"]];

                                if (quests.aNobleConspiracyQuest == true)
                                {
                                    player.dialogueOptions.push(["It has come to my attention that our house is supporting piratry.", false, "d"])
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            rannukBringFlower.play();
                            rannukBringFlower.onended = function()
                            {
                                var floresQueDa = ["rilthasiaFlower", "brightbloomFlower", "tylunFlower", "vorlymFlower"]; //the jarl has spent extravagent amounts to have a couple foreign flowers to give as well. eg. vorlym and rilthasia
                                var florSel = Math.floor(Math.random() * 4);

                                var hits = 0;
                                for (var i = 0; i < Inventory.length; i ++)
                                {
                                    if (Inventory[i][0].type == floresQueDa[florSel])
                                    {
                                        Inventory[i][1] += 1;
                                        break;
                                    }
                                    else
                                    {
                                        hits += 1;
                                    }
                                }
                                if (hits == Inventory.length)
                                {
                                    Inventory.push([new Item(floresQueDa[florSel], false, false), 1]);
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4b")
                        {
                            rannukPetals.play();
                            rannukPetals.onended = function()
                            {
                                if (!quests.rannukChild)
                                {
                                    sleeperTime += 60 * 60 * 24 * 365 * 6.75;
                                    player.experience = 0;
                                    player.magicalExperience = 0;
                                    player.health = player.healthMAX;
                                    player.energy = player.energyMAX;
                                    player.will = player.willMAX;
                                    player.hunger = player.hungerMAX;
                                    player.thirst = player.thirstMAX;
                                }
                                sleep();
                                if (!quests.rannukChild)
                                {
                                    quests.rannukChild = true;
                                    quests.rannukChildName = prompt("Soon after having sexual relations with your newly wedded husband Jarl Rannuk Stambjord of Venning, you felt yourself growing heavy with child. Your husband lavishly spent from his massive fortune, doting upon you and making sure you were were satiated in any way that he was inclined to allow. Finally the day came when you went into labour and delivered your baby boy. You decided to name your son:", "Espen Stambjord");
                                    alert("You raised " + quests.rannukChildName + " in Venning in your husband's great longhouse. Your son was an anxious baby that cried all the time, even while you tried to comfort him. The only times he quieted were during his seemingly spontaneous naps and while he was feeding at your breast.");
                                    if (uniqueChars.OrjovTorLDS)
                                    {
                                        alert("As " + quests.rannukChildName + " aged he developed into a handsome young boy, your father came to visit him a few times and bragged about how he thought your son would make a fine hunter. Year after year your son grew more and more acquainted to the luxury of nobility...");
                                    }
                                    else
                                    {
                                        alert("As " + quests.rannukChildName + " aged he developed into a handsome young boy, and his rough playfulness demonstrated that he would grow to be a strong hunt-worthy man. Year after year your son grew more and more acquainted to the luxury of nobility...");
                                    }
                                    alert("He began to order people around, save for you and his father, and he seemed to considered himself to be superior to all around him. Now he is six years old and has been granted his own seat at the dining table (instead of sitting on your lap). You can tell that it makes him feel like his father, a figure he aspires to be like.");
                                    change = "makemy6yearoldherealready!";
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4c")
                        {
                            rannukDuty.play();
                            rannukDuty.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4d")
                        {
                            rannukJeopordize.play();
                            rannukJeopordize.onended = function()
                            {
                                quests.aNobleConspiracyQuest = "complete";
                                quests.aNobleConspiracyCompletionStyle = "complicit";
                                quests.completeQuests.push({name: "A Noble Conspiracy", description: "You have discovered that your husband is involved in supporting piratry, but their is little you can do about it as turning him in would risk your standing in the kingdom as well."});
                                player.experience += 85;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Nevermind.", false, "b"]];

                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 7100)
                                    {
                                        player.dialogueOptions.unshift(["It's all here. (give 7100 coins)", false, "a"]);
                                        break;
                                    }
                                }

                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "5b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            rannukWelcome.play();
                            rannukWelcome.onended = function()
                            {
                                var room = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 7100)
                                    {
                                        room = i;
                                    }
                                }

                                if (room > -1)
                                {
                                    Inventory[room][1] -= 7100;
                                    if (Inventory[room][1] < 1)
                                    {
                                        Inventory.splice(room, 1);
                                    }

                                    quests.venningHomeOwned = true;

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 6)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I do not require your coin, I agree that your actions are just, I was simply broaching the matter with you directly so I could understand your reasoning.", false, "a"], ["I'm starting to see how your reasons are just, I appologize if I had offended you.", false, "b"], ["I'm starting to see how your reasons are just, I appologize if I had offended you. (LIE)", false, "c"], ["You permit criminals to plunder freely in your lands and now you try to bribe me!? I will be telling the king of this treason.", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "6a")
                        {
                            if (player.gender == "Female")
                            {
                                rannukGoodLady.play();
                                rannukGoodLady.onended = function()
                                {
                                    quests.aNobleConspiracyQuest = "complete";
                                    quests.aNobleConspiracyCompletionStyle = "agreement";
                                    quests.completeQuests.push({name: "A Noble Conspiracy", description: "You confronted Jarl Rannuk Stambjord about his support for the local pirates, but you ultimately agreed with him that he was acting within his reasonable right as Jarl of Venning."});
                                    player.experience += 85;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                rannukGoodMan.play();
                                rannukGoodMan.onended = function()
                                {
                                    quests.aNobleConspiracyQuest = "complete";
                                    quests.aNobleConspiracyCompletionStyle = "agreement";
                                    quests.completeQuests.push({name: "A Noble Conspiracy", description: "You confronted Jarl Rannuk Stambjord about his support for the local pirates, but you ultimately agreed with him that he was acting within his reasonable right as Jarl of Venning."});
                                    player.experience += 85;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "6b")
                        {
                            rannukMyWay.play();
                            rannukMyWay.onended = function()
                            {
                                quests.aNobleConspiracyQuest = "complete";
                                quests.aNobleConspiracyCompletionStyle = "bribed";
                                quests.completeQuests.push({name: "A Noble Conspiracy", description: "You confronted Jarl Rannuk Stambjord about his support for the local pirates, but left with sealed lips after accepting a 500 coin bribe."});
                                player.experience += 85;
                                worldItems.push([new Item("coins", X, Y), 500]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6c")
                        {
                            rannukMyWay.play();
                            rannukMyWay.onended = function()
                            {
                                quests.aNobleConspiracyCompletionStyle = "lied";
                                worldItems.push([new Item("coins", X, Y), 500]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6d")
                        {
                            rannukThreaten.play();
                            rannukThreaten.onended = function()
                            {
                                quests.rannukThreatened = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Jarl Orjov Tor" || conversationID[0] == "Orjov")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Orjov";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.raceName == "Freynor" && player.gender == "Female" && player.title == "Nobility")
                                {
                                    player.dialogueOptions = [["Hello father.", false, "b"]];
                                    if (quests.matrimonyTorStambjordQuest == false)
                                    {
                                        player.dialogueOptions.push(["Have you yet found me a husband?", false, "c"]);
                                    }
                                }
                                else if (player.raceName == "Freynor" && player.gender == "Male" && player.title == "Nobility")
                                {
                                    player.dialogueOptions = [["Hello father.", false, "d"], ["I wish to go on a hunt.", false, "e"]];
                                }
                                else if (player.raceName == "Freynor" && player.title == "Nobility")
                                {
                                    player.dialogueOptions = [["Hello father.", false, "f"], ["I wish to go on a hunt.", false, "g"], ["Have you found me a spouse?", false, "h"]];
                                }
                                else if (player.title != "nobility" && player.title != "royalty")
                                {
                                    player.dialogueOptions = [["I wish to address thee, Jarl Tor of Teshir...", false, "a"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["I have a matter to discuss with you Jarl Tor...", false, "a"]];
                                }
                                if (quests.neighborlyConversionQuest == true)
                                {
                                    player.dialogueOptions.unshift(["I come as a humble servant of the eternal spirit to plead for the sake of the light.", false, "i"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                        else if (player.dialogueOptions[i][2] == "i")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0i";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.title != "nobility" && player.title != "royalty")
                            {
                                //text dialogue
                                setMsg("Speak, and be concise.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (quests.matrimonyTorStambjordCompletionStyle == "rejection" || quests.matrimonyTorStambjordCompletionStyle == "coldfeet")
                            {
                                //text dialogue
                                setMsg("What am I to do with you!? You have dishonoured the Tor name with your childish insolence! You were meant to link our house with that of Stambjord, but now you have only kindled strife...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("My fair daughter, your beauty is stunning! Your mother's doing no doubt...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            //text dialogue
                            setMsg("I have in fact, Jarl Rannuk Stambjord of Venning is your betrothed. When you are ready have the guards escort you north to him. I hope that you find happiness with him, but remember that we are counting on you to strengthen the unity of our houses. So be valiant and brave and do what must be done.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.matrimonyTorStambjordQuest = true;
                                quests.activeQuests.push({name: "Matrimony: Tor/Stambjord", description: "Your father, Jarl Orjov Tor of Teshir, has arrange your engagement to the Jarl of Venning, Rannuk Stambjord. You should form an escort of soldiers to take you north."});

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            //text dialogue
                            setMsg("My most beloved son, I hope all is going well for you!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            //text dialogue
                            setMsg("That's my boy! Gather the necessary forces from the town and be off! There's many a varmint to slay.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            //text dialogue
                            setMsg("I love you... despite your rarity... my child...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            //text dialogue
                            setMsg("Very well... Make sure to bring some soldiers with you, and... try not to die.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            //text dialogue
                            setMsg("I... my child... I simply can not! Nobody relevant will have you, given your condition! I love you deeply, but your condition is a curse on our house's longevity. You will have to find a peasant to bed you to continue our line... However, that is hardly necessary, as Gemesh has made it plain to me that our house is not meant to continue! Do what you will...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0i")
                        {
                            //text dialogue
                            setMsg("Speak then, what brings you to my land, Nirwad?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I appreciate the good work you have done as Jarl of Teshir", false, "c"]];
                                if (player.raceName == "Freynor" && player.title != "Royalty" && player.title != "Nobility" && player.title != "Highfolk" && player.hunger <= 11 && quests.orjovBeseeched == false)
                                {
                                    player.dialogueOptions.unshift(["I beseech thee, give me food, thine excellency.", false, "b"]);
                                }
                                if (!quests.teshirHomeOwned)
                                {
                                    player.dialogueOptions.unshift(["I wish to purchase property here in Teshir.", false, "a"]);
                                }
                                if (quests.neighborlyConversionQuest == true)
                                {
                                    player.dialogueOptions.unshift(["I beg that you grant the church of the holy and most eternal of spirits to bring the light to the good people of your land.", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("A fine home on the west side of Teshir can be yours for the price of 6200 coins.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("I am of the mind that feeding the hungry is the most temporary of solutions, instead, I grant you this axe. Use it to feed yourself, be it by felling trees or beasts.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.orjovBeseeched = true;
                                worldItems.push([new Item("timberAxe", X, Y), 1]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("And I appreciate your appreciation...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1d")
                        {
                            //text dialogue
                            setMsg("You expect me to renounce my peoples ways and customs to worship your God!?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Nevermind.", false, "b"]];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 6200)
                                    {
                                        player.dialogueOptions.unshift(["I will buy it. (give 6200 coins)", false, "a"]);
                                        break;
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("Then let it be known that it is yours!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var room = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 6200)
                                    {
                                        room = i;
                                    }
                                }

                                if (room > -1)
                                {
                                    Inventory[room][1] -= 6200;
                                    if (Inventory[room][1] < 1)
                                    {
                                        Inventory.splice(room, 1);
                                    }

                                    quests.teshirHomeOwned = true;
                                }

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Yes I do, abandon your vile ways and embrace the light of the eternal spirit!", false, "a"]];
                                if (player.getCharisma() >= 9)
                                {
                                    player.dialogueOptions.unshift(["The eternal spirit is no mere God, the eternal spirit is that which seeded all we know and love with life and light.", false, "b"]);
                                }
                                if (player.getCharisma() >= 14)
                                {
                                    player.dialogueOptions.unshift(["I request no such thing, I simply beg that you grant us permission to construct a church in your lands so that those who choose to seek the light may do so.", false, "c"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            if (player.title != "Royalty" && player.title != "Nobility")
                            {
                                setMsg("[while Lord Tor's huscarls are beating you up] You are hereby banished from my lands! Do not return if you wish to live...");
                            }
                            else
                            {
                                setMsg("If you did not have noble blood I would have you flogged and banished for this insolence! Leave my longhouse at once!");
                            }

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                if (player.title != "Royalty" && player.title != "Nobility")
                                {
                                    player.freynorRelation -= 400;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                    dialogueReset(self);
                                    player.blindedStoreTime = new Date().getTime();
                                    player.blindedTime = 2;
                                    player.health -= Math.min(22, 2/3 * player.healthMAX);
                                    X -= 1260;
                                    Y += 320;

                                    quests.neighborlyConversionCompletionStyle = "fail";
                                    quests.neighborlyConversionQuest = "complete";
                                    if (player.title != "Nobility" && player.title != "Royalty")
                                    {
                                        quests.completeQuests.push({name: "Neighborly Conversion", description: "You were flogged bloody then banished from Freynor by the Jarl of Teshir. Your faith will not be spreading west anytime soon."});
                                    }
                                    else
                                    {
                                        quests.completeQuests.push({name: "Neighborly Conversion", description: "You angered the Jarl of Teshir and he kicked you out of his lands... Needless to say your faith will not be spreading west anytime soon."});
                                    }
                                    player.nirwadenFaction += 10;
                                    player.fame -= 1;
                                }
                                else
                                {
                                    quests.neighborlyConversionCompletionStyle = "fail";
                                    quests.neighborlyConversionQuest = "complete";
                                    if (player.title != "Nobility" && player.title != "Royalty")
                                    {
                                        quests.completeQuests.push({name: "Neighborly Conversion", description: "You were flogged bloody then banished from Freynor by the Jarl of Teshir. Your faith will not be spreading west anytime soon."});
                                    }
                                    else
                                    {
                                        quests.completeQuests.push({name: "Neighborly Conversion", description: "You angered the Jarl of Teshir and he kicked you out of his lands... Needless to say your faith will not be spreading west anytime soon."});
                                    }
                                    player.nirwadenFaction += 10;

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            //text dialogue
                            setMsg("This eternal spirit you speak of is the creator of all things you say... then explain to me why your creator made the beasts and demons that plague the lands.          //*// YOUR EXPLINATION: The eternal spirit did not create the evil it merely formed a skin for it so that we do not die the instant we gaze upon its wretchedness. The eternal spirit has tasked us all to challenge these forces of evil. In doing so the eternal spirit has allowed us to be purified through deed, so that we don't have to be purified by flame. //*//                  I see, so this eternal spirit wishes that men have a strong resolve and that they prove themselves through action. I value 	these ideals and am inclined to allow your church to construct a temple to your eternal spirit here in Teshir.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.neighborlyConversionJarlConvinced = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3c")
                        {
                            //text dialogue
                            setMsg("I see no harm in that, but your church will obey the laws of my land or be banished from it...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.neighborlyConversionJarlConvinced = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Ukko, Sage of Gemesh" || conversationID[0] == "Ukko")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Ukko";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good day.", false, "a"], ["Would you bless me?", false, "b"], ["How can I prove myself in the eyes of Gemesh?", false, "c"]];
                                if (quests.stolenScriptureQuest == false)
                                {
                                    player.dialogueOptions.push(["Is there anything I could do to help the temple?", false, "d"]);
                                }
                                if (quests.stolenScriptureScrollGiven == false)
                                {
                                    player.dialogueOptions.push(["Teach me the secret art of frost, so I can be closer to Gemesh as you have become.", false, "e"]);
                                }
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "stolenTablet")
                                    {
                                        player.dialogueOptions.push(["I have retrieved the stolen tablet.", false, "f"]);
                                        break;
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            ukkoForSome.play();
                            ukkoForSome.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            ukkoBlessing.play();
                            ukkoBlessing.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            ukkoBravery.play();
                            ukkoBravery.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            ukkoFruits.play();
                            ukkoFruits.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            if (quests.stolenScriptureCompletionStyle == "philosophicalReward")
                            {
                                ukkoIf.play();
                                ukkoIf.onended = function()
                                {
                                    quests.stolenScriptureScrollGiven = true;
                                    hasItYa = false;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "iceSpikes")
                                        {
                                            Inventory[i][1] += 1;
                                            hasItYa = true;
                                            break;
                                        }
                                    }
                                    if (hasItYa == false)
                                    {
                                        Inventory.push([new Item("iceSpikes", false, false), 1]);
                                    }
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                ukkoClear.play();
                                ukkoClear.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            quests.stolenScriptureQuest = "complete";
                            player.freynorFaction += 35;
                            if (quests.stolenScriptureCompletionStyle == "philosophicalReward")
                            {
                                quests.completeQuests.push({name: "Stolen Scripture", description: "In the name of Gemesh you retrieved the ancient tablet that was stolen from the temple in Venning. It was in an abandoned mineshaft surrounded by basilisks."});
                                player.fame += 1;
                                player.magicalExperience += 50;
                            }
                            else
                            {
                                quests.completeQuests.push({name: "Stolen Scripture", description: "You retrieved the ancient tablet stolen from the temple of Gemesh in Venning and received a 100 coin reward. The tablet was in an abandoned mineshaft surrounded by basilisks."});
                                player.fame += 1;
                                player.experience += 200;
                                var yaLoHas = false;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        Inventory[i][1] += 100;
                                        yaLoHas = true;
                                        break;
                                    }
                                }
                                if (!yaLoHas)
                                {
                                    Inventory.unshift([new Item("coins", false, false), 100]);
                                }
                            }

                            var tabbytablet = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "stolenTablet")
                                {
                                    tabbytablet = i;
                                    break;
                                }
                            }

                            if (tabbytablet > -1)
                            {
                                Inventory.splice(tabbytablet, 1);
                            }

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I will do it.", false, "a"], ["This sounds like real work, I would prefer to get a real reward for doing real work.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            ukkoPath.play();
                            ukkoPath.onended = function()
                            {
                                quests.stolenScriptureCompletionStyle = "philosophicalReward";
                                quests.stolenScriptureQuest = true;
                                quests.activeQuests.push({name: "Stolen Scripture", description: "An important stone tablet that belonged to the temple of Gemesh in Venning city was stolen. Retrieve it."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            ukkoSate.play();
                            ukkoSate.onended = function()
                            {
                                quests.stolenScriptureCompletionStyle = "realReward";
                                quests.stolenScriptureQuest = true;
                                quests.activeQuests.push({name: "Stolen Scripture", description: "An important stone tablet that belonged to the temple of Gemesh in Venning city was stolen. Retrieve it."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Bjorn" || conversationID[0] == "Bjorn")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Bjorn";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (quests.venningStoragePurchased)
                                {
                                    player.dialogueOptions = [["Hello.", false, "b"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["Hello.", false, "a"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            bjornHelloThere.play();
                            bjornHelloThere.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            bjornKept.play();
                            bjornKept.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Sure.", false, "a"], ["No Thanks.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            bjornCostYou.play();
                            bjornCostYou.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Nevermind.", false, "b"]];
                                var haveEnuf = false;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 800)
                                    {
                                        haveEnuf = true;
                                        player.dialogueOptions.push(["You've got yourself a deal! (pay 800 coins)", false, "a"]);
                                        break;
                                    }
                                }
                                if (!haveEnuf)
                                {
                                    player.dialogueOptions.unshift(["I don't have that much.", false, "b"]);
                                    player.dialogueOptions.unshift(["I don't have that much with me.", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            bjornPleasure.play();
                            bjornPleasure.onended = function()
                            {
                                var room = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 800)
                                    {
                                        room = i;
                                    }
                                }

                                if (room > -1)
                                {
                                    Inventory[room][1] -= 800;
                                    if (Inventory[room][1] < 1)
                                    {
                                        Inventory.splice(room, 1);
                                    }

                                    quests.venningStoragePurchased = true;
                                    change = "justPurchasedVenningStorage";

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }

                    }

                    if (self.ID == "Cheryl the Tailor" || conversationID[0] == "Cheryl")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Cheryl";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                var romanceOrNot = false;
                                for (var i = 0; i < player.romance.length; i++)
                                {
                                    if (player.romance[i] == "cheryl")
                                    {
                                        romanceOrNot = true;
                                    }
                                }

                                if (romanceOrNot)
                                {
                                    player.dialogueOptions = [["Hi there my love.", false, "d"], ["I love you sweety!", false, "e"], ["Let's have a quick tumble.", false, "f"], ["Good Day!", false, "a"], ["How's business?", false, "b"], ["Let's go somewhere private with a bit less clothing.", false, "f"]];
                                    if (quests.cherylChild == true)
                                    {
                                        var childNameWithoutParenths = quests.cherylChildName;
                                        //childNameWithoutParenths.splice(0, 1);
                                        //childNameWithoutParenths.splice(childNameWithoutParenths.length - 1, 1);
                                        player.dialogueOptions.push(["How is our son, " + childNameWithoutParenths + "?", false, "g"], ["I want " + childNameWithoutParenths + " to come with me on my travels so that he can learn to be a man.", false, "h"]);
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions = [["Good Day!", false, "a"], ["How's business?", false, "b"]];
                                    if (player.charisma >= 4 && player.gender == "Male")
                                    {
                                        player.dialogueOptions.push(["You are absolutely gorgeous!", false, "c"], ["I am madly in love with you!", false, "i"], ["I have been in love with you since the very first moment I laid eyes on your beautiful face. I feel that we should be together.", false, "i"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                        else if (player.dialogueOptions[i][2] == "h")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0h";
                                        }
                                        else if (player.dialogueOptions[i][2] == "i")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0i";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            cherylAsWell.play();
                            cherylAsWell.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            var romanceOrNot = false;
                            for (var i = 0; i < player.romance.length; i++)
                            {
                                if (player.romance[i] == "cheryl")
                                {
                                    romanceOrNot = true;
                                }
                            }
                            for (var ii = 0; ii < ArtificialIntelligenceAccess.length; ii++)
                            {
                                if (ArtificialIntelligenceAccess[ii].ID == ("[ " + quests.cherylChildName + " ]"))
                                {
                                    if (ArtificialIntelligenceAccess[ii].baseTeam == "player")
                                    {
                                        quests.cherylChildAccompany = true;
                                    }
                                    else
                                    {
                                        quests.cherylChildAccompany = false;
                                    }
                                }
                            }

                            if (quests.cherylChild && !quests.cherylChildAccompany)
                            {
                                cherylDifficult.play();
                                cherylDifficult.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (romanceOrNot)
                            {
                                cherylWell.play();
                                cherylWell.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                cherylStitching.play();
                                cherylStitching.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            cherylKind.play();
                            cherylKind.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            cherylDarling.play();
                            cherylDarling.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            cherylILoveYou.play();
                            cherylILoveYou.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            cherylHoping.play();
                            cherylHoping.onended = function()
                            {
                                if (!quests.cherylChild)
                                {
                                    sleeperTime += 60 * 60 * 24 * 365 * 6.75;
                                    player.health = player.healthMAX;
                                    player.energy = player.energyMAX;
                                    player.will = player.willMAX;
                                    player.hunger = player.hungerMAX;
                                    player.thirst = player.thirstMAX;
                                    player.blindedStoreTime = new Date().getTime();
                                    player.blindedTime = 7;
                                    player.experience += 250; // gain for whatever your character did to provide for your new family for 6 years.
                                }
                                else
                                {
                                    player.blindedStoreTime = new Date().getTime();
                                    player.blindedTime = 3;
                                }

                                if (!quests.cherylChild)
                                {
                                    quests.cherylChild = true;
                                    quests.cherylChildName = prompt("Just a few weeks after having relations with Cheryl that night she confided to you that she was pregnant with your child. You did what you could to provide for her until the day came when your baby was born. Cheryl, with your input decided to name your child...", "Gunder");
                                    alert("You provided for Cheryl and " + quests.cherylChildName + " in whatever ways that you could. Your son grew fast and before you knew it he had turned six years old.");
                                    change = "makemy6yearoldherealready!";
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            if (uniqueChars.cherylChildLDS)
                            {
                                cherylBehaving.play();
                                cherylBehaving.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                cherylDead.play();
                                cherylDead.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0h")
                        {
                            cherylSafe.play();
                            cherylSafe.onended = function()
                            {
                                for (var ii = 0; ii < ArtificialIntelligenceAccess.length; ii++)
                                {
                                    if (ArtificialIntelligenceAccess[ii].ID == ("[ " + quests.cherylChildName + " ]"))
                                    {
                                        ArtificialIntelligenceAccess[ii].baseTeam = "player";
                                        ArtificialIntelligenceAccess[ii].team = "player";
                                    }
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0i")
                        {
                            cherylSame.play();
                            cherylSame.onended = function()
                            {
                                player.romance.push("cheryl");
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Ederhal the Innkeeper" || conversationID[0] == "Ederhal")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Ederhal";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.raceName == "Thengar" || player.raceName == "Freynor" || player.raceName == "Vardan")
                            {
                                //text dialogue
                                setMsg("So, what can I get for you?");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (player.raceName == "Kel")
                            {
                                //text dialogue
                                setMsg("Don't pollute my air with your filth, Kel!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Say what you're gonna say, and get it over with quickly.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'm looking for something to drink.", false, "a"], ["I want a place to spend the night.", false, "b"], ["Are there any interesting rumors going about?", false, "c"], ["Are there any jobs that I could take?", false, "d"]];

                                if (quests.debtCollectorQuest == true)
                                {
                                    player.dialogueOptions.push(["Who should I collect the money from and how much do they owe?", false, "e"]);
                                }
                                if (quests.draftAndDieQuest == true && uniqueChars.friedrichLDS == false)
                                {
                                    player.dialogueOptions.push(["Your shipment is in, now where's my coin?", false, "g"], ["The task is complete, I'm back for my pay.", false, "g"]);
                                }

                                var hasEnufCoinz = false;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 229)
                                    {
                                        hasEnufCoinz = true;
                                        break;
                                    }
                                }
                                if (hasEnufCoinz && quests.debtCollectorQuest == true)
                                {
                                    player.dialogueOptions.unshift(["I collected the bar tabs. (give 229 coins)", false, "f"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1g";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("Good, you came to the right place.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Its 9 coins per night, and don't ask for extra sheets.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("I don't gossip. You're going to have to find some other looselip to hear that from.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                if (quests.thePlightOfLethikQuest != "complete")
                                {
                                    conversationID[1] = 3;
                                }
                                else
                                {
                                    conversationID[1] = 1;
                                }
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1d")
                        {
                            if (quests.debtCollectorQuest == false)
                            {
                                //text dialogue
                                setMsg("Sure there are, I could use a debt collector. I need someone to collect the unpaid tabs from some of my clients that refused to pay up. They're locals, so they might need some convincing...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 4;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else if (quests.draftAndDieQuest == false && uniqueChars.friedrichLDS == true)
                            {
                                //text dialogue
                                setMsg("Well, there's one other job I can think of, but I don't know if I can trust you with it.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 5;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1e")
                        {
                            if (quests.debtCollectorWho == false)
                            {
                                quests.debtCollectorWho = true;
                                //text dialogue
                                setMsg("Axel owes 33, Hanz owes 39, Lambert owes 47, Lenard owes 65, that drunken bastard, and Conrad owes me 45, so just make sure you get me all 229 coins and I'll give you your pay.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Lets see, Hanz owes 39, Lenard owes 65, Axel owes 33, Conrad owes 45, and Lambert owes me 47. Make sure to get me all 229 coins and I'll give you your pay. Remember, you'll get more than just a cut when you bring it all back to me.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1f")
                        {
                            //text dialogue
                            setMsg("Here's your cut, I hope you're content.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                var coinReqq = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][1] >= 229 && Inventory[i][0].type == "coins")
                                    {
                                        coinReqq = i;
                                        break;
                                    }
                                }

                                if (coinReqq > -1)
                                {
                                    quests.debtCollectorQuest = "complete";
                                    quests.completeQuests.push({name: "Beer Money", description: "You brought Ederhal the Innkeeper the money that his clients owed him for their bar tabs."});
                                    Inventory[coinReqq][1] -= 169;
                                    player.thengarFaction += 5;
                                    player.experience += 50;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    worldItems.push([new Item("skolLeatherGloves", X, Y), 1]);

                                    self.SC();
                                }
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1g")
                        {
                            if (quests.draftAndDiePlayersKill == true)
                            {
                                var coinReqq = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins")
                                    {
                                        coinReqq = i;
                                        break;
                                    }
                                }

                                if (coinReqq > -1)
                                {
                                    Inventory[coinReqq][1] += quests.draftAndDieReward;
                                }
                                else
                                {
                                    Inventory.unshift([new Item("coins", false, false), quests.draftAndDieReward]);
                                }
                                quests.draftAndDieQuest = "complete";
                                quests.completeQuests.push({name: "To Draft to Death", description: "You assassinated the captain of the guard of Lethik City for a hefty sum."});
                                player.experience += 250;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                //text dialogue
                                setMsg("Forget about it.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    quests.draftAndDieQuest = "complete";
                                    quests.completeQuests.push({name: "To Draft to Death", description: "The captain of the guard was killed, but not by you. Your employer Ederhal was delighted that he no longer required such costly services as yours."});
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Alright, here you are. (give 9 coins)", false, "a"], ["Nevermind.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            var room = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 9)
                                {
                                    room = i;
                                }
                            }
                            if (room < 0)
                            {
                                //text dialogue
                                setMsg("Forget about it.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                Inventory[room][1] -= 9;
                                if (Inventory[room][1] < 1)
                                {
                                    Inventory.splice(room, 1);
                                }

                                sleep();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Nevermind.", false, "b"], ["Forget it.", false, "b"], ["I can respect that.", false, "b"]];
                                var hasEnufCoinz = false;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 10)
                                    {
                                        hasEnufCoinz = true;
                                        break;
                                    }
                                }
                                if (hasEnufCoinz)
                                {
                                    player.dialogueOptions.unshift(["What if I were to pay you 10 coins?", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "3b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            var room = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 10)
                                {
                                    room = i;
                                }
                            }
                            if (room < 0)
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                Inventory[room][1] -= 10;
                                if (Inventory[room][1] < 1)
                                {
                                    Inventory.splice(room, 1);
                                }

                                //text dialogue
                                setMsg("Yeah, 10 coins will get you what you want to know. I've heard that old lady hildegard is a sorceress, some folks are wanting to burn her away... but I'm thinking that's all a load of nonsense. She's a nice woman, she dosn't have any reason to do anything to harm the town, she is one of us.");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["How much will you pay?", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            //text dialogue
                            setMsg("60 coins and a little something else, but you don't get nothing until you come back with the tabs.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 8;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (player.getCharisma() >= 12)
                                {
                                    player.dialogueOptions.unshift(["What is it?", false, "a"], ["Elaborate.", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.unshift(["What is it?", false, "b"], ["Trust me, you can trust me. I'm trustworthy.", false, "b"]);
                                }

                                if (player.getDexterity() >= 25)
                                {
                                    player.dialogueOptions.unshift(["I'm highly qualified, tell me about the job.", false, "a"]);
                                }
                                else if (player.getDexterity() >= 15)
                                {
                                    player.dialogueOptions.push(["Trust doesn't matter, I've got skill.", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            //text dialogue
                            setMsg("My son was drafted into the front lines by the Captain of the guard. He died in a raid against the Kels. I can't sleep at night knowing that the man who sent my son to his death is himself nested safely in town away from all harm.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            //text dialogue
                            setMsg("Forget about it.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 6)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What are you proposing that I do?", false, "a"]];
                                if (player.getCharisma() >= 20)
                                {
                                    player.dialogueOptions.unshift(["I understand what needs to be done; I will work for no less than 500 coins", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "6b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "6a")
                        {
                            //text dialogue
                            setMsg("Kill the captain so that my son can be avenged.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 7;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6b")
                        {
                            quests.activeQuests.push({name: "To Draft to Death", description: "Assassinate the captain of the guard of Lethik City for drafting the Innkeeper's son."});
                            quests.draftAndDieQuest = true;
                            quests.draftAndDieReward = 500;

                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                        }
                        else if (conversationID[1] == 7)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I refuse.", false, "a"], ["I will do it for 300 coins.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "7a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "7b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "7a")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                        }
                        else if (conversationID[1] == "7b")
                        {
                            quests.activeQuests.push({name: "To Draft to Death", description: "Assassinate the captain of the guard of Lethik City for drafting the Innkeeper's son."});
                            quests.draftAndDieQuest = true;
                            quests.draftAndDieReward = 300;

                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                        }
                        else if (conversationID[1] == 8)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'll do it.", false, "a"], ["That does not sound like something I would want to do.", false, "b"], ["My talents would be wasted doing such a dull job.", false, "c"], ["Who do I get to kill?", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "8a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "8b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "8c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "8d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "8a")
                        {
                            quests.activeQuests.push({name: "Beer Money", description: "You have been tasked to collect 229 coins in bar tabs for Ederhal the Innkeeper."});
                            quests.debtCollectorQuest = true;

                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                        }
                        else if (conversationID[1] == "8b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                        }
                        else if (conversationID[1] == "8c")
                        {
                            if (quests.draftAndDieQuest == false && uniqueChars.friedrichLDS == true)
                            {
                                //text dialogue
                                setMsg("Well, there's one other job I can think of, but I don't know if I can trust you with it...");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 5;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "8d")
                        {
                            //text dialogue
                            setMsg("Whoa there, don't kill them! Just get them to pay what they owe. You can't just go around killing my customers.");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 8;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Seeth the Innkeeper" || conversationID[0] == "Seeth")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Seeth";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                dialogueRND = Math.round(Math.random());
                                player.dialogueOptions = [["Hello.", false, "a"], ["I'm looking for a place to stay the night.", false, "b"], ["Have you heard any interesting tales recently?", false, "c"], ["How's business?", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            seethTakeASeat.play();
                            seethTakeASeat.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            seeth10Coins.play();
                            seeth10Coins.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            if (dialogueRND == 1)
                            {
                                if (uniqueChars.jalmariLDS)
                                {
                                    seethPiratry.play();
                                    seethPiratry.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    seethJustHuman.play();
                                    seethJustHuman.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                            else
                            {
                                if (quests.theMineshaftMysteryQuest != "complete")
                                {
                                    seethBones.play();
                                    seethBones.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                        if (quests.theMineshaftMysteryQuest == false)
                                        {
                                            quests.theMineshaftMysteryQuest = true;
                                            quests.activeQuests.push({name: "The Mineshaft Mystery", description: "An abandoned mineshaft to the south of Venning City was said to potentially have stashed away treasure inside."});
                                        }
                                    }
                                }
                                else
                                {
                                    seethLurk.play();
                                    seethLurk.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            seethWell.play();
                            seethWell.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[previous dialogue options]", false, "b"]];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 10)
                                    {
                                        player.dialogueOptions.unshift(["I'll take it. (pay 10 coins)", false, "a"]);
                                        break;
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            var room = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 10)
                                {
                                    room = i;
                                }
                            }

                            if (room > -1)
                            {
                                Inventory[room][1] -= 10;
                                if (Inventory[room][1] < 1)
                                {
                                    Inventory.splice(room, 1);
                                }

                                sleep();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Hildegard" || conversationID[0] == "Hildegard")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Hildegard";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.thePlightOfLethikWitchInterrogated == true && quests.thePlightOfLethikQuest == true)
                                {
                                    player.dialogueOptions.unshift(["I'm not done with you, hag!", false, "a"]);
                                    player.dialogueOptions.unshift(["Hello again.", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["Hello.", false, "a"]);
                                    player.dialogueOptions.push(["Hi there.", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (quests.thePlightOfLethikWitchInterrogated == false)
                            {
                                //text dialogue
                                setMsg("Why hi there, sweety!");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                            else
                            {
                                //text dialogue
                                setMsg("What do you want now!?");

                                //on ended text dialogue
                                if (tellMessage == "reset")
                                {
                                    msgReset();

                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                                else
                                {
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["How are you?", false, "a"]];
                                if (quests.thePlightOfLethikQuest == true)
                                {
                                    player.dialogueOptions.unshift(["Prepare to die you foul hag!", false, "c"]);
                                    player.dialogueOptions.unshift(["You have been accused of witchcraft! How do you plead?", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            //text dialogue
                            setMsg("Not well, to be honest I've woken up crying every morning since my son's been drafted to fight in the war...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            //text dialogue
                            setMsg("Of course I'm not a witch!! Why would someone accuse me of such a nasty thing!?");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.thePlightOfLethikWitchInterrogated = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            //text dialogue
                            setMsg("Wait!!! Don't kill me, please! Don't kill me!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.thePlightOfLethikWitchInterrogated = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Then tell me witch, who cursed Axel's field?", false, "a"], ["I don't believe you.", false, "b"], ["Then who might I ask is behind this outrageous and vile deed, who cursed the town field?", false, "a"], ["I've heard enough of your lies, witch!", false, "b"], ["If not you, who then cursed Axel's field?", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            //text dialogue
                            setMsg("I don't know, but if anyone's responsible it would probably be that strange Vardan man with the dark cloak. He came to town a little while ago...");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                quests.thePlightOfLethikVardan = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["The punishment for witchcraft is death, crone.", false, "a"], ["You should have considered the value of your life before you went into witchcraft, it's too late for you now.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            //text dialogue
                            setMsg("I'm not a witch! I swear I'm not!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["That is exactly what a witch would say.", false, "a"], ["If your not a witch then why were you muttering spells by his field?", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            tellMessage = false;
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            tellMessage = false;
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "4b")
                        {
                            //text dialogue
                            setMsg("I wasn't, I was singing to myself!!");

                            //on ended text dialogue
                            if (tellMessage == "reset")
                            {
                                msgReset();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                            else
                            {
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Johanna the Herbalist" && conversationID[0] != "Lena" || conversationID[0] == "Johanna")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Johanna";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good Day.", false, "a"], ["I need medical supplies, I'm hurt.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (uniqueChars.lenaLDS)
                            {
                                johannaHelp.play();
                                johannaHelp.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                johannaLeave.play();
                                johannaLeave.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (uniqueChars.lenaLDS)
                            {
                                johannaPoor.play();
                                johannaPoor.onended = function()
                                {
                                    if (player.health >= 0.75 * player.healthMAX)
                                    {
                                        johannaFine.play();
                                        johannaFine.onended = function()
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                    }
                                    else
                                    {
                                        johannaOwch.play();
                                        johannaOwch.onended = function()
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                    }
                                }
                            }
                            else
                            {
                                johannaLeave.play();
                                johannaLeave.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Lena" && conversationID[0] != "Johanna" || conversationID[0] == "Lena")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Lena";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"], ["What do you do around here?", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (uniqueChars.johannaLDS)
                            {
                                lenaHi.play();
                                lenaHi.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                lenaAway.play();
                                lenaAway.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (uniqueChars.johannaLDS)
                            {
                                lenaPotions.play();
                                lenaPotions.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                lenaAway.play();
                                lenaAway.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Brunelda the Merchant" || conversationID[0] == "Brunelda")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Brunelda";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"], ["How's business?", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            bruneldaLollygagging.play();
                            bruneldaLollygagging.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            bruneldaQuestions.play();
                            bruneldaQuestions.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Markos the Pit Master" || conversationID[0] == "Markos")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Markos";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I want to fight in the sand pit!", false, "a"], ["When will the next fight be?", false, "b"]];
                                if (player.raceName == "Thengar" && player.title == "Royalty" || player.raceName == "Thengar" && player.title == "Nobility")
                                {
                                    player.dialogueOptions.unshift(["Have one of the kellish prisoners devoured by beasts.", false, "c"], ["Have one of the kellish prisoners felled by a pit fighter.", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.title == "Royalty" || player.title == "Nobility")
                            {
                                if (player.gender == "Female")
                                {
                                    markosShocked.play();
                                    markosShocked.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 1;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    markosLiege.play();
                                    markosLiege.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 1;
                                        self.SC();
                                    }
                                }
                            }
                            else
                            {
                                markosPick.play();
                                markosPick.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            markosNow.play();
                            markosNow.onended = function()
                            {
                                quests.pitFight = "spectacle";
                                change = "pitfight";
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            markosRightAway.play();
                            markosRightAway.onended = function()
                            {
                                quests.kellExecution = "beasts";
                                change = "pitfight";
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            markosRightAway.play();
                            markosRightAway.onended = function()
                            {
                                quests.kellExecution = "champion";
                                change = "pitfight";
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[bears]", false, "a"], ["[skols]", false, "b"], ["[nogs]", false, "c"], ["[pit fighters]", false, "d"], ["[kellish prisoners]", false, "e"], ["Nevermind.", false, "f"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1f";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            X = 51550;
                            Y = -8115;
                            quests.pitFight = "bears";
                            change = "pitfight";
                            player.blinded = true;
                            player.blindedStoreTime = new Date().getTime();
                            player.blindedTime = 0.2;

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1b")
                        {
                            X = 51550;
                            Y = -8115;
                            quests.pitFight = "skols";
                            change = "pitfight";
                            player.blinded = true;
                            player.blindedStoreTime = new Date().getTime();
                            player.blindedTime = 0.2;

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1c")
                        {
                            X = 51550;
                            Y = -8115;
                            quests.pitFight = "nogs";
                            change = "pitfight";
                            player.blinded = true;
                            player.blindedStoreTime = new Date().getTime();
                            player.blindedTime = 0.2;

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1d")
                        {
                            X = 51550;
                            Y = -8115;
                            quests.pitFight = "pitFighters";
                            change = "pitfight";
                            player.blinded = true;
                            player.blindedStoreTime = new Date().getTime();
                            player.blindedTime = 0.2;

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1e")
                        {
                            X = 51550;
                            Y = -8115;
                            quests.pitFight = "prisoners";
                            change = "pitfight";
                            player.blinded = true;
                            player.blindedStoreTime = new Date().getTime();
                            player.blindedTime = 0.2;

                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1f")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Dagmar the Smith" || conversationID[0] == "Dagmar")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Dagmar";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"], ["What do you have for sale?", false, "b"], ["Would you accept me as an apprentice?", false, "c"], ["Have you been a smith long?", false, "d"], ["I have some ore for sale.", false, "e"]];
                                if (quests.swordDeliveryQuest == false)
                                {
                                    player.dialogueOptions.push(["Have any work for me?", false, "f"]);
                                }
                                else if (quests.swordDeliveryQuest == true)
                                {
                                    player.dialogueOptions.unshift(["Who am I to deliver this to?", false, "g"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            dagmarLike.play();
                            dagmarLike.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            dagmarLookAround.play();
                            dagmarLookAround.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            dagmarOne.play();
                            dagmarOne.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            dagmarDecades.play();
                            dagmarDecades.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            dagmarGot.play();
                            dagmarGot.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            dagmarSword.play();
                            dagmarSword.onended = function()
                            {
                                quests.activeQuests.push({name: "Sword Delivery", description: "Deliver the newly forged sword to its buyer."});
                                quests.swordDeliveryQuest = true;
                                Inventory.push([new Item("adolfsNewSword", false, false), 1]);

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            dagmarAdolf.play();
                            dagmarAdolf.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[previous dialogue options]", false, "c"]];

                                var coalHas = -1;
                                var ironHas = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "ironOre" && Inventory[i][1] >= 1)
                                    {
                                        ironHas = i;
                                    }
                                    else if (Inventory[i][0].type == "coal" && Inventory[i][1] >= 1)
                                    {
                                        coalHas = i;
                                    }
                                }

                                if (ironHas > -1)
                                {
                                    player.dialogueOptions.unshift(["[sell iron 8 coins]", false, "b"])
                                }
                                if (coalHas > -1)
                                {
                                    player.dialogueOptions.unshift(["[sell coal 6 coins]", false, "a"])
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            dagmarCoal.play();
                            dagmarCoal.onended = function()
                            {
                                var coalHas = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coal" && Inventory[i][1] >= 1)
                                    {
                                        coalHas = i;
                                    }
                                }

                                if (coalHas > -1)
                                {
                                    if (Inventory[coalHas][1] == 1)
                                    {
                                        Inventory.splice(coalHas, 1);
                                    }
                                    else
                                    {
                                        Inventory[coalHas][1] -= 1;
                                    }
                                }
                                worldItems.push([new Item("coins", X, Y), 6]);

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            dagmarIron.play();
                            dagmarIron.onended = function()
                            {
                                var ironHas = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "ironOre" && Inventory[i][1] >= 1)
                                    {
                                        ironHas = i;
                                    }
                                }

                                if (ironHas > -1)
                                {
                                    if (Inventory[ironHas][1] == 1)
                                    {
                                        Inventory.splice(ironHas, 1);
                                    }
                                    else
                                    {
                                        Inventory[ironHas][1] -= 1;
                                    }
                                }
                                worldItems.push([new Item("coins", X, Y), 8]);
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Adolf the Pit Fighter" || conversationID[0] == "Adolf")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Adolf";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good Day.", false, "a"], ["What are you fighting?", false, "b"]];

                                if (quests.swordDeliveryQuest)
                                {
                                    var swordHas = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "adolfsNewSword" && Inventory[i][1] >= 1)
                                        {
                                            swordHas = i;
                                        }
                                    }
                                    if (swordHas > -1)
                                    {
                                        player.dialogueOptions.unshift(["I have the sword that you purchased from Dagmar.", false, "c"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            adolfSure.play();
                            adolfSure.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            adolfDontKnow.play();
                            adolfDontKnow.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            adolfWin.play();
                            adolfWin.onended = function()
                            {
                                var swordHas = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "adolfsNewSword" && Inventory[i][1] >= 1)
                                    {
                                        swordHas = i;
                                    }
                                }

                                if (swordHas > -1)
                                {
                                    if (Inventory[swordHas][1] == 1)
                                    {
                                        Inventory.splice(swordHas, 1);
                                    }
                                    else
                                    {
                                        Inventory[swordHas][1] -= 1;
                                    }
                                }

                                quests.swordDeliveryQuest = "complete";
                                player.experience += 75;
                                player.thengarFaction += 2;
                                //player.fame += 1;
                                worldItems.push([new Item("coins", X, Y), 10]);
                                quests.completeQuests.push({name: "Sword Delivery", description: "You delivered a newly forged blade to Adolf, a pit fighter who needed it for a fight."});
                                self.baseTeam = "arena1";
                                self.team = "arena1";
                                change = "pitfight";
                                player.blinded = true;
                                player.blindedStoreTime = new Date().getTime();
                                player.blindedTime = 1;

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Ser Olis Pynske" || conversationID[0] == "Pynske")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Pynske";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hello.", false, "a"], ["Who are you?", false, "b"], ["How did you become a knight?", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            olisHello.play();
                            olisHello.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (player.raceName == "Freynor")
                            {
                                if (player.title == "Royalty")
                                {
                                    if (player.gender == "Female")
                                    {
                                        olisGraceF.play();
                                        olisGraceF.onended = function()
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                    }
                                    else
                                    {
                                        olisMajestyM.play();
                                        olisMajestyM.onended = function()
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                    }
                                }
                                else if (player.title == "Nobility")
                                {
                                    if (player.gender == "Male")
                                    {
                                        olisMyLord.play();
                                        olisMyLord.onended = function()
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                    }
                                    else
                                    {
                                        olisMyLady.play();
                                        olisMyLady.onended = function()
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                    }
                                }
                                else if (player.title == "Highfolk")
                                {
                                    olisIntroAgain.play();
                                    olisIntroAgain.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    olisSurely.play();
                                    olisSurely.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                            else
                            {
                                if (player.title == "Royalty" || player.title == "Nobility")
                                {
                                    if (player.gender == "Male")
                                    {
                                        olisYourLordship.play();
                                        olisYourLordship.onended = function()
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                    }
                                    else
                                    {
                                        olisYourLadyship.play();
                                        olisYourLadyship.onended = function()
                                        {
                                            playersTurnToSpeak = true;
                                            player.dialoguePosition = 0;
                                            conversationID[1] = 0;
                                            self.SC();
                                        }
                                    }
                                }
                                else if (player.title == "Highfolk")
                                {
                                    olisIntroAgain.play();
                                    olisIntroAgain.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    olisIAm.play();
                                    olisIAm.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            if (player.title == "Nobility" && player.raceName == "Freynor")
                            {
                                olisHero.play();
                                olisHero.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (player.title == "Royalty" || player.title == "Nobility" || player.title == "Highfolk")
                            {
                                olisSavedHeir.play();
                                olisSavedHeir.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                olisBetterThanYou.play();
                                olisBetterThanYou.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Garld the Crazy Beggar" || conversationID[0] == "Garld")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Garld";


                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good Day.", false, "a"]];
                                if (quests.garldCrazyScroll == false)
                                {
                                    player.dialogueOptions.push(["What's that parchment you have in your hand?", false, "b"]);
                                }
                                else if (quests.garldCrazyScroll == true)
                                {
                                    player.dialogueOptions.push(["[try to obtain the parchment]", false, "c"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                            random = Math.floor(Math.random() * 4);
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                            random = Math.floor(Math.random() * 2);
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (random == 0)
                            {
                                garldCurse.play();
                                garldCurse.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (random == 1)
                            {
                                garldDemons.play();
                                garldDemons.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (random == 2)
                            {
                                garldTwig.play();
                                garldTwig.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (random == 3)
                            {
                                garldFiend.play();
                                garldFiend.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (random == 0)
                            {
                                garldWord.play();
                                garldWord.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                            else if (random == 1)
                            {
                                garldMemories.play();
                                garldMemories.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 4;
                            self.SC();
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Tell me more...", false, "a"], ["Ahuh, good luck with that...", false, "b"], ["I've heard enough of your gibberish!", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                            random = Math.floor(Math.random() * 2);
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            if (random == 0)
                            {
                                garldTrip.play();
                                garldTrip.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                            else if (random == 1)
                            {
                                garldFingers.play();
                                garldFingers.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What does self have to do with the parchment in your hand?", false, "a"], ["Go on.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                            random = Math.floor(Math.random() * 2);
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            if (random == 0)
                            {
                                garldMarkings.play();
                                garldMarkings.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                            }
                            else if (random == 1)
                            {
                                garldYouth.play();
                                garldYouth.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I understand now...", false, "a"], ["I get it now...", false, "a"], ["I want to join with you in the worship of the sky!", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                            random = Math.floor(Math.random() * 3);
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            if (random == 0)
                            {
                                garldYouDo.play();
                                garldYouDo.onended = function()
                                {
                                    quests.garldCrazyScroll = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (random == 1)
                            {
                                garldDoomed.play();
                                garldDoomed.onended = function()
                                {
                                    quests.garldCrazyScroll = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (random == 2)
                            {
                                garldToils.play();
                                garldToils.onended = function()
                                {
                                    quests.garldCrazyScroll = true;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                var coiners = 0;
                                //find the players coins' quantity
                                for (var j = 0; j < Inventory.length; j++)
                                {
                                    if (Inventory[j][0].type == "coins")
                                    {
                                        coiners = Inventory[j][1];
                                    }
                                }
                                if (player.getCharisma() >= 4 && coiners >= 1)
                                {
                                    player.dialogueOptions.push(["That paper is nothing compared to this shiny medallion of awesomeness!", false, "a"]);
                                }
                                if (player.getCharisma() >= 8)
                                {
                                    player.dialogueOptions.push(["Ye' of little faith, I am the sky bearer cometh. By the sky's will thou shalt deliver the devine parchment unto me!", false, "b"]);
                                    player.dialogueOptions.push(["I am the great one, um... the sky bearer... yeah that, it is time that I take what is truly mine.", false, "b"]);
                                }
                                if (coiners >= 100)
                                {
                                    player.dialogueOptions.push(["I see the value of that parchment. Here, I will buy it from you.", false, "c"]);
                                }
                                player.dialogueOptions.push(["[don't try to obtain the parchment]", false, "d"]);
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "4d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            garldMedallion.play();
                            garldMedallion.onended = function()
                            {
                                for (var j = 0; j < Inventory.length; j++)
                                {
                                    if (Inventory[j][0].type == "coins")
                                    {
                                        if (Inventory[j][1] > 1)
                                        {
                                            Inventory[j][1] -= 1
                                        }
                                        else
                                        {
                                            Inventory.splice(j, 1);
                                        }
                                        break;
                                    }
                                }
                                Inventory.push([new Item("summonFrich", false, false), 1]);
                                quests.garldCrazyScroll = "obtained1";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4b")
                        {
                            garldBearer.play();
                            garldBearer.onended = function()
                            {
                                Inventory.push([new Item("summonFrich", false, false), 1]);
                                quests.garldCrazyScroll = "obtained";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4c")
                        {
                            garldBy.play();
                            garldBy.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4d")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["No, I mean I will pay you for it... With coins.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            garldWickedness.play();
                            garldWickedness.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 6)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Come on that worthless piece of paper, you won't even trade it for 100 coins?", false, "a"], ["You should know that I would give you a vast sum, for I deeply desire to learn from the parchment.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "6a")
                        {
                            garldWorthless.play();
                            garldWorthless.onended = function()
                            {
                                for (var j = 0; j < Inventory.length; j++)
                                {
                                    if (Inventory[j][0].type == "coins")
                                    {
                                        if (Inventory[j][1] > 100)
                                        {
                                            Inventory[j][1] -= 100
                                        }
                                        else
                                        {
                                            Inventory.splice(j, 1);
                                        }
                                        break;
                                    }
                                }
                                Inventory.push([new Item("summonFrich", false, false), 1]);
                                quests.garldCrazyScroll = "obtained100";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Irene" && conversationID[0] != "Fenwik" || conversationID[0] == "Irene")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Irene";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Hi There!", false, "a"], ["Hello.", false, "a"],["Why are your clothes all muddy?", false, "b"], ["Can I buy one of those ardils?", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            ireneHi.play();
                            ireneHi.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            ireneChasing.play();
                            ireneChasing.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            ireneFluffyOne.play();
                            ireneFluffyOne.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Nevermind.", false, "b"]];

                                var hits = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 10)
                                    {
                                        hits = i;
                                        break;
                                    }
                                }

                                if (hits > -1)
                                {
                                    player.dialogueOptions.unshift(["Actually on second thought, I won't buy one.", false, "b"]);
                                    player.dialogueOptions.unshift(["I promise. (pay 10 coins)", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.unshift(["I don't have enough money...", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            var hits = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 10)
                                {
                                    hits = i;
                                    break;
                                }
                            }
                            if (hits > -1)
                            {
                                if (Inventory[hits][1] <= 10)
                                {
                                    Inventory.splice(hits, 1);
                                }
                                else
                                {
                                    Inventory[hits][1] -= 10;
                                }
                                magicList.push(new Magic({ID: "adminSummon"}, true, [-1143, -31504, "Ardil", false, true]));
                            }
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                    }

                    if (self.ID == "Irene, Fenwik's Daughter" || conversationID[0] == "IreneDaughter")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "IreneDaughter";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["It is time to come back home lil one.", false, "b"]];
                                if (player.raceName == "Kel" && player.gender == "Female" && player.title != "Royalty")
                                {
                                    player.dialogueOptions.unshift(["Irene, it's time to come back to the tribe, your father is worried about you.", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            irenePaWorries.play();
                            irenePaWorries.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                player.blindedTime = 2;
                                player.blindedStoreTime = new Date().getTime();
                                quests.lostGirlFound = true;
                                X = -1006;
                                Y = -31327;
                                quests.lostGirlCompletionStyle = "convince";

                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            ireneNotReady.play();
                            ireneNotReady.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What is the nature call?", false, "b"], ["Would you like me to help you find the nature call?", false, "c"]];
                                if (player.getStrength() >= 3)
                                {
                                    if (player.class == "mage")
                                    {
                                        player.dialogueOptions.push(["(Carry her back to the tribe)", false, "a"]);
                                    }
                                    else
                                    {
                                        player.dialogueOptions.unshift(["(Carry her back to the tribe)", false, "a"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            player.blindedTime = 3;
                            player.blindedStoreTime = new Date().getTime();
                            quests.lostGirlFound = true;
                            X = -1006;
                            Y = -31327;
                            quests.lostGirlCompletionStyle = "carry";

                            self.SC();
                        }
                        else if (conversationID[1] == "1b")
                        {
                            ireneDontHear.play();
                            ireneDontHear.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            ireneHaveTo.play();
                            ireneHaveTo.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I don't.", false, "a"], ["Nope, not a sound.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            ireneMuf.play();
                            ireneMuf.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What song?", false, "a"]];
                                if (player.getIntelligence >= 4)
                                {
                                    player.dialogueOptions.unshift(["Would you please sing me the song, it may help me to help you find the source of the nature call?", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            irenePoem.play();
                            irenePoem.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What a lovely poem you made!", false, "a"], ["How is making up silly songs going to help you find anything?", false, "a"], ["Wow, what an terrible poem!", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            ireneFrom.play();
                            ireneFrom.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["The nature call must be near, we are at the edge of the forest already.", false, "a"]];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "natureCall")
                                    {
                                        player.dialogueOptions.unshift(["Is this it?", false, "b"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            ireneSleepingStone.play();
                            ireneSleepingStone.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            ireneExactly.play();
                            ireneExactly.onended = function()
                            {
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "natureCall")
                                    {
                                        Inventory.splice(i, 1);
                                        break;
                                    }
                                }
                                player.blindedTime = 2;
                                player.blindedStoreTime = new Date().getTime();
                                quests.lostGirlFound = true;
                                X = -1006;
                                Y = -31327;
                                quests.lostGirlCompletionStyle = "natureCall";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Fenwik the Smith" && conversationID[0] != "Irene" || conversationID[0] == "Fenwik")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Fenwik";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good Day.", false, "a"], ["What are you working on?", false, "b"]];
                                if (quests.lostGirlFound && quests.lostGirlQuest == true)
                                {
                                    player.dialogueOptions.unshift(["Here she is.", false, "e"]);
                                }
                                if (quests.lostGirlQuest == false)
                                {
                                    player.dialogueOptions.push(["Is everything going well?", false, "c"]);
                                }
                                player.dialogueOptions.push(["What can I do to help the Echlin Tribe?", false, "d"]);
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.raceName == "Thengar" && player.kelFaction < 50 && quests.lostGirlQuest != "complete" || player.kelFaction <= 0 || player.raceName == "Thengar" && uniqueChars.ireneLDS == true && player.kelFaction < 115)
                            {
                                fenwikTwillBe.play();
                                fenwikTwillBe.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                fenwikGooday.play();
                                fenwikGooday.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (player.raceName == "Kel" && player.title == "Nobility" && uniqueChars.schuylarLDS == false)
                            {
                                fenwikFocus.play();
                                fenwikFocus.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                            else if (player.raceName == "Kel" && player.title != "Royalty")
                            {
                                fenwikSupplyingTribe.play();
                                fenwikSupplyingTribe.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                fenwikBother.play();
                                fenwikBother.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            fenwikDaughterLost.play();
                            fenwikDaughterLost.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            if (player.raceName == "Kel" && player.title != "Royalty")
                            {
                                fenwikPart.play();
                                fenwikPart.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                fenwikToChief.play();
                                fenwikToChief.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 3;
                            self.SC();
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I want you to focus on trading your goods domestically.", false, "a"], ["I want you to focus on trading your goods with foreigners to enhance the tribes economy.", false, "b"]];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 1000)
                                    {
                                        if (quests.fenwikEchlinArmed == false)
                                        {
                                            player.dialogueOptions.push(["I want you to forge fine blades for each of the tribe's warriors. (costs 1000 coins)", false, "c"]);
                                        }
                                        break;
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            fenwikRightAway.play();
                            fenwikRightAway.onended = function()
                            {
                                quests.fenwikShopStyle = "normal";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            fenwikRightAway.play();
                            fenwikRightAway.onended = function()
                            {
                                quests.fenwikShopStyle = "cash";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            fenwikRightAway.play();
                            fenwikRightAway.onended = function()
                            {
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 1000)
                                    {
                                        if (Inventory[i][1] - 1000 < 1)
                                        {
                                            Inventory.splice(i, 1);
                                            break;
                                        }
                                        else
                                        {
                                            Inventory[i][1] -= 1000;
                                            break;
                                        }
                                    }
                                }
                                quests.fenwikEchlinArmed = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Oh, that's too bad.", false, "a"], ["I could help find her for you.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "2b")
                        {
                            fenwikEverGrateful.play();
                            fenwikEverGrateful.onended = function()
                            {
                                quests.lostGirlQuest = true;
                                quests.activeQuests.push({name: "Lost Girl", description: "Fenwik's young daughter has gotten herself lost, you offered to help find her."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["...", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            fenwikSoMuch.play();
                            fenwikSoMuch.onended = function()
                            {
                                if (quests.lostGirlCompletionStyle == "carry")
                                {
                                    quests.completeQuests.push({name: "Lost Girl", description: "You found Fenwik's daughter out by the woods and carried her back to her home."});
                                    player.experience += 85;
                                }
                                else if (quests.lostGirlCompletionStyle == "convince")
                                {
                                    quests.completeQuests.push({name: "Lost Girl", description: "Having looked after Irene before you were easily able to convince her to come back home to the tribe."});
                                    player.experience += 55;
                                }
                                else if (quests.lostGirlCompletionStyle == "natureCall")
                                {
                                    quests.completeQuests.push({name: "Lost Girl", description: "Fenwik's daughter was resistant to return home at first so you played along in what turned out to be a magical phenomenon."});
                                    player.magicalExperience += 35;
                                    if (player.class == "Mage")
                                    {
                                        player.magicalExperience += 65;
                                    }
                                    else
                                    {
                                        player.experience += 185;
                                    }
                                }
                                quests.lostGirlQuest = "complete";
                                player.fame += 1;
                                player.kelFaction += 15;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }


                    if (self.ID == "Svehn the Smith" || conversationID[0] == "Svehn")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Svehn";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["How goes the day?", false, "a"], ["Can I use your forge and anvil?", false, "b"], ["How's business?", false, "c"]];

                                if (quests.lostDeliveryQuest == false)
                                {
                                    player.dialogueOptions.push(["Do you have any work I could help with?", false, "d"]);
                                }
                                if (quests.theBrokenWellQuest == true && quests.theBrokenWellSvehn == false)
                                {
                                    player.dialogueOptions.unshift(["Do you know where I could find parts to fix the well?", false, "e"]);
                                }
                                if (quests.theBrokenWellQuest == true && quests.theBrokenWellSvehn == true)
                                {
                                    player.dialogueOptions.unshift(["Do you know where I could find parts to fix the well?", false, "g"]);
                                }
                                if (quests.theBrokenWellSvehn == true && quests.theBrokenWellQuest == "complete")
                                {
                                    player.dialogueOptions.unshift(["Old man Hettin is dead, his farmhouse was overrun by friches.", false, "f"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            svehnWell.play();
                            svehnWell.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            svehnMyWay.play();
                            svehnMyWay.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            svehnSmithing.play();
                            svehnSmithing.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            svehnGo.play();
                            svehnGo.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            svehnParts.play();
                            svehnParts.onended = function()
                            {
                                quests.theBrokenWellSvehn = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            svehnShame.play();
                            svehnShame.onended = function()
                            {
                                quests.theBrokenWellSvehn = "over";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            svehnAsISaid.play();
                            svehnAsISaid.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Sure, I'll go check on the delivery for you.", false, "a"], ["As good as done.", false, "a"], ["Okay.", false, "a"], ["No.", false, "b"], ["Not right now.", false, "b"], ["Sounds like a waste of my time.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            quests.lostDeliveryQuest = true;
                            quests.activeQuests.push({name: "A Lost Delivery", description: "Svehn asked you to check on an absent delivery of Nirinese goods from the east."});
                            player.dialoguePosition = 0;
                            conversationID[1] = 2;
                            self.SC();
                        }
                        else if (conversationID[1] == "1b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'm back.", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            svehnHow.play();
                            svehnHow.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];

                                var hitz = false;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].identity == "Svehn's Shipment")
                                    {
                                        hitz = true;
                                    }
                                }

                                if (!hitz)
                                {
                                    player.dialogueOptions.push(["Not Yet.", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["I wasn't able to find it. (LIE)", false, "b"], ["I found it... but your going to have to pay me for it.", false, "c"], ["The shipment was attacked by woodland bandits, but I managed to grab the goods.", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = true;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 2;
                            self.SC();
                        }
                        else if (conversationID[1] == "3b")
                        {
                            quests.lostDeliveryQuest = "complete";
                            quests.lostDeliveryCompletionStyle = "keptShipment";
                            player.experience += 100;
                            if (uniqueChars.nelgrefLDS)
                            {
                                quests.completeQuests.push({name: "A Lost Delivery", description: "You evaded Nelgref the Flayer, took the shipment, and lied to Svehn about finding it keeping his delivery for yourself."});
                            }
                            else
                            {
                                quests.completeQuests.push({name: "A Lost Delivery", description: "You slayed Nelgref the Flayer, took the shipment, and lied to Svehn about finding it keeping his delivery for yourself."});
                            }
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                            var hit = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].identity == "Svehn's Shipment")
                                {
                                    hit = i;
                                }
                            }
                            if (hit != -1)
                            {
                                Inventory.splice(hit, 1);
                            }

                            Inventory.push([new Item("svehnsLoot", false, false), 1]);
                        }
                        else if (conversationID[1] == "3c")
                        {
                            if (player.getCharisma() >= 37)
                            {
                                svehnOnlyFair.play();
                                svehnOnlyFair.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                    var hit = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].identity == "Svehn's Shipment")
                                        {
                                            hit = i;
                                        }
                                    }
                                    if (hit != -1)
                                    {
                                        Inventory.splice(hit, 1);
                                    }
                                    worldItems.push([new Item("coins", X, Y), 1100]);
                                    quests.lostDeliveryQuest = "complete";
                                    player.experience += 130;
                                    quests.lostDeliveryCompletionStyle = "soldShipment";
                                    if (uniqueChars.nelgrefLDS)
                                    {
                                        quests.completeQuests.push({name: "A Lost Delivery", description: "You evaded Nelgref the Flayer, took the shipment, and sold Svehn his delivery."});
                                    }
                                    else
                                    {
                                        quests.completeQuests.push({name: "A Lost Delivery", description: "You slayed Nelgref the Flayer, took the shipment, and sold Svehn his delivery."});
                                    }
                                }
                            }
                            else if (player.getCharisma() >= 14)
                            {
                                svehnCrook.play();
                                svehnCrook.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                    var hit = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].identity == "Svehn's Shipment")
                                        {
                                            hit = i;
                                        }
                                    }
                                    if (hit != -1)
                                    {
                                        Inventory.splice(hit, 1);
                                    }
                                    worldItems.push([new Item("coins", X, Y), 200]);
                                    quests.lostDeliveryQuest = "complete";
                                    player.experience += 110;
                                    quests.lostDeliveryCompletionStyle = "soldShipment";

                                    if (uniqueChars.nelgrefLDS)
                                    {
                                        quests.completeQuests.push({name: "A Lost Delivery", description: "You evaded Nelgref the Flayer, took the shipment, and sold Svehn his delivery."});
                                    }
                                    else
                                    {
                                        quests.completeQuests.push({name: "A Lost Delivery", description: "You slayed Nelgref the Flayer, took the shipment, and sold Svehn his delivery."});
                                    }
                                }
                            }
                            else
                            {
                                svehnGetOutaHere.play();
                                svehnGetOutaHere.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                    var hit = -1;
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].identity == "Svehn's Shipment")
                                        {
                                            hit = i;
                                        }
                                    }
                                    if (hit != -1)
                                    {
                                        Inventory.splice(hit, 1);
                                    }
                                    worldItems.push([new Item("coins", X, Y), 80]);
                                    player.experience += 75;
                                    quests.lostDeliveryQuest = "complete";
                                    quests.lostDeliveryCompletionStyle = "soldShipment";
                                    if (uniqueChars.nelgrefLDS)
                                    {
                                        quests.completeQuests.push({name: "A Lost Delivery", description: "You evaded Nelgref the Flayer, took the shipment, and sold Svehn his delivery."});
                                    }
                                    else
                                    {
                                        quests.completeQuests.push({name: "A Lost Delivery", description: "You slayed Nelgref the Flayer, took the shipment, and sold Svehn his delivery."});
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3d")
                        {
                            svehnSeemsFair.play();
                            svehnSeemsFair.onended = function()
                            {
                                quests.lostDeliveryQuest = "complete";
                                player.experience += 100;
                                player.freynorFaction += 14;
                                quests.lostDeliveryCompletionStyle = "gaveShipment";
                                if (uniqueChars.nelgrefLDS)
                                {
                                    quests.completeQuests.push({name: "A Lost Delivery", description: "You evaded Nelgref the Flayer, took the shipment and gave it to Svehn."});
                                }
                                else
                                {
                                    quests.completeQuests.push({name: "A Lost Delivery", description: "You slayed Nelgref the Flayer, took the shipment and gave it to Svehn."});
                                }
                                player.fame += 1;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                var hit = -1;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].identity == "Svehn's Shipment")
                                    {
                                        hit = i;
                                    }
                                }
                                if (hit != -1)
                                {
                                    Inventory.splice(hit, 1);
                                }
                                worldItems.push([new Item("coins", X, Y), 120]);
                            }
                        }
                    }

                    if (self.ID == "Medlia the Merchant" || conversationID[0] == "Medlia")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Medlia";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Nice day isn't it?", false, "a"], ["How's business?", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "0a";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "0b";
                                            playersTurnToSpeak = false;
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            if (player.getCharisma() < 2)
                            {
                                medliaMaybeIf.play();
                                medliaMaybeIf.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                medliaGuessItIs.play();
                                medliaGuessItIs.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }

                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (player.title == "Royalty" && player.freynorFaction > -50 || player.title == "Nobility" && player.freynorFaction > -50)
                            {
                                if (player.gender == "Male")
                                {
                                    medliaMyMyMeLord.play();
                                    medliaMyMyMeLord.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    medliaMyMyMeLady.play();
                                    medliaMyMyMeLady.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                            else if (player.getCharisma() > 2 && quests.medliaCompetitionControlQuest != "complete" && quests.bankruptNeculai != true)
                            {
                                medliaCantPretend.play();
                                medliaCantPretend.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                            else
                            {
                                medliaFine.play();
                                medliaFine.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What's the problem?", false, "a"], ["I didn't mean to pry.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "1a";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            if (player.raceName == "Freynor")
                            {
                                medliaOurProblem.play();
                                medliaOurProblem.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                            else
                            {
                                medliaTheProblem.play();
                                medliaTheProblem.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Is there something I can do?", false, "a"], ["I'm done with this subject for now.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "2a";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            medliaTen.play();
                            medliaTen.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                quests.medliaCompetitionControlReward = 10;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.getCharisma() > 5)
                                {
                                    player.dialogueOptions = [["I think that doing away with your competition is worth a bit more. don't you?", false, "a"], ["It's a deal.", false, "b"], ["No deal.", false, "c"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["It's a deal.", false, "b"], ["No deal.", false, "c"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "3a";
                                            playersTurnToSpeak = false;
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            conversationID[1] = "3c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            medliaEighteen.play();
                            medliaEighteen.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                quests.medliaCompetitionControlReward = 18;
                                quests.medliaCompetitionControlQuest = true;
                                quests.activeQuests.push({name: "Medlia's Competition Control", description: "Medlia feels that she is losing business to a Vardanian merchant that moved to town, she wants you to make him leave."});
                                conversationID[1] = 4;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            player.dialoguePosition = 0;
                            quests.medliaCompetitionControlQuest = true;
                            quests.activeQuests.push({name: "Medlia's Competition Control", description: "Medlia feels that she is losing business to a Vardanian merchant that moved to town, she wants you to make him leave."});
                            conversationID[1] = 4;
                            self.SC();
                        }
                        else if (conversationID[1] == "3c")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 4 && quests.medliaCompetitionControlQuest != "complete")
                        {
                            player.dialogueOptions = [];
                            if (quests.medliaCompetitionControlCompletionStyle == "friendly" || quests.medliaCompetitionControlCompletionStyle == "intimidate")
                            {
                                playersTurnToSpeak = false;
                                medliaItWorked.play();
                                conversationID[1] = 0;
                                medliaItWorked.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    quests.medliaCompetitionControlQuest = "complete";
                                    if (quests.medliaCompetitionControlCompletionStyle == "friendly")
                                    {
                                        quests.completeQuests.push({name: "Medlia's Competition Control", description: "You persuaded Neculai to leave town by kindly suggesting that he trade in a larger town with more opportunity and customers."});
                                        player.vardanFaction += 1;
                                    }
                                    else
                                    {
                                        quests.completeQuests.push({name: "Medlia's Competition Control", description: "You persuaded Neculai to leave town by threatening him."});
                                    }
                                    player.freynorFaction += 1;
                                    worldItems.push([new Item("coins", X, Y), quests.medliaCompetitionControlReward]);
                                    player.experience += 65;
                                    quests.medliaNewWealth += 55;
                                    quests.bobithNewWealth += 17;
                                    change = "none";
                                    self.SC();
                                }
                            }
                            else if (uniqueChars.neculaiLDS == false)
                            {
                                playersTurnToSpeak = false;
                                medliaThatFar.play();
                                conversationID[1] = 0;
                                medliaThatFar.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    quests.medliaCompetitionControlCompletionStyle = "murder";
                                    quests.medliaCompetitionControlQuest = "complete";
                                    player.freynorFaction += 1;
                                    quests.completeQuests.push({name: "Medlia's Competition Control", description: "Rather than making Neculai leave town you decided to murder him."});
                                    worldItems.push([new Item("coins", X, Y), quests.medliaCompetitionControlReward]);
                                    player.experience += 65;
                                    quests.medliaNewWealth += 55;
                                    quests.bobithNewWealth += 17;
                                    change = "none";
                                    self.SC();
                                }
                            }
                            else if (quests.medliaCompetitionControlCompletionStyle == "violence")
                            {
                                playersTurnToSpeak = false;
                                medliaHurtHim.play();
                                conversationID[1] = 0;
                                medliaHurtHim.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    quests.medliaCompetitionControlQuest = "complete";
                                    player.freynorFaction += 1;
                                    quests.completeQuests.push({name: "Medlia's Competition Control", description: "You attacked Neculai leaving him no choice but to flee town."});
                                    worldItems.push([new Item("coins", X, Y), quests.medliaCompetitionControlReward]);
                                    player.experience += 65;
                                    quests.medliaNewWealth += 55;
                                    quests.bobithNewWealth += 17;
                                    change = "none";
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Neculai the Merchant" || conversationID[0] == "Neculai")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Neculai";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.raceName == "Vardan" && quests.theBalgurMercenariesQuest != "complete" || player.raceName == "Vardan" && quests.medliaCompetitionControlCompletionStyle == "friendly" && quests.medliaCompetitionControlQuest == "complete")
                                {
                                    player.dialogueOptions = [["What brings you so far from the homeland?", false, "a"], ["Good day.", false, "b"], ["How's business?", false, "c"]];
                                    if (quests.neculaiShopDeal == false)
                                    {
                                        player.dialogueOptions.push(["Do you have any special deals for a fellow homelander?", false, "d"]);
                                    }
                                    if (quests.medliaCompetitionControlQuest == true && quests.medliaCompetitionControlCompletionStyle == false)
                                    {
                                        player.dialogueOptions.push(["We need to talk...", false, "e"]);
                                    }
                                }
                                else if (player.raceName == "Vardan")
                                {
                                    player.dialogueOptions = [["What brings you so far from the homeland?", false, "a"], ["Good day.", false, "b"]];
                                    if (quests.neculaiShopDeal == false)
                                    {
                                        player.dialogueOptions.push(["Do you have any special deals for a fellow homelander?", false, "d"]);
                                    }
                                    if (quests.medliaCompetitionControlQuest == true && quests.medliaCompetitionControlCompletionStyle == false)
                                    {
                                        player.dialogueOptions.push(["We need to talk...", false, "e"]);
                                    }
                                }
                                else if (quests.theBalgurMercenariesQuest != "complete" || quests.medliaCompetitionControlCompletionStyle == "friendly" && quests.medliaCompetitionControlQuest == "complete")
                                {
                                    player.dialogueOptions = [["Good day.", false, "b"], ["How's business?", false, "c"]];
                                    if (quests.medliaCompetitionControlQuest == true && quests.medliaCompetitionControlCompletionStyle == false)
                                    {
                                        player.dialogueOptions.push(["We need to talk...", false, "e"]);
                                    }
                                }
                                else
                                {
                                    player.dialogueOptions = [["Good day.", false, "b"]];
                                    if (quests.medliaCompetitionControlQuest == true && quests.medliaCompetitionControlCompletionStyle == false)
                                    {
                                        player.dialogueOptions.push(["We need to talk...", false, "e"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            neculaiBountyHere.play();
                            neculaiBountyHere.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            neculaiEveryDay.play();
                            neculaiEveryDay.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            if (quests.medliaCompetitionControlCompletionStyle == "friendly" && quests.medliaCompetitionControlQuest == "complete")
                            {
                                neculaiMuchBetter.play();
                                neculaiMuchBetter.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                neculaiBiggerProblem.play();
                                neculaiBiggerProblem.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            if (player.getCharisma() > 5)
                            {
                                neculaiSpecialDeals.play();
                                neculaiSpecialDeals.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    quests.neculaiShopDeal = true;
                                    worldItems.push([new Item("frichPelt", X, Y), 6]);
                                    self.SC();
                                }
                            }
                            else
                            {
                                neculaiStirUp.play();
                                neculaiStirUp.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }

                        }
                        else if (conversationID[1] == "0e")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 1;
                            self.SC();
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                if (player.getCharisma() >= 10)
                                {
                                    player.dialogueOptions = [["[convince Neculai that he would make more money trading in a larger town]", false, "a"], ["You're not wanted here, pack up your shop and leave, before I make you leave.", false, "b"]];
                                }
                                else
                                {
                                    player.dialogueOptions = [["You're not wanted here, pack up your shop and leave, before I make you leave.", false, "b"]];
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            neculaiLots.play();
                            neculaiLots.onended = function()
                            {
                                playersTurnToSpeak = true;
                                quests.medliaCompetitionControlCompletionStyle = "friendly";
                                player.experience += 15;
                                player.vardanFaction += 1;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            if (player.getCharisma() > 4 && player.getStrength() > 9)
                            {
                                neculaiZes.play();
                                neculaiZes.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    quests.medliaCompetitionControlCompletionStyle = "intimidate";
                                    player.experience += 15;
                                    player.vardanFaction -= 1;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                neculaiDontThinkSo.play();
                                neculaiDontThinkSo.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.vardanFaction -= 1;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Is there anything that I can do?", false, "a"], ["Good luck with that... I don't care.", false, "b"], ["Can we talk about something else?", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            neculaiThenganMercs.play();
                            neculaiThenganMercs.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "2c")
                        {
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["It's a deal.", false, "a"], ["I will do it for 40.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            player.dialoguePosition = 0;
                            quests.theBalgurMercenariesReward = 30;
                            quests.theBalgurMercenariesQuest = true;
                            quests.activeQuests.push({name: "The Balgur Mercenaries", description: "Neculai hired you to get rid of a crew of mercenaries that have been harrassing him."});
                            change = "none";
                            conversationID[1] = 4;
                            self.SC();
                        }
                        else if (conversationID[1] == "3b")
                        {
                            if (player.getCharisma() > 10)
                            {
                                neculaiFine.play();
                                neculaiFine.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    quests.theBalgurMercenariesReward = 40;
                                    quests.theBalgurMercenariesQuest = true;
                                    quests.activeQuests.push({name: "The Balgur Mercenaries", description: "Neculai hired you to get rid of a crew of mercenaries that have been harrassing him."});
                                    change = "none";
                                    conversationID[1] = 4;
                                    self.SC();
                                }
                            }
                            else if (player.getCharisma() > 7)
                            {
                                neculaiRid.play();
                                neculaiRid.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    quests.theBalgurMercenariesReward = 35;
                                    quests.theBalgurMercenariesQuest = true;
                                    quests.activeQuests.push({name: "The Balgur Mercenaries", description: "Neculai hired you to get rid of a crew of mercenaries that have been harrassing him."});
                                    change = "none";
                                    conversationID[1] = 4;
                                    self.SC();
                                }
                            }
                            else
                            {
                                neculaiZertyOne.play();
                                neculaiZertyOne.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    quests.theBalgurMercenariesReward = 31;
                                    quests.theBalgurMercenariesQuest = true;
                                    quests.activeQuests.push({name: "The Balgur Mercenaries", description: "Neculai hired you to get rid of a crew of mercenaries that have been harrassing him."});
                                    change = "none";
                                    conversationID[1] = 4;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            player.dialogueOptions = [];
                            if (quests.theBalgurMercenariesMercsKilled >= 8 && uniqueChars.kronheimeLDS == false || quests.theBalgurMercenariesCompletionStyle == "paidMercs" || quests.theBalgurMercenariesCompletionStyle == "threaten" || quests.theBalgurMercenariesCompletionStyle == "royalProtection")
                            {
                                playersTurnToSpeak = false;
                                neculaiZerGone.play();
                                conversationID[1] = 0;
                                neculaiZerGone.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    if (quests.theBalgurMercenariesMercsKilled >= 8 && uniqueChars.kronheimeLDS == false)
                                    {
                                        quests.theBalgurMercenariesCompletionStyle = "killedMercs";
                                        quests.completeQuests.push({name: "The Balgur Mercenaries", description: "You slayed the entire band of mercenaries that had been harrassing Neculai."});
                                        player.fame += 2;
                                    }
                                    else
                                    {
                                        if (quests.theBalgurMercenariesCompletionStyle == "paidMercs")
                                        {
                                            quests.completeQuests.push({name: "The Balgur Mercenaries", description: "The band of mercenaries left after you paid them the money that Neculai owed."});
                                        }
                                        else if (quests.theBalgurMercenariesCompletionStyle == "threaten")
                                        {
                                            quests.completeQuests.push({name: "The Balgur Mercenaries", description: "You threatened to kill the mercenaries, who saw that they were no match for you and left without any trouble."});
                                        }
                                        else
                                        {
                                            quests.completeQuests.push({name: "The Balgur Mercenaries", description: "Declaring your royal freydic patronage you decreed Neculai was under your kingdom's protection."});
                                        }
                                        player.fame += 1;
                                    }
                                    quests.theBalgurMercenariesQuest = "complete";
                                    worldItems.push([new Item("coins", X, Y), quests.theBalgurMercenariesReward]);
                                    player.experience += 350;
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Mercenary Captain Kronheime" || conversationID[0] == "Kronheim")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Kronheime";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (player.theBalgurMercenariesRank == "none")
                                {
                                    player.dialogueOptions.push(["Who are the balgur mercenaries exactly?", false, "a"]);
                                }
                                if (player.theBalgurMercenariesFaction > - 50 && player.theBalgurMercenariesRank == "none")
                                {
                                    player.dialogueOptions.push(["What would I have to do to join this mercenary group?", false, "b"]);
                                }
                                if (quests.theBalgurMercenariesQuest == true)
                                {
                                    player.dialogueOptions.push(["About Neculai...", false, "c"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            kronheimeHaventHeard.play();
                            kronheimeHaventHeard.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (player.getStrength() < 20 && player.fame < 65)
                            {
                                kronheimeLastADay.play();
                                kronheimeLastADay.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                kronheimeTalkTo.play();
                                kronheimeTalkTo.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            if (player.fame < 65 && player.getStrength() < 40 && player.getConstitution() < 35 && player.getStamina() < 35 && player.magicLevel < 99)
                            {
                                kronheimeTalkQuick.play();
                                kronheimeTalkQuick.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                            else
                            {
                                kronheimeYourWith.play();
                                kronheimeYourWith.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Where is the commander?", false, "a"], ["Enough of this topic for now.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            kronheimeWheresTheBoss.play();
                            kronheimeWheresTheBoss.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Leave or face my wrath!", false, "a"], ["How much does he owe you?", false, "b"]];
                                if (player.raceName == "Freynor" && player.title == "Royalty")
                                {
                                    player.dialogueOptions.unshift(["As the heir to the crown of Freynor I hereby command you to take your group and leave, Neculai is under this kingdom's protection.", false, "c"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            if (player.fame >= 65 || player.getStrength() >= 40 && player.getConstitution() >= 35 && player.getStamina() >= 35 || player.magicLevel > 99)
                            {
                                kronheimeLeaving.play();
                                kronheimeLeaving.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    quests.theBalgurMercenariesCompletionStyle = "threaten";
                                    player.theBalgurMercenariesFaction -= 15;
                                    player.blindedTime = 2;
                                    player.blindedStoreTime = new Date().getTime();
                                    ArtificialIntelligenceAccess = [];
                                    player.dialogueOptions = [];
                                    change = "none";
                                    conversationID[1] = 0;
                                    lowBar = "information";
                                    self.SC();
                                }
                            }
                            else
                            {
                                if (player.gender == "Male")
                                {
                                    kronheimeKillHim.play();
                                    kronheimeKillHim.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                        self.disturbed = true;
                                    }
                                }
                                else if (player.gender == "Female")
                                {
                                    kronheimeKillHer.play();
                                    kronheimeKillHer.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                        self.disturbed = true;
                                    }
                                }
                                else
                                {
                                    kronheimeKillIt.play();
                                    kronheimeKillIt.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                        self.disturbed = true;
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            kronheimeNoLess.play();
                            kronheimeNoLess.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            kronheimeThisSlight.play();
                            kronheimeThisSlight.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                quests.theBalgurMercenariesCompletionStyle = "royalProtection";
                                player.theBalgurMercenariesFaction -= 3;
                                player.blindedTime = 2;
                                player.blindedStoreTime = new Date().getTime();
                                ArtificialIntelligenceAccess = [];
                                player.dialogueOptions = [];
                                change = "none";
                                conversationID[1] = 0;
                                lowBar = "information";
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Why have haven't you collected your money from him then?", false, "a"], ["I will pay Neculai's debt.", false, "b"], ["[go back to last set of options]", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            conversationID[1] = "3c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            kronheimeThatVardanian.play();
                            kronheimeThatVardanian.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            var hasEnoughToPay = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 200)
                                {
                                    hasEnoughToPay = i;
                                }
                            }

                            if (hasEnoughToPay == -1)
                            {
                                kronheimeDontHaveEnough.play();
                                kronheimeDontHaveEnough.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                            }
                            else
                            {
                                if (Inventory[hasEnoughToPay][1] > 200)
                                {
                                    Inventory[hasEnoughToPay][1] -= 200;
                                }
                                else
                                {
                                    Inventory.splice(hasEnoughToPay, 1);
                                }

                                kronheimeSimple.play();
                                conversationID[1] = 0;
                                kronheimeSimple.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    quests.theBalgurMercenariesCompletionStyle = "paidMercs";
                                    player.theBalgurMercenariesFaction += 5;
                                    player.blindedTime = 2;
                                    player.blindedStoreTime = new Date().getTime();
                                    ArtificialIntelligenceAccess = [];
                                    player.dialogueOptions = [];
                                    change = "none";
                                    lowBar = "information";
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "3c")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 2;
                            self.SC();
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I could try to convince him to pay.", false, "a"], ["[go back to last set of options]", false, "b"]];
                                if (player.raceName == "Freynor" && player.title == "Royalty")
                                {
                                    if (uniqueChars.neculaiLDS == true)
                                    {
                                        player.dialogueOptions.unshift(["As heir to the crown of Freynor, I will have him executed and brought to you along with his possessions.", false, "d"]);
                                        player.dialogueOptions.unshift(["As heir to the crown of Freynor I grant you permission to take what you are owed, but leave him alive and unharmed.", false, "c"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "4b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            kronheimeEarAsProof.play();
                            kronheimeEarAsProof.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 3;
                            self.SC();
                        }
                        else if (conversationID[1] == "4c")
                        {
                            kronheimeDidntRealize.play();
                            kronheimeDidntRealize.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                quests.theBalgurMercenariesCompletionStyle = "bankruptedNeculai";
                                player.theBalgurMercenariesFaction += 10;
                                player.blindedTime = 2;
                                player.blindedStoreTime = new Date().getTime();
                                quests.bankruptNeculai = true;
                                quests.theBalgurMercenariesQuest = "complete";
                                quests.completeQuests.push({name: "The Balgur Mercenaries", description: "As the heir to The Kingdom of Freynor you allowed the mercenaries to take what they were owed from Neculai so long as they left him unharmed."});
                                player.experience += 350;
                                player.fame += 1;
                                ArtificialIntelligenceAccess = [];
                                player.dialogueOptions = [];
                                change = "none";
                                conversationID[1] = 0;
                                lowBar = "information";
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "4d")
                        {
                            kronheimeDidntRealize.play();
                            kronheimeDidntRealize.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                quests.theBalgurMercenariesCompletionStyle = "executedNeculai";
                                player.theBalgurMercenariesFaction += 15;
                                player.blindedTime = 2;
                                player.blindedStoreTime = new Date().getTime();
                                uniqueChars.neculaiLDS = false;
                                quests.theBalgurMercenariesQuest = "complete";
                                quests.completeQuests.push({name: "The Balgur Mercenaries", description: "With the power vested in you as the heir to The Kingdom of Freynor you ordered Neculai to be Executed and brought to the mercenaries along with all of his possessions."});
                                player.experience += 350;
                                player.fame += 1;
                                ArtificialIntelligenceAccess = [];
                                player.dialogueOptions = [];
                                change = "none";
                                conversationID[1] = 0;
                                lowBar = "information";
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'll do it.", false, "a"], ["What will I get in exchange for this? ", false, "b"], ["I'm not killing anyone for you.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            kronheimeGood.play();
                            kronheimeGood.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 7;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            kronheimeNecklace.play();
                            kronheimeNecklace.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5c")
                        {
                            kronheimeGetAway.play();
                            kronheimeGetAway.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                player.theBalgurMercenariesFaction -= 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 6)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I'll do it.", false, "a"], ["I'll have to think about this. ", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "6a")
                        {
                            kronheimeGood.play();
                            kronheimeGood.onended = function()
                            {
                                quests.theBalgurMercenariesNecklace = true;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 7;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6b")
                        {
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 4;
                            self.SC();
                        }
                        else if (conversationID[1] == 7)
                        {
                            player.dialogueOptions = [];

                            var hasPlayerDoneTheStuff = false;
                            if (uniqueChars.neculaiLDS == false && quests.theBalgurMercenariesQuest == true)
                            {
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "neculaisEar")
                                    {
                                        hasPlayerDoneTheStuff = true;
                                        Inventory.splice(i, 1);
                                        break;
                                    }
                                }

                                if (hasPlayerDoneTheStuff)
                                {
                                    kronheimeAnotherEar.play();
                                    conversationID[1] = 0;
                                    kronheimeAnotherEar.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        quests.theBalgurMercenariesCompletionStyle = "murderedNeculai";
                                        player.theBalgurMercenariesFaction += 15;
                                        player.blindedTime = 2;
                                        player.blindedStoreTime = new Date().getTime();
                                        quests.theBalgurMercenariesQuest = "complete";
                                        quests.completeQuests.push({name: "The Balgur Mercenaries", description: "You turned the tables on Neculai, instead of getting rid of the mercenaries, you took up the mercenaries' offer to kill Neculai."});
                                        player.experience += 350;
                                        player.fame += 1;
                                        ArtificialIntelligenceAccess = [];
                                        change = "none";
                                        if (quests.theBalgurMercenariesNecklace == true)
                                        {
                                            Inventory.unshift([new Item("berulnToothNecklace", X, Y), 1]);
                                        }
                                        player.dialoguePosition = 0;
                                        lowBar = "information";
                                        self.SC();
                                    }
                                }
                            }
                        }
                    }

                    if (self.ID == "Tor Commissioner Stendor" || conversationID[0] == "Stendor")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Stendor";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good Day.", false, "a"], ["Is there anything I can do to improve my relations with the kingdom of Freynor.", false, "b"], ["Can I see the active bounties for this town?", false, "c"], ["Goodbye.", false, "d"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            stendorGoodDay.play();
                            stendorGoodDay.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            if (player.title == "Royalty" && player.raceName == "Freynor" || player.title == "Nobility" && player.raceName == "Freynor")
                            {
                                stendorYourPeople.play();
                                stendorYourPeople.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                stendorHelpingPeople.play();
                                stendorHelpingPeople.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            stendorHereTheyAre.play();
                            stendorHereTheyAre.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            if (player.title == "Royalty" || player.title == "Nobility")
                            {
                                if (player.gender == "Male")
                                {
                                    stendorHealth.play();
                                    stendorHealth.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    stendorFairThee.play();
                                    stendorFairThee.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                            else if (player.title == "Highfolk")
                            {
                                stendorBeWell.play();
                                stendorBeWell.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                stendorTrouble.play();
                                stendorTrouble.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            lowBar = "information";
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.theMasterThiefOfTeshirQuest == false)
                                {
                                    player.dialogueOptions.push(["{ Wanted: Master Thief ; 65 coins }", false, "a"]);
                                }
                                if (quests.bountyHetmerQuest == false && uniqueChars.hetmerLDS == true)
                                {
                                    player.dialogueOptions.push(["{ Wanted: Bandit Chief Hetmer ; 38 coins }", false, "b"]);
                                }
                                if (quests.bountyTeberQuest == false && uniqueChars.teberLDS == true)
                                {
                                    player.dialogueOptions.push(["{ Wanted: Teber the Deserter ; 25 coins }", false, "c"]);
                                }
                                if (player.dialogueOptions.length < 1)
                                {
                                    player.dialogueOptions.push(["(No Active Bounties: return to previous dialogue selection)", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            stendorItemsGo.play();
                            stendorItemsGo.onended = function()
                            {
                                quests.theMasterThiefOfTeshirQuest = true;
                                quests.activeQuests.push({name: "The Master Thief of Teshir", description: "You took a bounty to aprehend or kill the skilled thief that has been stealing goods in the city of Teshir."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            stendorHetmerTough.play();
                            stendorHetmerTough.onended = function()
                            {
                                quests.bountyHetmerQuest = true;
                                quests.activeQuests.push({name: "Bounty: Hetmer the Bandit Chieftain", description: "Kill Hetmer the Bandit Chieftain and then return to Commissioner Stendor for payment."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            stendorPoorWretch.play();
                            stendorPoorWretch.onended = function()
                            {
                                quests.bountyTeberQuest = true;
                                quests.activeQuests.push({name: "Bounty: Teber the Deserter", description: "Kill Teber, a soldier who deserted the freydic jarl Tor's army."});
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1d")
                        {
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.theMasterThiefOfTeshirNeevKnown == true)
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 3;
                                    self.SC();
                                }
                                else
                                {
                                    player.dialogueOptions.push(["Where should I start looking?", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            stendorTryAsking.play();
                            stendorTryAsking.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.theMasterThiefOfTeshirQuest == true && quests.theMasterThiefOfTeshirNeevKnown == true && quests.theMasterThiefOfTeshirNeevSlain == true)
                                {
                                    player.dialogueOptions.push(["It turns out the thief was a Neev, I've slain it for all to see.", false, "a"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            if (quests.theMasterThiefOfTeshirQuest == true && quests.theMasterThiefOfTeshirNeevKnown == true && quests.theMasterThiefOfTeshirNeevSlain == true)
                            {
                                stendorNeevsAreReal.play();
                                stendorNeevsAreReal.onended = function()
                                {
                                    quests.theMasterThiefOfTeshirQuest = "complete";
                                    quests.completeQuests.push({name: "The Master Thief of Teshir", description: "You killed the thief, which turned out to be a magical creature commonly known as a beer fairy."});
                                    worldItems.push([new Item("coins", X, Y), 65]);
                                    player.freynorFaction += 25;
                                    player.fame += 1;
                                    if (player.class == "Mage")
                                    {
                                        player.magicalExperience += 75;
                                    }
                                    else
                                    {
                                        player.experience += 75;
                                    }
                                    player.magicalExperience += 25;
                                    player.experience += 25;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (uniqueChars.hetmerLDS == false)
                                {
                                    player.dialogueOptions.push(["The bandit Hetmer has been brought to justice.", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["Where might I find him?", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "4b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            if (quests.bountyHetmerQuest == true)
                            {
                                stendorExcellent.play();
                                stendorExcellent.onended = function()
                                {
                                    quests.bountyHetmerQuest = "complete";
                                    quests.completeQuests.push({name: "Bounty: Hetmer the Bandit Chieftain", description: "You killed the bandit chieftain Hetmer and collected your payment."});
                                    worldItems.push([new Item("coins", X, Y), 38]);
                                    player.freynorFaction += 5;
                                    player.fame += 1;
                                    player.experience += 75;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "4b")
                        {
                            stendorAlwaysComeBack.play();
                            stendorAlwaysComeBack.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [];
                                if (quests.bountyTeberQuest == "complete")
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else if (uniqueChars.teberLDS == false)
                                {
                                    player.dialogueOptions.push(["Teber has been dealt with.", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["Do you know where he is?", false, "b"]);
                                    if (player.title == "Royalty" && player.raceName == "Freynor")
                                    {
                                        player.dialogueOptions.push(["As the heir to the kingdom of Freynor I hereby clear all charges against this soldier.", false, "c"]);
                                    }
                                    else if (player.title == "Nobility" && player.raceName == "Freynor")
                                    {
                                        player.dialogueOptions.push(["As the heir to the house of Tor I declare Teber cleared of all charges against him.", false, "d"]);
                                    }
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            if (quests.bountyTeberQuest == true)
                            {
                                stendorPoorSoul.play();
                                stendorPoorSoul.onended = function()
                                {
                                    quests.bountyTeberQuest = "complete";
                                    quests.bountyTeberCompletionStyle = "killed teber";
                                    quests.completeQuests.push({name: "Bounty: Teber the Deserter", description: "You tracked down and killed the soldier that had deserted Jarl Tor's army then collected payment."});
                                    worldItems.push([new Item("coins", X, Y), 25]);
                                    player.freynorFaction += 2;
                                    player.fame += 1;
                                    player.experience += 55;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            stendorFarSouth.play();
                            stendorFarSouth.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5c")
                        {
                            if (quests.bountyTeberQuest == true)
                            {
                                stendorHighness.play();
                                stendorHighness.onended = function()
                                {
                                    quests.bountyTeberQuest = "complete";
                                    quests.bountyTeberCompletionStyle = "royal pardon";
                                    quests.completeQuests.push({name: "Bounty: Teber the Deserter", description: "As the heir to the kingdom of Freynor, you pardoned Teber's desertion."});
                                    player.experience += 25;
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "5d")
                        {
                            if (quests.bountyTeberQuest == true)
                            {
                                if (player.gender == "Female")
                                {
                                    stendorWishLady.play();
                                    stendorWishLady.onended = function()
                                    {
                                        quests.bountyTeberQuest = "complete";
                                        quests.bountyTeberCompletionStyle = "royal pardon";
                                        quests.completeQuests.push({name: "Bounty: Teber the Deserter", description: "As the heir to the house of Tor, the very house whose army Teber deserted from, You pardoned Teber's Desertion."});
                                        player.experience += 25;
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    stendorWishLord.play();
                                    stendorWishLord.onended = function()
                                    {
                                        quests.bountyTeberQuest = "complete";
                                        quests.bountyTeberCompletionStyle = "royal pardon";
                                        quests.completeQuests.push({name: "Bounty: Teber the Deserter", description: "As the heir to the house of Tor, the very house whose army Teber deserted from, You pardoned Teber's Desertion."});
                                        player.experience += 25;
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 0;
                                        self.SC();
                                    }
                                }
                            }
                        }
                    }

                    if (self.ID == "Kedwin" && conversationID[0] != "Hilmund" || conversationID[0] == "Kedwin")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Kedwin";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["How goes the day?", false, "a"]];
                                if (quests.theMasterThiefOfTeshirQuest == true && quests.theMasterThiefOfTeshirNeevKnown == false)
                                {
                                    player.dialogueOptions.push(["Have you heard any rumors that would help me find the thief that is on the loose?", false, "b"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            kedwinBetter.play();
                            kedwinBetter.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            kedwinRumors.play();
                            kedwinRumors.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["[give harst ale]", false, "a"], ["[threaten him into telling you]", false, "b"], ["Actually let's not discuss rumors.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            var gaveAleToKed = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "harstAle")
                                {
                                    gaveAleToKed = i;
                                }
                            }

                            if (gaveAleToKed != -1)
                            {
                                quests.theMasterThiefOfTeshirNeevKnown = true;
                                if (quests.theMasterThiefOfTeshirNeevSlain == false)
                                {
                                    kedwinGobblin.play();
                                    kedwinGobblin.onended = function()
                                    {
                                        if (Inventory[gaveAleToKed][1] > 1)
                                        {
                                            Inventory[gaveAleToKed][1] -= 1;
                                        }
                                        else
                                        {
                                            Inventory.splice(gaveAleToKed, 1);
                                        }

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 2;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    kedwinSomeone.play();
                                    kedwinSomeone.onended = function()
                                    {
                                        if (Inventory[gaveAleToKed][1] > 1)
                                        {
                                            Inventory[gaveAleToKed][1] -= 1;
                                        }
                                        else
                                        {
                                            Inventory.splice(gaveAleToKed, 1);
                                        }

                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 3;
                                        self.SC();
                                    }
                                }
                            }
                            else
                            {

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            if (player.getCharisma() >= 15)
                            {
                                quests.theMasterThiefOfTeshirNeevKnown = true;
                                if (quests.theMasterThiefOfTeshirNeevSlain == false)
                                {
                                    kedwinGobblin.play();
                                    kedwinGobblin.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 2;
                                        self.SC();
                                    }
                                }
                                else
                                {
                                    kedwinSomeone.play();
                                    kedwinSomeone.onended = function()
                                    {
                                        playersTurnToSpeak = true;
                                        player.dialoguePosition = 0;
                                        conversationID[1] = 3;
                                        self.SC();
                                    }
                                }
                            }
                            else
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                self.disturbedTime = new Date().getTime();
                            }
                        }
                        else if (conversationID[1] == "1c")
                        {
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["What is a Beer Fairy?", false, "a"]];
                                if (player.getIntelligence() > 11)
                                {
                                    player.dialogueOptions.unshift(["Beer fairies are just fairytales, they don't actually exist. Now tell me something useful.", false, "b"]);
                                }
                                if (player.getIntelligence() > 19)
                                {
                                    player.dialogueOptions.push(["Sounds like a Neev to me...", false, "c"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            kedwinNeverHeard.play();
                            kedwinNeverHeard.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            kedwinEitherWay.play();
                            kedwinEitherWay.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2c")
                        {
                            kedwinCause.play();
                            kedwinCause.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["That's bogus!", false, "a"], ["Thanks for the help.", false, "b"], ["This is what I get for asking a drunk to help me with a serious problem...", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a" || conversationID[1] == "3c")
                        {
                            kedwinYourLoss.play();
                            kedwinYourLoss.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            kedwinNothing.play();
                            kedwinNothing.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                    }

                    if (self.ID == "Teber the Deserter" || self.ID == "Teber the Artisan" || conversationID[0] == "Teber")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Teber";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Good Day.", false, "a"], ["What skills do you know?", false, "b"]];
                                if (player.raceName == "Kel")
                                {
                                    player.dialogueOptions.push(["What brings you to our tribe?", false, "c"]);
                                }
                                else
                                {
                                    player.dialogueOptions.push(["What brings you so far from your land?", false, "c"]);
                                }
                                if (quests.bountyTeberCompletionStyle != "doublecross")
                                {
                                    player.dialogueOptions.push(["[trade 5 mofu feathers and 52 coins for a mofu feather necklace]", false, "d"]);
                                }
                                if (quests.bountyTeberCompletionStyle == false && quests.bountyTeberQuest == true)
                                {
                                    player.dialogueOptions.push(["I'm here to kill you deserter... any last words?", false, "e"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            teberShanToor.play();
                            teberShanToor.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0b")
                        {
                            teberSkills.play();
                            teberSkills.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            if (player.getCharisma() >= 10)
                            {
                                teberArtCareer.play();
                                teberArtCareer.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                teberLastJob.play();
                                teberLastJob.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            teberQueBellas.play();
                            teberQueBellas.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();

                                var featherHitz = -1;
                                var coinHitz = -1;
                                var giveNecklace = false;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 52)
                                    {
                                        coinHitz = i;
                                    }
                                    if (Inventory[i][0].type == "mofuFeather" && Inventory[i][1] >= 5)
                                    {
                                        featherHitz = i;
                                    }
                                }

                                if (featherHitz > -1 && coinHitz > -1)
                                {
                                    if (coinHitz > featherHitz)
                                    {
                                        if (Inventory[coinHitz][1] == 52)
                                        {
                                            Inventory.splice(coinHitz, 1);
                                        }
                                        else
                                        {
                                            Inventory[coinHitz][1] -= 52
                                        }

                                        if (Inventory[featherHitz][1] == 5)
                                        {
                                            Inventory.splice(featherHitz, 1);
                                        }
                                        else
                                        {
                                            Inventory[featherHitz][1] -= 5;
                                        }
                                        giveNecklace = true;
                                    }
                                    else
                                    {
                                        if (Inventory[featherHitz][1] == 5)
                                        {
                                            Inventory.splice(featherHitz, 1);
                                        }
                                        else
                                        {
                                            Inventory[featherHitz][1] -= 5;
                                        }

                                        if (Inventory[coinHitz][1] == 52)
                                        {
                                            Inventory.splice(coinHitz, 1);
                                        }
                                        else
                                        {
                                            Inventory[coinHitz][1] -= 52
                                        }
                                        giveNecklace = true;
                                    }
                                    if (giveNecklace)
                                    {
                                        Inventory.push([new Item("mofuFive", false, false), 1]);
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            if (player.level >= 8 || player.magicLevel >= 6)
                            {
                                teberPleaseDont.play();
                                teberPleaseDont.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 1;
                                    self.SC();
                                }
                            }
                            else
                            {
                                teberDontWant.play();
                                teberDontWant.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["If you pay me double your bounty I will let you live. (LIE)", false, "a"], ["If you pay me double your bounty I will let you live. (TRUTH)", false, "d"], ["Enough groveling deserter... Stand and fight me with whatever last scraps of honor you still have.", false, "b"], ["Okay... I won't kill you... but that doesn't mean somebody else won't, you're a wanted man.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            teberAnyways.play();
                            teberAnyways.onended = function()
                            {
                                quests.bountyTeberCompletionStyle = "doublecross";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            self.disturbedTime = new Date().getTime();
                        }
                        else if (conversationID[1] == "1c")
                        {
                            quests.bountyTeberCompletionStyle = "spare";
                            quests.bountyTeberQuest = "complete";
                            quests.completeQuests.push({name: "Bounty: Teber the Deserter", description: "After hearing Teber's side of the story you decided to let him live."});
                            player.kelFaction += 3;
                            player.freynorFaction -= 5;
                            player.experience += 45;
                            playersTurnToSpeak = true;
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "1d")
                        {
                            teberAnyways.play();
                            teberAnyways.onended = function()
                            {
                                quests.bountyTeberCompletionStyle = "doublespare";
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 2;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I could kill you and take your money now if you would like...", false, "a"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            teberOkay.play();
                            teberOkay.onended = function()
                            {
                                if (quests.bountyTeberCompletionStyle == "doublespare")
                                {
                                    quests.bountyTeberQuest = "complete";
                                    quests.completeQuests.push({name: "Bounty: Teber the Deserter", description: "You spared Teber in exchange for double the price of his bounty."});
                                    player.freynorFaction -= 5;
                                    worldItems.push([new Item("coins", X, Y), 50]);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                                else
                                {
                                    worldItems.push([new Item("coins", X, Y), 50]);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                    }

                    if (self.ID == "Hilmund the Innkeeper" && conversationID[0] != "Kedwin" || conversationID[0] == "Hilmund")
                    {
                        lowBar = "dialogue";
                        conversationID[0] = "Hilmund";

                        if (clickReleased)
                        {
                            self.RC();
                        }

                        //CONVERSATION
                        if (conversationID[1] == 0)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["I could really use a drink.", false, "a"]];
                                var hits = 1;
                                for (var i = 0; i < player.romance.length; i++)
                                {
                                    if (player.romance[i] == "hilmund")
                                    {
                                        player.dialogueOptions.push(["I'm going to sleep here with you tonight.", false, "b"]);
                                        player.dialogueOptions.push(["I'm glad we're together.", false, "c"]);
                                        hits = 0;
                                        break;
                                    }
                                }
                                if (hits)
                                {
                                    player.dialogueOptions.push(["I'm looking for a place to spend the night.", false, "d"]);
                                    player.dialogueOptions.push(["Do you get many customers around here?", false, "e"]);
                                    if (player.freynorFaction >= 20 && player.inebriation >= 60 && player.charisma >= 4 || player.gender != "Female" && player.freynorFaction >= 20 && player.inebriation >= 70 || player.title == "Royalty" && player.freynorFaction >= 20 && player.inebriation >= 70 || player.title == "Nobility" && player.freynorFaction >= 20 && player.inebriation >= 70)
                                    {
                                        player.dialogueOptions.push(["Hey there handsome.", false, "f"]);
                                    }
                                }
                                if (quests.theBrokenWellQuest == false)
                                {
                                    player.dialogueOptions.push(["Do you know anything about that broken well right outside the inn?", false, "g"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0d";
                                        }
                                        else if (player.dialogueOptions[i][2] == "e")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0e";
                                        }
                                        else if (player.dialogueOptions[i][2] == "f")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0f";
                                        }
                                        else if (player.dialogueOptions[i][2] == "g")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "0g";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "0a")
                        {
                            var rmnc = 0;
                            for (var i = 0; i < player.romance.length; i++)
                            {
                                if (player.romance[i] == "hilmund")
                                {
                                    rmnc = 1;
                                }
                            }

                            var ttlc = 0;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins")
                                {
                                    ttlc += Inventory[i][1];
                                }
                                else if (Inventory[i][0].type == "bucketOfWater")
                                {
                                    ttlc += 20;
                                }
                            }
                            for (var i = 0; i < bankAccount.length; i++)
                            {
                                if (bankAccount[i][0].type == "coins")
                                {
                                    ttlc += bankAccount[i][1];
                                }
                                else if (bankAccount[i][0].type == "bucketOfWater")
                                {
                                    ttlc += 20;
                                }
                            }
                            for (var i = 0; i < worldItems.length; i++)
                            {
                                if (worldItems[i][0].type == "coins" && worldItems[i][0].X < X + 1100 && worldItems[i][0].X > X - 1100 && worldItems[i][0].Y < Y + 1100 && worldItems[i][0].Y > Y - 1100)
                                {
                                    ttlc += worldItems[i][1];
                                }
                                else if (worldItems[i][0].type == "bucketOfWater" && worldItems[i][0].X < X + 1100 && worldItems[i][0].X > X - 1100 && worldItems[i][0].Y < Y + 1100 && worldItems[i][0].Y > Y - 1100)
                                {
                                    ttlc += 20;
                                }
                            }
                            if (player.thirst <= 3 && ttlc < 2)
                            {
                                hilmundTakeThis.play();
                                hilmundTakeThis.onended = function()
                                {
                                    worldItems.push([new Item("bucketOfWater", X, Y), 1]);
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (rmnc)
                            {
                                var hits = 0;
                                hilmundThisOne.play();
                                hilmundThisOne.onended = function()
                                {
                                    for (var i = 0; i < Inventory.length; i++)
                                    {
                                        if (Inventory[i][0].type == "harstAle")
                                        {
                                            Inventory[i][1] += 1;
                                            hits = 1;
                                            break;
                                        }
                                    }
                                    if (!hits)
                                    {
                                        Inventory.push([new Item("harstAle", false, false), 1]);
                                    }
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                hilmundBuy.play();
                                hilmundBuy.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }

                        }
                        else if (conversationID[1] == "0b")
                        {
                            hilmundLookingForward.play();
                            hilmundLookingForward.onended = function()
                            {
                                if (!quests.hilmundChild)
                                {
                                    sleeperTime += 60 * 60 * 24 * 365 * 6.75;
                                    player.experience = 0;
                                    player.magicalExperience = 0;
                                    player.health = player.healthMAX;
                                    player.energy = player.energyMAX;
                                    player.will = player.willMAX;
                                    player.hunger = player.hungerMAX;
                                    player.thirst = player.thirstMAX;
                                }
                                sleep();
                                if (!quests.hilmundChild)
                                {
                                    quests.hilmundChild = true;
                                    quests.hilmundChildName = prompt("You may not have expected it, but shortly after sleeping with Hilmund you knew that you were carrying his baby. You and him worked out arrangements whilst you were pregnant for you to settle down; then finally, after nine long months of nausea and strange cravings the time came to bring your child into the world. What was the name that you and Hilmund decided upon for your baby boy?", "Boki");
                                    alert("You stayed with " + quests.hilmundChildName + " to care for him, making sure he was raised as you saw fit. He grew fast and before you knew it he had turned six years old.")
                                    change = "makemy6yearoldherealready!";
                                }
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0c")
                        {
                            hilmundLove.play();
                            hilmundLove.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0d")
                        {
                            hilmundForRoom.play();
                            hilmundForRoom.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 1;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0e")
                        {
                            hilmundThatIDo.play();
                            hilmundThatIDo.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "0f")
                        {
                            if (player.title != "Nobility" && player.title != "Royalty" && player.gender == "Female")
                            {
                                hilmundLaugh.play();
                                hilmundLaugh.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 2;
                                    self.SC();
                                }
                            }
                            else if (player.gender == "Female" && player.title == "Royalty" || player.gender == "Female" && player.title == "Nobility")
                            {
                                hilmundFlattering.play();
                                hilmundFlattering.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else if (player.gender != "Female")
                            {
                                hilmundWoman.play();
                                hilmundWoman.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                        }
                        else if (conversationID[1] == "0g")
                        {
                            hilmundStorm.play();
                            hilmundStorm.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 5;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == 1)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Here you are then. (give 12 coins)", false, "a"], ["Nevermind.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "1a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "1b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "1a")
                        {
                            var room = -1;
                            for (var i = 0; i < Inventory.length; i++)
                            {
                                if (Inventory[i][0].type == "coins" && Inventory[i][1] >= 12)
                                {
                                    room = i;
                                }
                            }
                            if (room < 0)
                            {
                                hilmundNoMoney.play();
                                hilmundNoMoney.onended = function()
                                {
                                    playersTurnToSpeak = true;
                                    player.dialoguePosition = 0;
                                    conversationID[1] = 0;
                                    self.SC();
                                }
                            }
                            else
                            {
                                Inventory[room][1] -= 12;
                                if (Inventory[room][1] < 1)
                                {
                                    Inventory.splice(room, 1);
                                }

                                sleep();

                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "1b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 2)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["You aren't by chance seeing anyone are you?", false, "a"], ["Sorry, I've had a bit to drink.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "2a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "2b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "2a")
                        {
                            hilmundCoupleUp.play();
                            hilmundCoupleUp.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 3;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "2b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 3)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Just like that?", false, "a"], ["Honey, I'm all yours!", false, "b"], ["No, sorry I've had a bit too much to drink.", false, "c"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "3b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            conversationID[1] = "3c";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "3a")
                        {
                            hilmundFineEnough.play();
                            hilmundFineEnough.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 4;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3b")
                        {
                            hilmundGoodTime.play();
                            hilmundGoodTime.onended = function()
                            {
                                sleep();
                                player.romance.push("hilmund");
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "3c")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 4)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Sure!", false, "a"], ["I'm not ready to make a decision like this yet...", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            conversationID[1] = "4a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "4b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "4a")
                        {
                            player.romance.push("hilmund");
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == "4b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 5)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Is there anyway I can help?", false, "a"], ["That's all I wanted to know.", false, "b"]];
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "5a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            conversationID[1] = "5b";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "5a")
                        {
                            hilmundFind.play();
                            hilmundFind.onended = function()
                            {
                                quests.theBrokenWellQuest = true;
                                playersTurnToSpeak = true;
                                quests.activeQuests.push({name: "The Broken Well", description: "You offered to help Hilmund find the parts to fix the town well."});
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "5b")
                        {
                            player.dialoguePosition = 0;
                            conversationID[1] = 0;
                            self.SC();
                        }
                        else if (conversationID[1] == 6)
                        {
                            if (player.dialogueChoiceMade == false)
                            {
                                player.dialogueOptions = [["Where should I look for the parts?", false, "c"]];
                                if (quests.theBrokenWellDetailsTold == false)
                                {
                                    player.dialogueOptions.unshift(["What pieces do I need to find?", false, "a"]);
                                }
                                else
                                {
                                    player.dialogueOptions.unshift(["What pieces do I need to find?", false, "b"]);
                                }
                                var wlCord = false;
                                var wlWinch = false;
                                var wlStone = false;
                                var wlAxle = false;
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "wellCord")
                                    {
                                        wlCord = true;
                                    }
                                    else if (Inventory[i][0].type == "wellWinch")
                                    {
                                        wlWinch = true;
                                    }
                                    else if (Inventory[i][0].type == "wellStone")
                                    {
                                        wlStone = true;
                                    }
                                    else if (Inventory[i][0].type == "wellAxle")
                                    {
                                        wlAxle = true;
                                    }
                                }
                                if (wlCord && wlWinch && wlStone && wlAxle)
                                {
                                    player.dialogueOptions.unshift(["I have all of the parts for you to fix the well with.", false, "d"]);
                                }
                            }
                            else if (player.dialogueChoiceMade == true)
                            {
                                player.dialogueChoiceMade = false;
                                for (var i = 0; i < player.dialogueOptions.length; i++)
                                {
                                    if (player.dialogueOptions[i][1] == true)
                                    {
                                        if (player.dialogueOptions[i][2] == "a")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6a";
                                        }
                                        else if (player.dialogueOptions[i][2] == "b")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6b";
                                        }
                                        else if (player.dialogueOptions[i][2] == "c")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6c";
                                        }
                                        else if (player.dialogueOptions[i][2] == "d")
                                        {
                                            playersTurnToSpeak = false;
                                            conversationID[1] = "6d";
                                        }
                                    }
                                }
                            }
                        }
                        else if (conversationID[1] == "6a")
                        {
                            hilmundNeed.play();
                            hilmundNeed.onended = function()
                            {
                                playersTurnToSpeak = true;
                                quests.theBrokenWellDetailsTold = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6b")
                        {
                            hilmundAlreadyTold.play();
                            hilmundAlreadyTold.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6c")
                        {
                            hilmundNoIdea.play();
                            hilmundNoIdea.onended = function()
                            {
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 6;
                                self.SC();
                            }
                        }
                        else if (conversationID[1] == "6d")
                        {
                            hilmundGreat.play();
                            hilmundGreat.onended = function()
                            {
                                var toDelete = [];
                                for (var i = 0; i < Inventory.length; i++)
                                {
                                    if (Inventory[i][0].type == "wellCord")
                                    {
                                        toDelete.unshift(i);
                                    }
                                    else if (Inventory[i][0].type == "wellWinch")
                                    {
                                        toDelete.unshift(i);
                                    }
                                    else if (Inventory[i][0].type == "wellStone")
                                    {
                                        toDelete.unshift(i);
                                    }
                                    else if (Inventory[i][0].type == "wellAxle")
                                    {
                                        toDelete.unshift(i);
                                    }
                                }

                                for (var i = 0; i < toDelete.length; i++)
                                {
                                    Inventory.splice(toDelete[i], 1);
                                }
                                quests.theBrokenWellFixed = true;
                                quests.theBrokenWellQuest = "complete";
                                quests.completeQuests.push({name: "The Broken Well", description: "You found the parts to fix the well near a frich infested farm house; You gave them to Hilmund who fixed the well."});
                                worldItems.push([new Item("coins", X, Y), 30]);
                                quests.hilmundNewWealth += 63;
                                quests.medliaNewWealth += 9;
                                player.freynorFaction += 15;
                                player.fame += 1;
                                player.experience += 125;
                                playersTurnToSpeak = true;
                                player.dialoguePosition = 0;
                                conversationID[1] = 0;
                                self.SC();
                                change = "none";
                            }
                        }
                    }
                }
                else if (dialogueActive && self.engagedInDialogue == true)
                {
                    dialogueReset(self);
                }

                //ACCESS SHOPS BANKS AND OTHER AI SERVICES
                if (dtm < self.sizeRadius)
                {
                    if (self.hostile == true)
                    {
                        if (self.team == "player")
                        {
                            XXX.fillStyle = "gold";
                        }
                        else
                        {
                            XXX.fillStyle = "red";
                        }
                    }
                    else
                    {
                        XXX.fillStyle = "gold";
                    }
                    XXX.textAlign = "center";
                    XXX.font = "bold 15px Book Antiqua";
                    XXX.fillText(self.ID, X - self.X + 1 / 2 * CCC.width, Y - self.Y - 16 + 1 / 2 * CCC.height);

                    //click-based interaction
                    if (self.ultra.faction != "outlander" && self.ultra.faction != "hostile")
                    {
                        var parsedFactionRelation = eval("player." + self.ultra.faction.toLowerCase() + "Faction");
                    }
                    else
                    {
                        var parsedFactionRelation = 0;
                    }

                    if (dClick == true && self.ultra.merchant == true && dtp < 100 && self.disturbed == false && parsedFactionRelation >= -25 || dClick == true && self.ultra.storage == true) //merchant by click
                    {
                        if (self.ultra.storage == true)
                        {
                            player.storage = true;
                            player.storageCap = self.ultra.storageCap;
                        }
                        else
                        {
                            player.storage = false;
                            player.storageCap = 0;
                        }
                        shopInventory = self.ultra.merchandise;
                        shopID = self.ID;
                        console.log(self.ID);
                        shopkeeper = self;
                        console.log(self);
                        player.merchPosition = 0;
                        merchScroll = 0;
                        lowBar = "shop";
                        gameState = "paused";
                    }
                    else if (dClick == true && self.ultra.banker == true && dtp < 100 && self.disturbed == false && parsedFactionRelation >= -49) //banker by click
                    {
                        player.bankPosition = 0;
                        bankScroll = 0;
                        lowBar = "bank";
                        gameState = "paused";
                    }
                }
            }
        }
    }
}

function dialogueReset(self)
{
    self.engagedInDialogue = false;
    player.dialogueChoiceMade = false;
    player.dialoguePosition = 0;
    player.inventoryPosition = 0;
    invScroll = 0;
    conversationID[0] = "none";
    conversationID[1] = 0;
    if (gameState == "active")
    {
        lowBar = "information";
    }
    dialogueActive = false;

    //text dialogue reset
    msgPhrase = -1;
    msgWord = 0;
    msgWords = [];
    makeWord = [];
    message = " ";
    tellMessage = false;
    msgKeepTime = 0;

    player.dialogueOptions = [];
    playersTurnToSpeak = true;
}

function msgReset()
{
    tellMessage = false;
    msgPhrase = -1;
    msgWord = 0;
    msgWords = [];
    makeWord = [];
    message = " ";
    msgKeepTime = 0;
}